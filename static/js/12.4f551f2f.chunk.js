(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{1099:function(a,e,t){"use strict";t.r(e);var n=t(0),s=t.n(n),i=t(10),r=t(16),l=t(14),o=t(7),c=t(60),d=t(38),u=t(4),m=t(12),p=t(6),b=t(290),h=t(291),g=t(5),k=t(19),f=t(709),E=t(15),_=t.n(E);class j extends n.Component{constructor(a){super(a),this.state={isloadingFaktur:!1,isLoading:!1,isLoadingBatal:!1,date:new Date}}getBarcode(a){this.setState({isloadingFaktur:!0}),Object(p.c)("batalpenjualan/get/by-kode-barcode/"+a).then(a=>{if(0===a.data.length)Object(u.e)("info","Kode Barcode Yang Anda Cari Tidak Ada"),this.setState({isloadingFaktur:!1});else{let e=[{no_faktur_group:"Silahkan Pilih"}];a.data.forEach((a,t)=>{e.push({no_faktur_group:a._id.no_faktur_group}),this.props.change("no_faktur","Silahkan Pilih"),this.setState({isloadingFaktur:!1}),this.props.dispatch(Object(c.n)(e))})}}).catch(a=>{this.setState({isloadingFaktur:!1}),Object(u.e)("info","Kode Barcode Yang Anda Cari Tidak Ada")})}getDetailFaktur(){this.setState({isLoading:!0});let a={no_faktur_group:this.state.no_faktur_group_selected};Object(p.e)("batalpenjualan/get/by-faktur",a).then(a=>{0===a.data.length?(Object(u.e)("info","Data Transaksi Tersbut Tidak Ada"),this.setState({isLoading:!1})):(this.props.dispatch(Object(c.m)(a.data)),this.setState({isLoading:!1}))}).catch(a=>{Object(u.e)("info","Data Transaksi Tersbut Tidak Ada"),this.setState({isLoading:!1})})}componentDidMount(){this.props.dispatch(Object(o.mb)())}btlPenjualan(){this.setState({isLoadingBatal:!0}),setTimeout(()=>{this.props.dispatch(Object(l.d)("HeadBatalPenjualan")),this.setState({isLoadingBatal:!1,no_faktur_group_selected:""}),this.props.dispatch(Object(c.n)([])),this.props.dispatch(Object(c.m)([]))},500)}render(){const a={renderer:a=>s.a.createElement("div",null,"Nama Atribut : ",a.nama_atribut," ",s.a.createElement("br",null),"Harga Atribut : ",parseInt(a.harga_atribut).toLocaleString("ID-id")," ",s.a.createElement("br",null),"Ongkos : ",parseInt(a.ongkos).toLocaleString("ID-id")," ",s.a.createElement("br",null))};return s.a.createElement("form",{onSubmit:this.props.handleSubmit,onKeyPress:a=>{"Enter"===a.key&&a.preventDefault()},autoComplete:"off"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-lg-3"},s.a.createElement(b.a,{onChange:a=>this.getBarcode(a.target.value),name:"kode_barcode",component:g.e,type:"text",label:"Kode Barcode",placeholder:"Masukan Kode Barcode"})),s.a.createElement("div",{className:"col-lg-3"},s.a.createElement(b.a,{label:"No Faktur",name:"no_faktur",id:"no_faktur",onChange:a=>this.setState({no_faktur_group_selected:a}),options:this.props.no_faktur.map(a=>{return{value:a.no_faktur_group,name:a.no_faktur_group}||[]}),placeholder:"Silahkan Pilih No Faktur",component:g.f})),s.a.createElement("div",{className:"col-lg-3"},s.a.createElement(b.a,{label:"Alasan",name:"alasan",options:this.props.datakondisi.filter(a=>void 0!==a.kondisi_barang).map(a=>{return{value:a.kondisi_barang,name:a.kondisi_barang}}),placeholder:"Silahkan Pilih Alasan",component:g.f})),s.a.createElement("div",{className:"col-lg-3"},s.a.createElement("div",{className:"text-right"},s.a.createElement("label",null,"\xa0"),s.a.createElement("button",{type:"button",onClick:()=>this.getDetailFaktur(),name:"type_btn",className:"btn btn-primary btn-block",disabled:this.state.isLoading},this.state.isLoading?s.a.createElement(s.a.Fragment,null,s.a.createElement("i",{className:"fas fa-spinner fa-spin"})," \xa0 Sedang Mencari"):"Cari Data"))),s.a.createElement("div",{className:"col-lg-12"},s.a.createElement(k.a,{keyField:"kode_barcode",exportCsv:!1,data:this.props.setBatalPenjualan||[],columns:this.props.columns,empty:!0,textEmpty:"Data Barang Kosong",expandRow:a})),s.a.createElement("div",{className:"col-lg-12"},s.a.createElement("label",null,"\xa0"),s.a.createElement("button",{type:"submit",name:"type_btn",className:"btn btn-primary",disabled:this.props.isLoading},this.props.isLoading?s.a.createElement(s.a.Fragment,null,s.a.createElement("i",{className:"fas fa-spinner fa-spin"})," \xa0Simpan Batal Penjualan"):"Simpan Batal Penjualan"),"\xa0",s.a.createElement("button",{type:"button",name:"type_btn",onClick:()=>this.btlPenjualan(),className:"btn btn-warning",disabled:this.state.isLoadingBatal},this.state.isLoadingBatal?s.a.createElement(s.a.Fragment,null,s.a.createElement("i",{className:"fas fa-spinner fa-spin"})," \xa0 Batal"):"Batal"))),this.state.isLoading?s.a.createElement(_.a,{loading:!0,background:"rgba(0, 0, 0, 0.35)",loaderColor:"rgba(94, 147, 117, 1)"}):null)}}j=Object(h.a)({form:"HeadBatalPenjualan",enableReinitialize:!0,validate:f.a})(j);var S=Object(i.b)(a=>({no_faktur:a.penjualan.setNoFakturPenjualan,setBatalPenjualan:a.penjualan.setBatalPenjualan,datakondisi:a.datamaster.getDataKondisiBarang}),null)(j);class O extends n.Component{constructor(a){super(a),this.state={}}componentDidMount(){}render(){return s.a.createElement("form",{onSubmit:this.props.handleSubmit,onKeyPress:a=>{"Enter"===a.key&&a.preventDefault()},autoComplete:"off"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-lg-4"},s.a.createElement(b.a,{name:"no_faktur_group",component:g.b,type:"hidden"}),s.a.createElement(b.a,{name:"alasan",component:g.b,type:"hidden"}),s.a.createElement(b.a,{name:"username",component:g.e,type:"text",label:"Username",placeholder:"Masukan Username"})),s.a.createElement("div",{className:"col-lg-4"},s.a.createElement(b.a,{name:"password",component:g.e,type:"password",label:"Password",placeholder:"Masukan Password"})),s.a.createElement("div",{className:"col-lg-4"},s.a.createElement("label",null," \xa0 "),s.a.createElement("button",{type:"submit",name:"type_btn",className:"btn btn-primary btn-block",disabled:this.props.isLoadingOtorisasi},this.props.isLoadingOtorisasi?s.a.createElement(s.a.Fragment,null,s.a.createElement("i",{className:"fas fa-spinner fa-spin"})," \xa0 Simpan"):"Simpan"))),this.props.isLoadingOtorisasi?s.a.createElement(_.a,{loading:!0,background:"rgba(0, 0, 0, 0.35)",loaderColor:"rgba(94, 147, 117, 1)"}):null)}}O=Object(h.a)({form:"OtorisasiBatalJual",enableReinitialize:!0})(O);var B=Object(i.b)(null)(O);e.default=Object(i.b)(a=>({setBatalPenjualan:a.penjualan.setBatalPenjualan}),null)(class extends s.a.Component{constructor(a){super(a),this.state={isLoading:!1,databarang:[],isLoadingOtorisasi:!1,columns:[{dataField:"kode_barcode",text:"Kode Barcode",footerAttrs:{colSpan:"1"},footer:"Total Barang "},{dataField:"nama_barang",text:"Nama Barang",footer:a=>parseInt(this.props.setBatalPenjualan.length)},{dataField:"berat",text:"Berat",formatter:a=>s.a.createElement("span",null,parseInt(a).toFixed(1)),footer:a=>parseInt(a.reduce((a,e)=>a+e,0)).toFixed(1)},{dataField:"harga_jual",text:"Harga Jual",formatter:a=>s.a.createElement("span",null,parseInt(a).toLocaleString("ID-id")),footer:a=>parseInt(a.reduce((a,e)=>a+e,0)).toLocaleString("id-ID")},{dataField:"harga_total",text:"Harga Total",formatter:a=>s.a.createElement("span",null,parseInt(a).toLocaleString("ID-id")),footer:a=>parseInt(a.reduce((a,e)=>a+e,0)).toLocaleString("id-ID")}]},this.handleSubmit=this.handleSubmit.bind(this)}handleSubmit(a){let e={no_faktur_group:a.no_faktur,alasan:a.alasan};localStorage.setItem("no_faktur_batal_jual",JSON.stringify(e)),this.props.dispatch(Object(o.wb)())}simpanTransaksiJual(a){this.setState({isLoadingOtorisasi:!0});let e={no_faktur_group:JSON.parse(localStorage.getItem("no_faktur_batal_jual")).no_faktur_group},t={user_id:a.username,password:a.password};Object(p.e)("users/login",t).then(a=>{Object(u.e)("success","Otorisasi Berhasil"),this.setState({isLoadingOtorisasi:!0}),Object(p.e)("batalpenjualan/simpan",e).then(a=>{this.setState({isLoadingOtorisasi:!1}),this.props.dispatch(Object(c.m)([])),this.props.dispatch(Object(c.n)([])),Object(u.e)("success",a.data.message)}).then(()=>{this.props.dispatch(Object(l.d)("HeadBatalPenjualan")),this.props.dispatch(Object(l.d)("OtorisasiBatalJual")),this.props.dispatch(Object(o.vb)())}).catch(a=>{this.setState({isLoadingOtorisasi:!1}),Object(u.e)("info","Error menyimpan data, Silahkan Cek tanggal transaksi dan koneksi anda")})}).catch(a=>{Object(u.e)("info","Username atau Password Salah"),this.setState({isLoadingOtorisasi:!1})})}render(){return s.a.createElement("div",null,s.a.createElement("ol",{className:"breadcrumb float-xl-right"},s.a.createElement("li",{className:"breadcrumb-item"},s.a.createElement(r.b,{to:"#"},"Penjualan")),s.a.createElement("li",{className:"breadcrumb-item active"},"Batal Penjualan")),s.a.createElement("h1",{className:"page-header"},"Batal Penjualan "),s.a.createElement(m.a,null,s.a.createElement(m.c,null,"Batal Penjualan"),s.a.createElement("br",null),s.a.createElement("div",{className:"container"},s.a.createElement(S,{isLoading:this.state.isLoading,onSubmit:a=>this.handleSubmit(a),data:this.state.databarang,columns:this.state.columns})),s.a.createElement("br",null),s.a.createElement(d.a,{size:"L",title:"Otorisasi Pembatalan",content:s.a.createElement(B,{isLoadingOtorisasi:this.state.isLoadingOtorisasi,onSubmit:a=>this.simpanTransaksiJual(a)})})))}})},709:function(a,e,t){"use strict";e.a=(a=>{const e={};return a.kode_barcode||(e.kode_barcode="Kode Barcode Harus Diisi"),a.no_faktur||(e.no_faktur="No Faktur Harus Diisi"),a.alasan||(e.alasan="Alasan Harus Diisi"),e})}}]);
//# sourceMappingURL=12.4f551f2f.chunk.js.map