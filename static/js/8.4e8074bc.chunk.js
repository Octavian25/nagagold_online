(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{1123:function(a,e,t){"use strict";t.r(e);var n=t(0),i=t.n(n),s=t(15),o=t(11),r=t(9),d=t(289),l=t(290),c=t(45),g=t(7),m=t(4),p=t(5),h=t(18),u=t(6),b=t(706);class k extends n.Component{constructor(a){super(a),this.state={date:new Date,isLoadingBatal:!1,isLoadingBaki:!1}}componentWillUnmount(){}componentDidMount(){this.props.dispatch(Object(g.ib)()),this.props.dispatch(Object(g.hb)()),setTimeout(()=>{this.setState({kode_gudang:"TOKO"}),this.props.change("kode_gudang","TOKO")},100)}getKodeBarcode(a){Object(u.c)("barang/get/by-kode-barcode/"+a).then(e=>{if(0===e.data.length)Object(p.e)("info","Data Yang Dicari Tidak Ada");else{let t=JSON.parse(localStorage.getItem("data_barang_tmp"))||[];-1===t.findIndex(e=>e.kode_barcode===a)&&(t.push(e.data[0]),localStorage.setItem("data_barang_tmp",JSON.stringify(t)),this.props.dispatch(Object(c.k)(t)),this.props.change("kode_barcode",""))}}).catch(a=>{Object(p.e)("info","Data Yang Dicari Tidak Ada")})}batalHancur(){this.setState({isLoadingBatal:!0}),setTimeout(()=>{this.props.dispatch(Object(c.k)([])),localStorage.setItem("data_barang_tmp",JSON.stringify([])),this.setState({isLoadingBatal:!1})},500)}render(){return i.a.createElement("form",{onSubmit:this.props.handleSubmit,autoComplete:"off",onKeyPress:a=>{"Enter"===a.key&&a.preventDefault()}},i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-lg-4"},i.a.createElement(d.a,{id:"kode_gudang",label:"Kode Gudang",name:"kode_gudang",onChange:a=>{this.setState({kode_gudang:a}),this.props.change("kode_baki","")},options:this.props.datagudang.filter(a=>void 0!==a.kode_gudang).map(a=>{return{value:a.kode_gudang,name:a.kode_gudang+" - "+a.nama_gudang}}),placeholder:"Silahkan Pilih Kode Gudang",component:m.f})),i.a.createElement("div",{className:"col-lg-4"},!1===this.state.isLoadingBaki?i.a.createElement(d.a,{label:"Baki Tujuan",name:"kode_baki",options:this.props.databaki.filter(a=>a.kode_gudang===this.state.kode_gudang).map(a=>{return{value:a.kode_baki,name:a.kode_baki+" - "+a.nama_baki}||[]}),placeholder:"Silahkan Pilih Baki Tujuan",component:m.f}):i.a.createElement(m.g,{label:"Baki Tujuan"})),i.a.createElement("div",{className:"col-lg-4"},i.a.createElement(d.a,{onChange:a=>this.getKodeBarcode(a.target.value),name:"kode_barcode",component:m.e,type:"text",label:"Kode Barcode",placeholder:"Masukan Kode Barcode"}))),i.a.createElement(h.a,{keyField:"kode_barcode",exportCsv:!1,pagination:"off",data:0===this.props.setBarangPindah.length?JSON.parse(localStorage.getItem("data_barang_tmp")):this.props.setBarangPindah,columns:this.props.columns,empty:!0,textEmpty:"Data Barang Kosong"}),i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-10"},i.a.createElement("button",{className:"btn btn-primary",disabled:this.props.submitting,type:"submit"},this.props.isLoading?i.a.createElement(i.a.Fragment,null,i.a.createElement("i",{className:"fas fa-spinner fa-spin"})," \xa0 Sedang Menyimpan"):"Simpan Data"),"\xa0",i.a.createElement("button",{className:"btn btn-warning",type:"button",onClick:()=>this.batalHancur(),disabled:this.props.isLoadingBatal},this.state.isLoadingBatal?i.a.createElement(i.a.Fragment,null,i.a.createElement("i",{className:"fas fa-spinner fa-spin"})," \xa0 Sedang Membatal"):"Batal"))))}}k=Object(l.a)({form:"HeadPindahBarang",enableReinitialize:!0,validate:b.a})(k);var _=Object(r.b)(a=>({datagudang:a.datamaster.getDataGudang,databaki:a.datamaster.getDataBaki,setBarangPindah:a.databarang.setBarangPindah}),null)(k),B=t(26),f=t.n(B);e.default=Object(r.b)(a=>({setBarangPindah:a.databarang.setBarangPindah}),null)(class extends i.a.Component{constructor(a){super(a),this.state={isEdit:!1,modalDialog:!1,isLoading:!1,columns:[{dataField:"kode_barcode",text:"Kode Barcode",footerAttrs:{colSpan:"5"},footer:(a,e,t,n)=>i.a.createElement("div",null,"Total Barang : ",0===this.props.setBarangPindah.length?null===JSON.parse(localStorage.getItem("data_barang_tmp"))?0:JSON.parse(localStorage.getItem("data_barang_tmp")).length||0:this.props.setBarangPindah.length||0," ")},{dataField:"kode_group",text:"Gudang Asal"},{dataField:"kode_dept",text:"Baki Asal"},{dataField:"nama_barang",text:"Nama Barang"},{dataField:"nama_atribut",text:"Nama Atribut"},{dataField:"berat",text:"Berat",formatter:a=>a.toFixed(3),footer:a=>a.reduce((a,e)=>a+e,0).toFixed(3)},{dataField:"action",text:"Action",csvExport:!1,headerClasses:"text-center",formatter:(a,e,t)=>i.a.createElement("div",{className:"row text-center"},i.a.createElement("div",{className:"col-12"},i.a.createElement("button",{type:"button",onClick:()=>this.hapusdata(t),className:"btn btn-danger mr-3"},i.a.createElement("i",{className:"fa fa-trash"})))),footer:""}]},this.handleSubmit=this.handleSubmit.bind(this)}hapusdata(a){f.a.fire({title:"Anda Yakin !!",text:"Ingin Menghapus Data Ini ?",icon:"warning",position:"top-center",cancelButtonText:"Tidak",showCancelButton:!0,confirmButtonText:"OK",showConfirmButton:!0}).then(e=>{if(e.isConfirmed){let e=JSON.parse(localStorage.getItem("data_barang_tmp"));e.splice(a,1),localStorage.setItem("data_barang_tmp",JSON.stringify(e)),this.props.dispatch(Object(c.k)(e))}})}componentDidMount(){}handleSubmit(a){this.setState({isLoading:!0});let e=0===this.props.setBarangPindah.length?JSON.parse(localStorage.getItem("data_barang_tmp")):this.props.setBarangPindah,t={kode_gudang:a.kode_gudang,kode_toko:a.kode_baki,detail_barang:e};Object(u.e)("pindahbarang/addsatuan",t).then(()=>{this.setState({isLoading:!1})}).then(()=>{localStorage.setItem("data_barang_tmp",JSON.stringify([]))}).then(()=>{this.props.dispatch(Object(c.k)([]))}).then(()=>{Object(p.e)("success","Data Berhasil Disimpan")}).catch(a=>this.errorhandling(a))}errorhandling(a){Object(p.a)(a.response.data),this.setState({isLoading:!1})}render(){return i.a.createElement("div",null,i.a.createElement("ol",{className:"breadcrumb float-xl-right"},i.a.createElement("li",{className:"breadcrumb-item"},i.a.createElement(s.b,{to:"#"},"Barang")),i.a.createElement("li",{className:"breadcrumb-item active"},"Pindah Barang")),i.a.createElement("h1",{className:"page-header"},"Pindah Barang "),i.a.createElement(o.a,null,i.a.createElement(o.c,null,"Pindah Barang"),i.a.createElement("br",null),i.a.createElement("div",{className:"container"},i.a.createElement(_,{isLoading:this.state.isLoading,onSubmit:a=>this.handleSubmit(a),data:this.props.setBarangPindah,columns:this.state.columns})),i.a.createElement("br",null)))}})},706:function(a,e,t){"use strict";e.a=(a=>{const e={};return a.kode_gudang||(e.kode_gudang="Kode Gudang Tidak Boleh Kosong"),a.kode_baki||(e.kode_baki="Nama Baki Tidak Boleh Kosong"),a.statusAktif||(e.statusAktif="Status Tidak Boleh Kosong"),e})}}]);
//# sourceMappingURL=8.4e8074bc.chunk.js.map