{"version":3,"sources":["pages/Barang/HancurDataBarang/HeadaHancurDataBarang.jsx","pages/Barang/HancurDataBarang/OtorisasiHancur.jsx","pages/Barang/HancurDataBarang/FormHancurBarang.jsx","Validasi/Barang/PindahBarang/ValidasiPindahBarang.jsx"],"names":["HeadaHancurDataBarang","Component","constructor","props","super","this","state","date","Date","isLoadingBatal","kondisi_barang","componentDidMount","dispatch","getDataKondisiBarang","getKodeBarcode","e","getData","then","res","data","length","ToastNotification","change","forEach","list","index","kode_barcode","kode_group","kode_dept","nama_barang","nama_atribut","berat","cek","JSON","parse","localStorage","getItem","findIndex","hasil","push","setItem","stringify","setHancurBarang","catch","err","batalHancur","setState","setTimeout","render","react_default","a","createElement","onSubmit","handleSubmit","autoComplete","onKeyPress","key","preventDefault","className","Field","label","name","onChange","options","datakondisi","filter","undefined","map","value","placeholder","component","ReanderSelect","target","ReanderField","type","tabel","keyField","pagination","exportCsv","columns","empty","textEmpty","disabled","isLoading","Fragment","onClick","reduxForm","form","enableReinitialize","validate","ValidasiPindahBarang","connect","datamaster","databarang","OtorisasiHancur","HiidenFiled","isLoadingOtorisasi","React","isEdit","modalDialog","dataField","text","footerAttrs","colSpan","footer","cell","row","num","formatter","toFixed","columnData","reduce","acc","item","csvExport","headerClasses","rowcontent","hapusdata","bind","id","Swal","fire","title","icon","position","cancelButtonText","showCancelButton","confirmButtonText","showConfirmButton","result","isConfirmed","splice","showModal","hancurBarang","user_id","username","password","postData","resposn","detail_barang","hideModal","error","errorhandling","response","react_router_dom","to","panel","HancurDataBarang_HeadaHancurDataBarang","ModalGlobal","size","content","HancurDataBarang_OtorisasiHancur","errors","kode_gudang","kode_baki","statusAktif"],"mappings":"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","file":"static/js/6.a9c7d240.chunk.js","sourcesContent":["import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { Field, reduxForm } from \"redux-form\";\r\nimport { setHancurBarang } from \"../../../actions/databarang_action\";\r\nimport { getDataKondisiBarang } from \"../../../actions/datamaster_action\";\r\nimport { ReanderSelect, ReanderField } from \"../../../components/helpers/field\";\r\nimport { ToastNotification } from \"../../../components/helpers/notification\";\r\nimport Tabel from \"../../../components/helpers/tabel\";\r\nimport { getData } from \"../../../config/axios\";\r\nimport ValidasiPindahBarang from \"../../../Validasi/Barang/PindahBarang/ValidasiPindahBarang\";\r\nconst maptostate = (state) => {\r\n  return {\r\n    datakondisi: state.datamaster.getDataKondisiBarang,\r\n    setHancurBarang: state.databarang.setHancurBarang,\r\n  };\r\n};\r\nclass HeadaHancurDataBarang extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      date: new Date(),\r\n      isLoadingBatal: false,\r\n      kondisi_barang: \"kosong\",\r\n    };\r\n  }\r\n  componentDidMount() {\r\n    this.props.dispatch(getDataKondisiBarang());\r\n  }\r\n  getKodeBarcode(e) {\r\n    getData(\"barang/get/by-kode-barcode/\" + e)\r\n      .then((res) => {\r\n        if (res.data.length === 0) {\r\n          ToastNotification(\"info\", \"Data Yang Dicari Tidak Ada\");\r\n        } else {\r\n          if (this.state.kondisi_barang ===\"kosong\") {\r\n              ToastNotification(\"info\", \"Kondisi Barang Harus Dipilih\");\r\n              this.props.change(\"kode_barcode\", \"\");\r\n          } else {\r\n            res.data.forEach((list, index) => {\r\n              let data = {\r\n                kode_barcode: list.kode_barcode,\r\n                kode_group: list.kode_group,\r\n                kode_dept: list.kode_dept,\r\n                nama_barang: list.nama_barang,\r\n                nama_atribut: list.nama_atribut,\r\n                berat: list.berat,\r\n                kondisi_barang: this.state.kondisi_barang,\r\n              };\r\n              //   console.log(data);\r\n              let cek =\r\n                JSON.parse(localStorage.getItem(\"data_barang_hancur_tmp\")) ||\r\n                [];\r\n              let hasil_cek = cek.findIndex(\r\n                (hasil) => hasil.kode_barcode === e\r\n              );\r\n              //   console.log(index);\r\n              if (hasil_cek === -1) {\r\n                cek.push(data);\r\n                localStorage.setItem(\r\n                  \"data_barang_hancur_tmp\",\r\n                  JSON.stringify(cek)\r\n                );\r\n                  this.props.dispatch(setHancurBarang(cek));\r\n                 this.props.change(\"kode_barcode\", \"\");\r\n              }\r\n            });\r\n          }\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        ToastNotification(\"info\", \"Data Yang Dicari Tidak Ada\");\r\n      });\r\n  }\r\n\r\n  batalHancur() {\r\n    this.setState({ isLoadingBatal: true })\r\n    setTimeout(() => {\r\n      this.setState({ isLoadingBatal: false })\r\n      localStorage.setItem('data_barang_hancur_tmp', JSON.stringify([]))\r\n      this.props.dispatch(setHancurBarang([]));\r\n    }, 500);\r\n  }\r\n  render() {\r\n    return (\r\n      <form onSubmit={this.props.handleSubmit} autoComplete=\"off\"\r\n      onKeyPress={(e) => {\r\n        e.key === \"Enter\" && e.preventDefault();\r\n      }}\r\n      >\r\n        <div className=\"row\">\r\n          <div className=\"col-lg-6\">\r\n            <Field\r\n              label=\"Kondisi Barang\"\r\n              name=\"kondisi_barang\"\r\n              onChange={(e) => {\r\n                this.setState({ kondisi_barang: e });\r\n              }}\r\n              options={this.props.datakondisi\r\n                .filter((list) => list.kondisi_barang !== undefined)\r\n                .map((list) => {\r\n                  let data = {\r\n                    value: list.kondisi_barang,\r\n                    name: list.kondisi_barang,\r\n                  };\r\n                  return data;\r\n                })}\r\n              placeholder={\"Silahkan Pilih Kondisi Barang\"}\r\n              component={ReanderSelect}\r\n            />\r\n          </div>\r\n\r\n          <div className=\"col-lg-6\">\r\n            <Field\r\n              onChange={(e) => this.getKodeBarcode(e.target.value)}\r\n              name=\"kode_barcode\"\r\n              component={ReanderField}\r\n              type=\"text\"\r\n              label=\"Kode Barcode\"\r\n              placeholder=\"Masukan Kode Barcode\"\r\n            />\r\n          </div>\r\n        </div>\r\n        <Tabel\r\n          keyField=\"kode_barcode\"\r\n          pagination=\"off\"\r\n          exportCsv={false}\r\n          data={\r\n            this.props.setHancurBarang.length === 0\r\n              ? JSON.parse(localStorage.getItem(\"data_barang_hancur_tmp\"))\r\n              : this.props.setHancurBarang\r\n          }\r\n          columns={this.props.columns}\r\n          empty={true}\r\n          textEmpty=\"Data Barang Kosong\"\r\n        />\r\n        <div className=\"row\">\r\n          <div className=\"col-10\">\r\n            <button\r\n              className=\"btn btn-primary\"\r\n              type=\"submit\"\r\n              disabled={this.props.isLoading}\r\n            >\r\n              {this.props.isLoading ? (\r\n                <>\r\n                  <i className=\"fas fa-spinner fa-spin\"></i> &nbsp; Sedang\r\n                  Menyimpan\r\n                </>\r\n              ) : (\r\n                \"Simpan Data\"\r\n              )}\r\n            </button>\r\n            &nbsp;\r\n            <button\r\n              className=\"btn btn-warning\"\r\n              type=\"button\"\r\n              onClick={()=>this.batalHancur()}\r\n              disabled={this.props.isLoading}\r\n            >\r\n              {this.state.isLoadingBatal ? (\r\n                <>\r\n                  <i className=\"fas fa-spinner fa-spin\"></i> &nbsp; Sedang\r\n                  Membatal\r\n                </>\r\n              ) : (\r\n                \"Batal\"\r\n              )}\r\n            </button>\r\n          </div>\r\n          {/* <div className=\"2\">\r\n            {JSON.parse(localStorage.getItem(\"data_barang_hancur_tmp\")) ===\r\n            null ? null : (\r\n              <>\r\n                Total Barang :{\" \"}\r\n                {this.props.setHancurBarang.length === 0\r\n                  ? JSON.parse(localStorage.getItem(\"data_barang_hancur_tmp\"))\r\n                      .length || 0\r\n                  : this.props.setHancurBarang.length || 0}\r\n                <br />\r\n                Total Berat :\r\n                {this.props.setHancurBarang.length === 0\r\n                  ? JSON.parse(localStorage.getItem(\"data_barang_hancur_tmp\"))\r\n                      .map((column, key) => column.berat)\r\n                      .reduce((a, b) => a + b, 0)\r\n                      .toFixed(1)\r\n                  : this.props.setHancurBarang\r\n                      .map((column, key) => column.berat)\r\n                      .reduce((a, b) => a + b, 0)\r\n                      .toFixed(1)}\r\n              </>\r\n            )}\r\n          </div> */}\r\n        </div>\r\n      </form>\r\n    );\r\n  }\r\n}\r\n\r\nHeadaHancurDataBarang = reduxForm({\r\n  form: \"HeadaHancurDataBarang\",\r\n  enableReinitialize: true,\r\n  validate: ValidasiPindahBarang,\r\n})(HeadaHancurDataBarang);\r\nexport default connect(maptostate, null)(HeadaHancurDataBarang);\r\n","import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { Field, reduxForm } from \"redux-form\";\r\nimport { HiidenFiled, ReanderField } from \"../../../components/helpers/field\";\r\n\r\nclass OtorisasiHancur extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {};\r\n  }\r\n  componentDidMount() {\r\n    // let data = JSON.parse(localStorage.getItem(\"no_faktur_batal_jual\"));\r\n    // this.props.change(\"no_faktur_group\", data.no_faktur_group);\r\n    // this.props.change(\"alasan\", data.alasan);\r\n  }\r\n  render() {\r\n    return (\r\n      <form\r\n        onSubmit={this.props.handleSubmit}\r\n        onKeyPress={(e) => {\r\n          e.key === \"Enter\" && e.preventDefault();\r\n        }}\r\n        autoComplete=\"off\"\r\n      >\r\n        <div className=\"row\">\r\n          <div className=\"col-lg-4\">\r\n            <Field\r\n              name=\"no_faktur_group\"\r\n              component={HiidenFiled}\r\n              type=\"hidden\"\r\n            />\r\n            <Field name=\"alasan\" component={HiidenFiled} type=\"hidden\" />\r\n            <Field\r\n              name=\"username\"\r\n              component={ReanderField}\r\n              type=\"text\"\r\n              label=\"Username\"\r\n              placeholder=\"Masukan Username\"\r\n            />\r\n          </div>\r\n          <div className=\"col-lg-4\">\r\n            <Field\r\n              name=\"password\"\r\n              component={ReanderField}\r\n              type=\"password\"\r\n              label=\"Password\"\r\n              placeholder=\"Masukan Password\"\r\n            />\r\n          </div>\r\n          <div className=\"col-lg-4\">\r\n            <label> &nbsp; </label>\r\n            <button\r\n              type=\"submit\"\r\n              name=\"type_btn\"\r\n              className=\"btn btn-primary btn-block\"\r\n              disabled={this.props.isLoadingOtorisasi}\r\n            >\r\n              {this.props.isLoadingOtorisasi ? (\r\n                <>\r\n                  <i className=\"fas fa-spinner fa-spin\"></i> &nbsp; Otorisasi\r\n                </>\r\n              ) : (\r\n                \"Otorisasi\"\r\n              )}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </form>\r\n    );\r\n  }\r\n}\r\n\r\nOtorisasiHancur = reduxForm({\r\n  form: \"OtorisasiHancur\",\r\n  enableReinitialize: true,\r\n})(OtorisasiHancur);\r\nexport default connect(null)(OtorisasiHancur);\r\n","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { Panel, PanelHeader } from \"../../../components/panel/panel.jsx\";\r\nimport { connect } from \"react-redux\";\r\nimport HeadaHancurDataBarang from \"./HeadaHancurDataBarang.jsx\";\r\nimport Swal from \"sweetalert2\";\r\nimport { setHancurBarang } from \"../../../actions/databarang_action.jsx\";\r\nimport { postData } from \"../../../config/axios.jsx\";\r\nimport { ToastNotification } from \"../../../components/helpers/notification.jsx\";\r\nimport { hideModal, showModal } from \"../../../actions/datamaster_action.jsx\";\r\nimport OtorisasiHancur from \"./OtorisasiHancur.jsx\";\r\nimport ModalGlobal from \"../../../components/helpers/ModalGlobal.jsx\";\r\nconst maptostate = (state) => {\r\n  return {\r\n    setHancurBarang: state.databarang.setHancurBarang,\r\n  };\r\n};\r\n\r\nclass FormHancurBarang extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      isEdit: false,\r\n      modalDialog: false,\r\n      isLoading: false,\r\n      isLoadingOtorisasi: false,\r\n      columns: [\r\n        {\r\n          dataField: \"kode_barcode\",\r\n          text: \"Kode Barcode\",\r\n          footerAttrs: {\r\n            colSpan: \"5\",\r\n          },\r\n          footer: (cell, row, num, index) => {\r\n            return (\r\n              <div>\r\n                Total Barang :{\" \"}\r\n                {this.props.setHancurBarang.length === 0\r\n                  ? JSON.parse(\r\n                      localStorage.getItem(\"data_barang_hancur_tmp\")\r\n                    ) === null\r\n                    ? 0\r\n                    : JSON.parse(localStorage.getItem(\"data_barang_hancur_tmp\"))\r\n                        .length || 0\r\n                  : this.props.setHancurBarang.length || 0}{\" \"}\r\n              </div>\r\n            );\r\n          },\r\n        },\r\n\r\n        {\r\n          dataField: \"kode_group\",\r\n          text: \"Gudang Asal\",\r\n        },\r\n        {\r\n          dataField: \"kode_dept\",\r\n          text: \"Baki Asal\",\r\n        },\r\n        {\r\n          dataField: \"nama_barang\",\r\n          text: \"Nama Barang\",\r\n        },\r\n        {\r\n          dataField: \"nama_atribut\",\r\n          text: \"Nama Atribut\",\r\n        },\r\n        {\r\n          dataField: \"berat\",\r\n          text: \"Berat\",\r\n          formatter: (cell) => {\r\n            return cell.toFixed(3);\r\n          },\r\n          footer: (columnData) =>\r\n            columnData.reduce((acc, item) => acc + item, 0).toFixed(3),\r\n        },\r\n        {\r\n          dataField: \"kondisi_barang\",\r\n          text: \"Kondisi Barang\",\r\n          footer: \"\",\r\n        },\r\n\r\n        {\r\n          dataField: \"action\",\r\n          text: \"Action\",\r\n          csvExport: false,\r\n          headerClasses: \"text-center\",\r\n          formatter: (rowcontent, row, index) => {\r\n            return (\r\n              <div className=\"row text-center\">\r\n                <div className=\"col-12\">\r\n                  <button\r\n                    type=\"button\"\r\n                    onClick={() => this.hapusdata(index)}\r\n                    className=\"btn btn-danger mr-3\"\r\n                  >\r\n                    <i className=\"fa fa-trash\"></i>\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            );\r\n          },\r\n          footer: \"\",\r\n        },\r\n      ],\r\n    };\r\n    this.handleSubmit = this.handleSubmit.bind(this);\r\n  }\r\n\r\n  hapusdata(id) {\r\n    Swal.fire({\r\n      title: \"Anda Yakin !!\",\r\n      text: \"Ingin Menghapus Data Ini ?\",\r\n      icon: \"warning\",\r\n      position: \"top-center\",\r\n      cancelButtonText: \"Tidak\",\r\n      showCancelButton: true,\r\n      confirmButtonText: \"OK\",\r\n      showConfirmButton: true,\r\n    }).then((result) => {\r\n      if (result.isConfirmed) {\r\n        let data = JSON.parse(localStorage.getItem(\"data_barang_hancur_tmp\"));\r\n        data.splice(id, 1);\r\n        localStorage.setItem(\"data_barang_hancur_tmp\", JSON.stringify(data));\r\n        this.props.dispatch(setHancurBarang(data));\r\n        // deleteLocalItemBarcode(\"data_barang_hancur_tmp\", id);\r\n        // this.props.dispatch(getListReturnSupplier());\r\n      }\r\n    });\r\n  }\r\n\r\n  handleSubmit(e) {\r\n    this.props.dispatch(showModal());\r\n  }\r\n\r\n  hancurBarang(data) {\r\n    this.setState({\r\n      isLoadingOtorisasi: true,\r\n    });\r\n    let hasil = {\r\n      user_id: data.username,\r\n      password: data.password,\r\n    };\r\n    postData(\"users/login\", hasil)\r\n      .then((resposn) => {\r\n        ToastNotification(\"success\", \"Otorisasi Berhasil\");\r\n\r\n        this.setState({ isLoading: true });\r\n        let data =\r\n          this.props.setHancurBarang.length === 0\r\n            ? JSON.parse(localStorage.getItem(\"data_barang_hancur_tmp\")) || 0\r\n            : this.props.setHancurBarang || 0;\r\n        // console.log(data);\r\n        let hasil = {\r\n          detail_barang: data,\r\n        };\r\n        postData(\"hancurbarang/add\", hasil)\r\n          .then(() => {\r\n            this.setState({ isLoading: false, isLoadingOtorisasi: false });\r\n          })\r\n          .then(() => {\r\n            localStorage.setItem(\"data_barang_hancur_tmp\", JSON.stringify([]));\r\n          })\r\n          .then(() => {\r\n            this.props.dispatch(setHancurBarang([]));\r\n          })\r\n          .then(() => {\r\n            this.props.dispatch(hideModal());\r\n            ToastNotification(\"success\", \"Data Berhasil Dihancur\");\r\n          })\r\n          .catch((error) => this.errorhandling(error));\r\n      })\r\n      .catch((err) => {\r\n        ToastNotification(\"info\", \"Username atau Password Salah\");\r\n        this.setState({\r\n          isLoadingOtorisasi: false,\r\n        });\r\n      });\r\n  }\r\n  errorhandling(error) {\r\n    ToastNotification(\"info\", error.response.data);\r\n  }\r\n  render() {\r\n    return (\r\n      <div>\r\n        <ol className=\"breadcrumb float-xl-right\">\r\n          <li className=\"breadcrumb-item\">\r\n            <Link to=\"#\">Barang</Link>\r\n          </li>\r\n          <li className=\"breadcrumb-item active\">Hancur Barang</li>\r\n        </ol>\r\n        <h1 className=\"page-header\">Hancur Barang </h1>\r\n        <Panel>\r\n          <PanelHeader>Hancur Barang</PanelHeader>\r\n          <br />\r\n\r\n          {/* Hancur Barang */}\r\n          <div className=\"container\">\r\n            <HeadaHancurDataBarang\r\n              isLoading={this.state.isLoading}\r\n              onSubmit={(data) => this.handleSubmit(data)}\r\n              columns={this.state.columns}\r\n            />\r\n          </div>\r\n          <br />\r\n          {/* End Hancur Barang */}\r\n\r\n          {/* End Tambah Hancur Barang  */}\r\n          <ModalGlobal\r\n            size=\"L\"\r\n            title=\"Otorisasi Hancur Barang\"\r\n            content={\r\n              <OtorisasiHancur\r\n                isLoadingOtorisasi={this.state.isLoadingOtorisasi}\r\n                onSubmit={(data) => this.hancurBarang(data)}\r\n              />\r\n            }\r\n          />\r\n        </Panel>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default connect(maptostate, null)(FormHancurBarang);\r\n","const ValidasiPindahBarang = (value) => {\r\n    const errors = {};\r\n    if (!value.kode_gudang) {\r\n        errors.kode_gudang = \"Kode Gudang Tidak Boleh Kosong\";\r\n    }\r\n    if (!value.kode_baki) {\r\n        errors.kode_baki = \"Nama Baki Tidak Boleh Kosong\";\r\n    }\r\n\r\n    if (!value.statusAktif) {\r\n        errors.statusAktif = \"Status Tidak Boleh Kosong\";\r\n    }\r\n\r\n    return errors;\r\n}\r\nexport default ValidasiPindahBarang;\r\n\r\n\r\n"],"sourceRoot":""}