{"version":3,"sources":["pages/Penjualan/BatalPenjualan/HeadBatalPenjualan.jsx","pages/Penjualan/BatalPenjualan/OtorisasiBatalJual.jsx","pages/Penjualan/BatalPenjualan/FormBatalPenjualan.jsx","Validasi/Penjualan/ValidasiBaralJual.jsx"],"names":["HeadBatalPenjualan","Component","constructor","props","super","this","state","isloadingFaktur","isLoading","isLoadingBatal","date","Date","getBarcode","value","clearTimeout","delay","setTimeout","setState","getData","then","res","data","length","ToastNotification","console","log","hasil","no_faktur_group","no_faktur_jual","forEach","item","index","push","_id","change","dispatch","setNoFakturPenjualan","catch","err","getDetailFaktur","no_faktur_group_selected","postData","setBatalPenjualan","componentDidMount","getDataKondisiBarang","document","getElementById","focus","btlPenjualan","reset","setItem","render","react_default","a","createElement","onSubmit","handleSubmit","onKeyPress","e","key","preventDefault","autoComplete","className","Field","id","name","component","ReanderField","type","label","placeholder","options","datakondisi","filter","list","undefined","kondisi_barang","map","ReanderSelect","disabled","Fragment","tabel","keyField","exportCsv","localStoragedecryp","JSON","parse","columns","empty","textEmpty","onClick","simpanBatal","loading_default","loading","background","loaderColor","reduxForm","form","enableReinitialize","validate","ValidasiBaralJual","connect","no_faktur","penjualan","datamaster","OtorisasiBatalJual","HiidenFiled","isLoadingOtorisasi","React","databarang","dataField","text","footer","formatter","cell","parseInt","toFixed","columnData","reduce","acc","toLocaleString","csvExport","headerClasses","rowcontent","row","hapusDataBarang","bind","Swal","fire","title","icon","position","cancelButtonText","showCancelButton","confirmButtonText","showConfirmButton","result","isConfirmed","getItem","splice","status","kode_barcode","alasan","nama_barang","berat","harga_jual","harga_total","harga_atribut","nama_atribut","ongkos","cek","localStorageencryp","stringify","findIndex","simpanTransaksiJual","data_batal_penjualan","data_barang_jual","user_id","username","password","kategori","description","keterangan","toUpperCase","postData2","resposn","message","hideModal","showModal","react_router_dom","to","panel","BatalPenjualan_HeadBatalPenjualan","ModalGlobal","size","content","BatalPenjualan_OtorisasiBatalJual","errors"],"mappings":"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","file":"static/js/14.ede0c195.chunk.js","sourcesContent":["import React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { Field, reduxForm, reset } from \"redux-form\";\nimport { getDataKondisiBarang } from \"../../../actions/datamaster_action\";\nimport { ReanderField, ReanderSelect } from \"../../../components/helpers/field\";\nimport { ToastNotification } from \"../../../components/helpers/notification\";\nimport Tabel from \"../../../components/helpers/tabel\";\nimport { getData, postData } from \"../../../config/axios\";\n// import { SkeletonLoading } from \"../../../components/helpers/field.jsx\";\nimport ValidasiBaralJual from \"../../../Validasi/Penjualan/ValidasiBaralJual\";\nimport {\n  setBatalPenjualan,\n  setNoFakturPenjualan,\n} from \"../../../actions/penjualan_action\";\nimport Loading from 'react-fullscreen-loading';\nimport { localStoragedecryp, setItem } from \"../../../components/helpers/function\";\n\nconst maptostate = (state) => {\n  return {\n    no_faktur: state.penjualan.setNoFakturPenjualan,\n    setBatalPenjualan: state.penjualan.setBatalPenjualan,\n    datakondisi: state.datamaster.getDataKondisiBarang,\n  };\n};\nclass HeadBatalPenjualan extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      // no_faktur: [],\n      isloadingFaktur: false,\n      isLoading: false,\n      isLoadingBatal: false,\n      date: new Date(),\n    };\n  }\n\n  getBarcode(value) {\n    clearTimeout(this.delay)\n    this.delay = setTimeout(() => {\n    this.setState({ isloadingFaktur: true });\n    getData(\"batalpenjualan/get/by-kode-barcode/\" + value)\n      .then((res) => {\n        if (res.data.length === 0) {\n          ToastNotification(\"info\", \"Kode Barcode Yang Anda Cari Tidak Ada\");\n          this.setState({\n            isloadingFaktur: false,\n          });\n        } else {\n          console.log(res.data);\n          let hasil = [{ no_faktur_group: \"Silahkan Pilih\", no_faktur_jual : \"Silahkan Pilih\"}];\n          res.data.forEach((item, index) => {\n            hasil.push({\n              no_faktur_group: item._id.no_faktur_group,\n              no_faktur_jual: item._id.no_faktur_jual\n            });\n            // console.log(item._id.no_faktur_group);\n            this.props.change(\"no_faktur\", \"Silahkan Pilih\");\n            this.setState({\n              isloadingFaktur: false,\n            });\n            this.props.dispatch(setNoFakturPenjualan(hasil));\n          });\n        }\n      })\n      .catch((err) => {\n        this.setState({\n          isloadingFaktur: false,\n        });\n        ToastNotification(\"info\", \"Kode Barcode Yang Anda Cari Tidak Ada\");\n      });\n    }, 1500);\n  }\n  getDetailFaktur() {\n    this.setState({ isLoading: true });\n    let data = {\n      no_faktur_group: this.state.no_faktur_group_selected,\n    };\n    postData(\"batalpenjualan/get/by-faktur\", data)\n      .then((res) => {\n        if (res.data.length === 0) {\n          ToastNotification(\"info\", \"Data Transaksi Tersbut Tidak Ada\");\n          this.setState({ isLoading: false });\n        } else {\n          this.props.dispatch(setBatalPenjualan(res.data));\n          this.setState({\n            isLoading: false,\n          });\n        }\n      })\n      .catch((err) => {\n        ToastNotification(\"info\", \"Data Transaksi Tersbut Tidak Ada\");\n        this.setState({ isLoading: false });\n      });\n  }\n  componentDidMount() {\n    this.props.dispatch(getDataKondisiBarang());\n    setTimeout(() => {\n      document.getElementById(\"kode_barcode\").focus()\n    }, 100);\n  }\n  btlPenjualan() {\n    this.setState({ isLoadingBatal: true });\n    setTimeout(() => {\n      this.props.dispatch(reset(\"HeadBatalPenjualan\"));\n      this.setState({\n        isLoadingBatal: false,\n        no_faktur_group_selected: \"\",\n      });\n      setItem('data_barang_batal_jual',[])\n      this.props.dispatch(setNoFakturPenjualan([]));\n      this.props.dispatch(setBatalPenjualan([]));\n    }, 500);\n  }\n  render() {\n    \n    return (\n      <form\n        onSubmit={this.props.handleSubmit}\n        onKeyPress={(e) => {\n          e.key === \"Enter\" && e.preventDefault();\n        }}\n        autoComplete=\"off\"\n      >\n        <div className=\"row\">\n          <div className=\"col-lg-4\">\n            <Field\n              // onChange={(e) => this.getBarcode(e.target.value)}\n              id=\"kode_barcode\"\n              name=\"kode_barcode\"\n              component={ReanderField}\n              type=\"text\"\n              label=\"Kode Barcode\"\n              placeholder=\"Masukan Kode Barcode\"\n            />\n          </div>\n          {/* <div className=\"col-lg-3\">\n            <Field\n              label=\"No Faktur\"\n              name=\"no_faktur\"\n              id=\"no_faktur\"\n              onChange={(e) => this.setState({ no_faktur_group_selected: e })}\n              options={this.props.no_faktur.map((row) => {\n                console.log(row);\n                let data = {\n                  value: row.no_faktur_group,\n                  name: row.no_faktur_jual,\n                };\n                return data || [];\n              })}\n              placeholder={\"Silahkan Pilih No Faktur\"}\n              component={ReanderSelect}\n            />\n          </div> */}\n          <div className=\"col-lg-4\">\n            <Field\n              label=\"Alasan\"\n              name=\"alasan\"\n              options={this.props.datakondisi\n                .filter((list) => list.kondisi_barang !== undefined)\n                .map((list) => {\n                  let data = {\n                    value: list.kondisi_barang,\n                    name: list.kondisi_barang,\n                  };\n                  return data;\n                })}\n              placeholder={\"Silahkan Pilih Alasan\"}\n              component={ReanderSelect}\n            />\n          </div>\n          <div className=\"col-lg-4\">\n            <div className=\"text-right\">\n              <label>&nbsp;</label>\n              <button\n                type=\"submit\"\n                // onClick={() => this.getDetailFaktur()}\n                name=\"type_btn\"\n                className=\"btn btn-primary btn-block\"\n                disabled={this.state.isLoading}\n              >\n                {this.state.isLoading ? (\n                  <>\n                    <i className=\"fas fa-spinner fa-spin\"></i> &nbsp; Sedang\n                    Mencari\n                  </>\n                ) : (\n                  \"Cari Data\"\n                )}\n              </button>\n            </div>\n          </div>\n          <div className=\"col-lg-12\">\n            <Tabel\n              keyField=\"kode_barcode\"\n              exportCsv={false}\n              data={\n                localStoragedecryp(\"data_barang_batal_jual\").length === 0\n                    ? []\n                    : JSON.parse(\n                        localStoragedecryp(\"data_barang_batal_jual\")\n                      )\n              }\n              columns={this.props.columns}\n              empty={true}\n              textEmpty=\"Data Barang Kosong\"\n            />\n          </div>\n          <div className=\"col-lg-12\">\n            <label>&nbsp;</label>\n            <button\n              type=\"button\"\n              onClick={()=>this.props.simpanBatal()}\n              name=\"type_btn\"\n              className=\"btn btn-primary\"\n              disabled={this.props.isLoading}\n            >\n              {this.props.isLoading ? (\n                <>\n                  <i className=\"fas fa-spinner fa-spin\"></i> &nbsp;Simpan Batal\n                  Penjualan\n                </>\n              ) : (\n                \"Simpan Batal Penjualan\"\n              )}\n            </button>\n            &nbsp;\n            <button\n              type=\"button\"\n              name=\"type_btn\"\n              onClick={() => this.btlPenjualan()}\n              className=\"btn btn-warning\"\n              disabled={this.state.isLoadingBatal}\n            >\n              {this.state.isLoadingBatal ? (\n                <>\n                  <i className=\"fas fa-spinner fa-spin\"></i> &nbsp; Batal\n                </>\n              ) : (\n                \"Batal\"\n              )}\n            </button>\n          </div>\n        </div>\n        {this.state.isLoading ? (\n        <Loading \n        loading\n        background=\"rgba(0, 0, 0, 0.35)\"\n         loaderColor=\"rgba(94, 147, 117, 1)\" />\n      ) : null}\n      </form>\n    );\n  }\n}\n\nHeadBatalPenjualan = reduxForm({\n  form: \"HeadBatalPenjualan\",\n  enableReinitialize: true,\n  validate: ValidasiBaralJual,\n})(HeadBatalPenjualan);\nexport default connect(maptostate, null)(HeadBatalPenjualan);\n","import React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { Field, reduxForm } from \"redux-form\";\nimport { HiidenFiled, ReanderField } from \"../../../components/helpers/field\";\nimport Loading from 'react-fullscreen-loading';\n\nclass OtorisasiBatalJual extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {};\n  }\n  componentDidMount() {\n    // let data = JSON.parse(localStorage.getItem(\"no_faktur_batal_jual\"));\n    // this.props.change(\"no_faktur_group\", data.no_faktur_group);\n    // this.props.change(\"alasan\", data.alasan);\n    setTimeout(() => {\n      document.getElementById('username').focus()\n    }, 100);\n  }\n  render() {\n    return (\n      <form\n        onSubmit={this.props.handleSubmit}\n        onKeyPress={(e) => {\n          e.key === \"Enter\" && e.preventDefault();\n        }}\n        autoComplete=\"off\"\n      >\n        <div className=\"row\">\n          <div className=\"col-lg-6\">\n            <Field\n              name=\"no_faktur_group\"\n              component={HiidenFiled}\n              type=\"hidden\"\n            />\n            <Field name=\"alasan\" component={HiidenFiled} type=\"hidden\" />\n            <Field\n              id=\"username\"\n              name=\"username\"\n              component={ReanderField}\n              type=\"text\"\n              label=\"Username\"\n              placeholder=\"Masukan Username\"\n            />\n          </div>\n          <div className=\"col-lg-6\">\n            <Field\n              name=\"password\"\n              component={ReanderField}\n              type=\"password\"\n              label=\"Password\"\n              placeholder=\"Masukan Password\"\n            />\n          </div>\n          <div className=\"col-lg-12\">\n            <Field\n              name=\"keterangan\"\n              component={ReanderField}\n              label=\"Keterangan\"\n              placeholder=\"Masukan Keterangan\"\n            />\n          </div>\n          <div className=\"col-lg-12\">\n            <label> &nbsp; </label>\n            <button\n              type=\"submit\"\n              name=\"type_btn\"\n              className=\"btn btn-primary btn-block\"\n              disabled={this.props.isLoadingOtorisasi}\n            >\n              {this.props.isLoadingOtorisasi ? (\n                <>\n                  <i className=\"fas fa-spinner fa-spin\"></i> &nbsp; Simpan\n                </>\n              ) : (\n                \"Simpan\"\n              )}\n            </button>\n          </div>\n        </div>\n        {this.props.isLoadingOtorisasi ? (\n        <Loading \n        loading\n        background=\"rgba(0, 0, 0, 0.35)\"\n         loaderColor=\"rgba(94, 147, 117, 1)\" />\n      ) : null}\n      </form>\n    );\n  }\n}\n\nOtorisasiBatalJual = reduxForm({\n  form: \"OtorisasiBatalJual\",\n  enableReinitialize: true,\n})(OtorisasiBatalJual);\nexport default connect(null)(OtorisasiBatalJual);\n","import React from \"react\";\nimport { connect } from \"react-redux\";\nimport { Link } from \"react-router-dom\";\nimport { reset } from \"redux-form\";\nimport Swal from \"sweetalert2\";\n// import { reset } from \"redux-form\";\nimport { hideModal, showModal } from \"../../../actions/datamaster_action.jsx\";\nimport {\n  setBatalPenjualan,\n  setNoFakturPenjualan,\n} from \"../../../actions/penjualan_action.jsx\";\nimport { getItem, localStoragedecryp, localStorageencryp, setItem } from \"../../../components/helpers/function.jsx\";\n// import { setBatalPenjualan, setNoFakturPenjualan } from \"../../../actions/penjualan_action.jsx\";\nimport ModalGlobal from \"../../../components/helpers/ModalGlobal.jsx\";\nimport { ToastNotification } from \"../../../components/helpers/notification.jsx\";\n// import { ToastNotification } from \"../../../components/helpers/notification.jsx\";\n// import { ToastNotification } from \"../../../components/helpers/notification.jsx\";\nimport { Panel, PanelHeader } from \"../../../components/panel/panel.jsx\";\nimport { getData, postData, postData2 } from \"../../../config/axios.jsx\";\n// import { postData } from \"../../../config/axios.jsx\";\nimport HeadBatalPenjualan from \"./HeadBatalPenjualan.jsx\";\nimport OtorisasiBatalJual from \"./OtorisasiBatalJual.jsx\";\n\nconst maptostate = (state) => {\n  return {\n    // no_faktur: state.penjualan.setNoFakturPenjualan,\n    setBatalPenjualan: state.penjualan.setBatalPenjualan,\n  };\n};\nclass FormBatalPenjualan extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoading: false,\n      databarang: [],\n      isLoadingOtorisasi: false,\n      columns: [\n        {\n          dataField: \"no_faktur_jual\",\n          text: \"No Faktur\",\n          footer: \"Total Barang \",\n        },\n        {\n          dataField: \"kode_barcode\",\n          text: \"Kode Barcode\",\n          footer: \"\",\n        },\n        {\n          dataField: \"nama_barang\",\n          text: \"Nama Barang\",\n          footer: \"\",\n        },\n        {\n          dataField: \"berat\",\n          text: \"Berat\",\n          formatter: (cell) => {\n            return <span>{parseInt(cell).toFixed(1)}</span>;\n          },\n          footer: (columnData) =>\n            parseInt(columnData.reduce((acc, item) => acc + item, 0)).toFixed(\n              1\n            ),\n        },\n        // {\n        //   dataField: \"nama_atribut\",\n        //   text: \"Nama Atribut\",\n        // },\n        // {\n        //   dataField: \"harga_atribut\",\n        //   text: \"Harga Atribut\",\n        //   formatter: (cell) => {\n        //     return <span>{parseInt(cell).toLocaleString(\"kr-KO\")}</span>;\n        //   },\n        //   footer: (columnData) =>\n        //     parseInt(\n        //       columnData.reduce((acc, item) => acc + item, 0)\n        //     ).toLocaleString(\"kr-KO\"),\n        // },\n\n        // {\n        //   dataField: \"berat_atribut\",\n        //   text: \"Berat Atribut\",\n        //   formatter: (cell) => {\n        //     return <span>{parseInt(cell).toFixed(1)}</span>;\n        //   },\n        //   footer: (columnData) =>\n        //     parseInt(columnData.reduce((acc, item) => acc + item, 0)).toFixed(\n        //       1\n        //     ),\n        // },\n\n        {\n          dataField: \"harga_jual\",\n          text: \"Harga Jual\",\n          formatter: (cell) => {\n            return <span>{parseInt(cell).toLocaleString(\"kr-KO\")}</span>;\n          },\n          footer: (columnData) =>\n            parseInt(\n              columnData.reduce((acc, item) => acc + item, 0)\n            ).toLocaleString(\"kr-KO\"),\n        },\n        {\n          dataField: \"harga_total\",\n          text: \"Harga Total\",\n          formatter: (cell) => {\n            return <span>{parseInt(cell).toLocaleString(\"kr-KO\")}</span>;\n          },\n          footer: (columnData) =>\n            parseInt(\n              columnData.reduce((acc, item) => acc + item, 0)\n            ).toLocaleString(\"kr-KO\"),\n        },\n        {\n          dataField: \"alasan\",\n          text: \"Alasan\",\n        },\n        {\n          dataField: \"Aksi\",\n          text: \"Aksi\",\n          csvExport: false,\n          headerClasses: \"text-center\",\n          formatter: (rowcontent, row,index) => {\n            return (\n              <div className=\"row text-center\">\n                <div className=\"col-12\">\n                  <button\n                    onClick={() =>\n                     {\n                      this.hapusDataBarang(index)\n                     }\n                    }\n                    className=\"btn btn-danger\"\n                    type=\"button\"\n                  >\n                    <i className=\"fa fa-trash\"></i>\n                  </button>\n                </div>\n              </div>\n            );\n          },\n          },\n      ],\n    };\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  hapusDataBarang(id) {\n    Swal.fire({\n      title: \"Anda yakin ingin mengapus barang ini ? \",\n      icon: \"warning\",\n      position: \"top-center\",\n      cancelButtonText: \"Tidak\",\n      showCancelButton: true,\n      confirmButtonText: \"OK\",\n      showConfirmButton: true,\n    }).then((result) => {\n      if (result.isConfirmed) {\n        let data = getItem(\"data_barang_batal_jual\");\n        data.splice(id, 1);\n        setItem(\"data_barang_batal_jual\", data);\n          this.setState({\n            status: \"berhasil\",\n          });\n      }\n    })\n  }\n  handleSubmit(data) {\n\n    getData(\"batalpenjualan/get/by-kode-barcode/\" + data.kode_barcode)\n      .then((res) => {\n        if (res.data.length === 0) {\n          ToastNotification(\"info\", \"Kode Barcode Yang Anda Cari Tidak Ada\");\n          this.setState({\n            isloadingFaktur: false,\n          });\n        } else {\n          res.data.forEach(item => {\n            let row = {\n              alasan: data.alasan,\n              kode_barcode: item.kode_barcode,\n              no_faktur_group: item.no_faktur_group,\n              no_faktur_jual: item.no_faktur_jual,\n              nama_barang: item.nama_barang,\n              berat: item.berat,\n              harga_jual: item.harga_jual,\n              harga_total: item.harga_total,\n              harga_atribut: item.harga_atribut,\n              nama_atribut: item.nama_atribut,\n              ongkos: item.ongkos,\n            }\n            let cek = localStoragedecryp(\"data_barang_batal_jual\").length === 0 ? [] : JSON.parse(localStoragedecryp(\"data_barang_batal_jual\"));\n            \n            if (cek.length === 0) {\n              cek.push(row);\n              localStorageencryp(\"data_barang_batal_jual\", JSON.stringify(cek));\n              this.setState({\n                status : \"berhasil\"\n              })\n              return false;\n           }\n            \n            let hasil_cek = cek.findIndex(\n              (hasil) => hasil.kode_barcode === item.kode_barcode\n            );\n            if (hasil_cek === -1) {\n              let hasil_cek_faktur = cek.findIndex(\n                (hasil) => hasil.no_faktur_group === item.no_faktur_group\n              );\n              if (hasil_cek_faktur === -1) {\n                ToastNotification('info','No Faktur Tidak Sama')\n              } else {\n                cek.push(row);\n                localStorageencryp(\"data_barang_batal_jual\", JSON.stringify(cek));\n              }\n            } else {\n              ToastNotification('info','Kode Barcode Sudah Ada Di Tabel')\n            }\n            this.setState({\n              status : \"berhasil\"\n            })\n          });\n\n        }\n    \n      })\n      .catch((err) => {\n        this.setState({\n          isloadingFaktur: false,\n        });\n        ToastNotification(\"info\", \"Kode Barcode Yang Anda Cari Tidak Ada\");\n      });\n    // let hasil = {\n    //   no_faktur_group: data.no_faktur,\n    //   alasan: data.alasan,\n    // };\n    // localStorage.setItem(\"no_faktur_batal_jual\", JSON.stringify(hasil));\n  }\n  simpanTransaksiJual(data) {\n    this.setState({\n      isLoadingOtorisasi: true,\n    });\n    let data_batal_penjualan = getItem(\"data_barang_batal_jual\");\n\n    let data_barang_jual = [];\n    data_batal_penjualan.forEach(item => {\n      let row = {\n        no_faktur_group: item.no_faktur_group,\n        no_faktur_jual: item.no_faktur_jual,\n        alasan : item.alasan\n      }\n      data_barang_jual.push(row);\n    });\n\n   \n    let hasil = {\n      user_id: data.username,\n      password: data.password,\n      kategori: \"BATAL PENJUALAN\",\n      description: \"SIMPAN BATAL PENJUALAN\",\n      keterangan: data.keterangan.toUpperCase() || \"-\"\n    }\n    postData2(\"authorization\", hasil)\n      .then((resposn) => {\n        ToastNotification(\"success\", \"Otorisasi Berhasil\");\n        this.setState({\n          isLoadingOtorisasi: true,\n        });\n        postData(\"batalpenjualan/simpan\", data_barang_jual)\n          .then((res) => {\n            this.setState({ isLoadingOtorisasi: false });\n            this.props.dispatch(setBatalPenjualan([]));\n            this.props.dispatch(setNoFakturPenjualan([]));\n            ToastNotification(\"success\", res.data.message);\n          })\n          .then(() => {\n            this.props.dispatch(reset(\"HeadBatalPenjualan\"));\n            this.props.dispatch(reset(\"OtorisasiBatalJual\"));\n            setItem('data_barang_batal_jual',[])\n            this.setState({ isLoadingOtorisasi: false });\n            this.props.dispatch(hideModal());\n          })\n          .catch((err) => {\n            this.setState({ isLoadingOtorisasi: false });\n            // console.log(err);\n            ToastNotification(\"info\", \"Error menyimpan data, Silahkan Cek tanggal transaksi dan koneksi anda\");\n          });\n      })\n      .catch((err) => {\n        ToastNotification(\"info\", \"Username atau Password Salah\");\n        this.setState({\n          isLoadingOtorisasi: false,\n        });\n      });\n  }\n  simpanBatal() {\n   \n    this.props.dispatch(showModal());\n\n    // console.log(data);\n  }\n  render() {\n    return (\n      <div>\n        <ol className=\"breadcrumb float-xl-right\">\n          <li className=\"breadcrumb-item\">\n            <Link to=\"#\">Penjualan</Link>\n          </li>\n          <li className=\"breadcrumb-item active\">Batal Penjualan</li>\n        </ol>\n        <h1 className=\"page-header\">Batal Penjualan </h1>\n        <Panel>\n          <PanelHeader>Batal Penjualan</PanelHeader>\n          <br />\n          <div className=\"container\">\n            <HeadBatalPenjualan\n              isLoading={this.state.isLoading}\n              onSubmit={(data) => this.handleSubmit(data)}\n              data={this.state.databarang}\n              columns={this.state.columns}\n              simpanBatal={()=>this.simpanBatal()}\n            />\n          </div>\n          <br />\n          <ModalGlobal\n            size=\"L\"\n            title=\"Otorisasi Pembatalan\"\n            content={\n              <OtorisasiBatalJual\n                isLoadingOtorisasi={this.state.isLoadingOtorisasi}\n                onSubmit={(data) => this.simpanTransaksiJual(data)}\n              />\n            }\n          />\n        </Panel>\n      </div>\n    );\n  }\n}\n\nexport default connect(maptostate, null)(FormBatalPenjualan);\n","const ValidasiBaralJual = (value) => {\n    const errors = {};\n    // if (!value.kode_barcode) {\n    //     errors.kode_barcode = \"Kode Barcode Harus Diisi\";\n    // }\n    // if (!value.no_faktur) {\n    //     errors.no_faktur = \"No Faktur Harus Diisi\";\n    // }\n    if (!value.alasan) {\n        errors.alasan = \"Alasan Harus Diisi\";\n    }\n    return errors;\n}\n\nexport default ValidasiBaralJual;\n\n\n"],"sourceRoot":""}