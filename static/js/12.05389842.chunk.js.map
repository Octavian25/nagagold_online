{"version":3,"sources":["pages/Penjualan/BatalPenjualan/HeadBatalPenjualan.jsx","pages/Penjualan/BatalPenjualan/OtorisasiBatalJual.jsx","pages/Penjualan/BatalPenjualan/FormBatalPenjualan.jsx","Validasi/Penjualan/ValidasiBaralJual.jsx"],"names":["HeadBatalPenjualan","Component","constructor","props","super","this","state","isloadingFaktur","isLoading","isLoadingBatal","date","Date","getBarcode","value","clearTimeout","delay","setTimeout","setState","getData","then","res","data","length","ToastNotification","hasil","no_faktur_group","no_faktur_jual","forEach","item","index","push","_id","change","dispatch","setNoFakturPenjualan","catch","err","getDetailFaktur","no_faktur_group_selected","postData","setBatalPenjualan","componentDidMount","getDataKondisiBarang","btlPenjualan","reset","render","expandRow","renderer","row","react_default","a","createElement","nama_atribut","parseInt","harga_atribut","toLocaleString","ongkos","onSubmit","handleSubmit","onKeyPress","e","key","preventDefault","autoComplete","className","Field","onChange","target","name","component","ReanderField","type","label","placeholder","id","options","no_faktur","map","console","log","ReanderSelect","datakondisi","filter","list","undefined","kondisi_barang","onClick","disabled","Fragment","tabel","keyField","exportCsv","columns","empty","textEmpty","loading_default","loading","background","loaderColor","reduxForm","form","enableReinitialize","validate","ValidasiBaralJual","connect","penjualan","datamaster","OtorisasiBatalJual","document","getElementById","focus","HiidenFiled","isLoadingOtorisasi","React","databarang","dataField","text","footerAttrs","colSpan","footer","columnData","formatter","cell","toFixed","reduce","acc","bind","alasan","localStorage","setItem","JSON","stringify","showModal","simpanTransaksiJual","hasil_btl_penjualan","parse","getItem","user_id","username","password","resposn","message","hideModal","react_router_dom","to","panel","BatalPenjualan_HeadBatalPenjualan","ModalGlobal","size","title","content","BatalPenjualan_OtorisasiBatalJual","errors","kode_barcode"],"mappings":"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","file":"static/js/12.05389842.chunk.js","sourcesContent":["import React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { Field, reduxForm, reset } from \"redux-form\";\nimport { getDataKondisiBarang } from \"../../../actions/datamaster_action\";\nimport { ReanderField, ReanderSelect } from \"../../../components/helpers/field\";\nimport { ToastNotification } from \"../../../components/helpers/notification\";\nimport Tabel from \"../../../components/helpers/tabel\";\nimport { getData, postData } from \"../../../config/axios\";\n// import { SkeletonLoading } from \"../../../components/helpers/field.jsx\";\nimport ValidasiBaralJual from \"../../../Validasi/Penjualan/ValidasiBaralJual\";\nimport {\n  setBatalPenjualan,\n  setNoFakturPenjualan,\n} from \"../../../actions/penjualan_action\";\nimport Loading from 'react-fullscreen-loading';\n\nconst maptostate = (state) => {\n  return {\n    no_faktur: state.penjualan.setNoFakturPenjualan,\n    setBatalPenjualan: state.penjualan.setBatalPenjualan,\n    datakondisi: state.datamaster.getDataKondisiBarang,\n  };\n};\nclass HeadBatalPenjualan extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      // no_faktur: [],\n      isloadingFaktur: false,\n      isLoading: false,\n      isLoadingBatal: false,\n      date: new Date(),\n    };\n  }\n\n  getBarcode(value) {\n    clearTimeout(this.delay)\n    this.delay = setTimeout(() => {\n      this.setState({ isloadingFaktur: true });\n    getData(\"batalpenjualan/get/by-kode-barcode/\" + value)\n      .then((res) => {\n        if (res.data.length === 0) {\n          ToastNotification(\"info\", \"Kode Barcode Yang Anda Cari Tidak Ada\");\n          this.setState({\n            isloadingFaktur: false,\n          });\n        } else {\n          let hasil = [{ no_faktur_group: \"Silahkan Pilih\", no_faktur_jual : \"Silahkan Pilih\"}];\n          res.data.forEach((item, index) => {\n            hasil.push({\n              no_faktur_group: item._id.no_faktur_group,\n              no_faktur_jual: item._id.no_faktur_jual\n            });\n            // console.log(item._id.no_faktur_group);\n            this.props.change(\"no_faktur\", \"Silahkan Pilih\");\n            this.setState({\n              isloadingFaktur: false,\n            });\n            this.props.dispatch(setNoFakturPenjualan(hasil));\n          });\n        }\n      })\n      .catch((err) => {\n        this.setState({\n          isloadingFaktur: false,\n        });\n        ToastNotification(\"info\", \"Kode Barcode Yang Anda Cari Tidak Ada\");\n      });\n    }, 1500);\n  }\n  getDetailFaktur() {\n    this.setState({ isLoading: true });\n    let data = {\n      no_faktur_group: this.state.no_faktur_group_selected,\n    };\n    postData(\"batalpenjualan/get/by-faktur\", data)\n      .then((res) => {\n        if (res.data.length === 0) {\n          ToastNotification(\"info\", \"Data Transaksi Tersbut Tidak Ada\");\n          this.setState({ isLoading: false });\n        } else {\n          this.props.dispatch(setBatalPenjualan(res.data));\n          this.setState({\n            isLoading: false,\n          });\n        }\n      })\n      .catch((err) => {\n        ToastNotification(\"info\", \"Data Transaksi Tersbut Tidak Ada\");\n        this.setState({ isLoading: false });\n      });\n  }\n  componentDidMount() {\n    this.props.dispatch(getDataKondisiBarang());\n  }\n  btlPenjualan() {\n    this.setState({ isLoadingBatal: true });\n    setTimeout(() => {\n      this.props.dispatch(reset(\"HeadBatalPenjualan\"));\n      this.setState({\n        isLoadingBatal: false,\n        no_faktur_group_selected: \"\",\n      });\n      this.props.dispatch(setNoFakturPenjualan([]));\n      this.props.dispatch(setBatalPenjualan([]));\n    }, 500);\n  }\n  render() {\n    const expandRow = {\n      renderer: (row) => (\n        <div>\n          Nama Atribut : {row.nama_atribut} <br />\n          Harga Atribut : {parseInt(row.harga_atribut).toLocaleString(\n            \"ID-id\"\n          )}{\" \"}\n          <br />\n          Ongkos : {parseInt(row.ongkos).toLocaleString(\"ID-id\")} <br />\n        </div>\n      ),\n    };\n    return (\n      <form\n        onSubmit={this.props.handleSubmit}\n        onKeyPress={(e) => {\n          e.key === \"Enter\" && e.preventDefault();\n        }}\n        autoComplete=\"off\"\n      >\n        <div className=\"row\">\n          <div className=\"col-lg-3\">\n            <Field\n              onChange={(e) => this.getBarcode(e.target.value)}\n              name=\"kode_barcode\"\n              component={ReanderField}\n              type=\"text\"\n              label=\"Kode Barcode\"\n              placeholder=\"Masukan Kode Barcode\"\n            />\n          </div>\n          <div className=\"col-lg-3\">\n            <Field\n              label=\"No Faktur\"\n              name=\"no_faktur\"\n              id=\"no_faktur\"\n              onChange={(e) => this.setState({ no_faktur_group_selected: e })}\n              options={this.props.no_faktur.map((row) => {\n                console.log(row);\n                let data = {\n                  value: row.no_faktur_group,\n                  name: row.no_faktur_jual,\n                };\n                return data || [];\n              })}\n              placeholder={\"Silahkan Pilih No Faktur\"}\n              component={ReanderSelect}\n            />\n          </div>\n          <div className=\"col-lg-3\">\n            <Field\n              label=\"Alasan\"\n              name=\"alasan\"\n              options={this.props.datakondisi\n                .filter((list) => list.kondisi_barang !== undefined)\n                .map((list) => {\n                  let data = {\n                    value: list.kondisi_barang,\n                    name: list.kondisi_barang,\n                  };\n                  return data;\n                })}\n              placeholder={\"Silahkan Pilih Alasan\"}\n              component={ReanderSelect}\n            />\n          </div>\n          <div className=\"col-lg-3\">\n            <div className=\"text-right\">\n              <label>&nbsp;</label>\n              <button\n                type=\"button\"\n                onClick={() => this.getDetailFaktur()}\n                name=\"type_btn\"\n                className=\"btn btn-primary btn-block\"\n                disabled={this.state.isLoading}\n              >\n                {this.state.isLoading ? (\n                  <>\n                    <i className=\"fas fa-spinner fa-spin\"></i> &nbsp; Sedang\n                    Mencari\n                  </>\n                ) : (\n                  \"Cari Data\"\n                )}\n              </button>\n            </div>\n          </div>\n          <div className=\"col-lg-12\">\n            <Tabel\n              keyField=\"kode_barcode\"\n              exportCsv={false}\n              data={this.props.setBatalPenjualan || []}\n              columns={this.props.columns}\n              empty={true}\n              textEmpty=\"Data Barang Kosong\"\n              expandRow={expandRow}\n            />\n          </div>\n          <div className=\"col-lg-12\">\n            <label>&nbsp;</label>\n            <button\n              type=\"submit\"\n              name=\"type_btn\"\n              className=\"btn btn-primary\"\n              disabled={this.props.isLoading}\n            >\n              {this.props.isLoading ? (\n                <>\n                  <i className=\"fas fa-spinner fa-spin\"></i> &nbsp;Simpan Batal\n                  Penjualan\n                </>\n              ) : (\n                \"Simpan Batal Penjualan\"\n              )}\n            </button>\n            &nbsp;\n            <button\n              type=\"button\"\n              name=\"type_btn\"\n              onClick={() => this.btlPenjualan()}\n              className=\"btn btn-warning\"\n              disabled={this.state.isLoadingBatal}\n            >\n              {this.state.isLoadingBatal ? (\n                <>\n                  <i className=\"fas fa-spinner fa-spin\"></i> &nbsp; Batal\n                </>\n              ) : (\n                \"Batal\"\n              )}\n            </button>\n          </div>\n        </div>\n        {this.state.isLoading ? (\n        <Loading \n        loading\n        background=\"rgba(0, 0, 0, 0.35)\"\n         loaderColor=\"rgba(94, 147, 117, 1)\" />\n      ) : null}\n      </form>\n    );\n  }\n}\n\nHeadBatalPenjualan = reduxForm({\n  form: \"HeadBatalPenjualan\",\n  enableReinitialize: true,\n  validate: ValidasiBaralJual,\n})(HeadBatalPenjualan);\nexport default connect(maptostate, null)(HeadBatalPenjualan);\n","import React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { Field, reduxForm } from \"redux-form\";\nimport { HiidenFiled, ReanderField } from \"../../../components/helpers/field\";\nimport Loading from 'react-fullscreen-loading';\n\nclass OtorisasiBatalJual extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {};\n  }\n  componentDidMount() {\n    // let data = JSON.parse(localStorage.getItem(\"no_faktur_batal_jual\"));\n    // this.props.change(\"no_faktur_group\", data.no_faktur_group);\n    // this.props.change(\"alasan\", data.alasan);\n    setTimeout(() => {\n      document.getElementById('username').focus()\n    }, 100);\n  }\n  render() {\n    return (\n      <form\n        onSubmit={this.props.handleSubmit}\n        onKeyPress={(e) => {\n          e.key === \"Enter\" && e.preventDefault();\n        }}\n        autoComplete=\"off\"\n      >\n        <div className=\"row\">\n          <div className=\"col-lg-4\">\n            <Field\n              name=\"no_faktur_group\"\n              component={HiidenFiled}\n              type=\"hidden\"\n            />\n            <Field name=\"alasan\" component={HiidenFiled} type=\"hidden\" />\n            <Field\n              id=\"username\"\n              name=\"username\"\n              component={ReanderField}\n              type=\"text\"\n              label=\"Username\"\n              placeholder=\"Masukan Username\"\n            />\n          </div>\n          <div className=\"col-lg-4\">\n            <Field\n              name=\"password\"\n              component={ReanderField}\n              type=\"password\"\n              label=\"Password\"\n              placeholder=\"Masukan Password\"\n            />\n          </div>\n          <div className=\"col-lg-4\">\n            <label> &nbsp; </label>\n            <button\n              type=\"submit\"\n              name=\"type_btn\"\n              className=\"btn btn-primary btn-block\"\n              disabled={this.props.isLoadingOtorisasi}\n            >\n              {this.props.isLoadingOtorisasi ? (\n                <>\n                  <i className=\"fas fa-spinner fa-spin\"></i> &nbsp; Simpan\n                </>\n              ) : (\n                \"Simpan\"\n              )}\n            </button>\n          </div>\n        </div>\n        {this.props.isLoadingOtorisasi ? (\n        <Loading \n        loading\n        background=\"rgba(0, 0, 0, 0.35)\"\n         loaderColor=\"rgba(94, 147, 117, 1)\" />\n      ) : null}\n      </form>\n    );\n  }\n}\n\nOtorisasiBatalJual = reduxForm({\n  form: \"OtorisasiBatalJual\",\n  enableReinitialize: true,\n})(OtorisasiBatalJual);\nexport default connect(null)(OtorisasiBatalJual);\n","import React from \"react\";\nimport { connect } from \"react-redux\";\nimport { Link } from \"react-router-dom\";\nimport { reset } from \"redux-form\";\n// import { reset } from \"redux-form\";\nimport { hideModal, showModal } from \"../../../actions/datamaster_action.jsx\";\nimport {\n  setBatalPenjualan,\n  setNoFakturPenjualan,\n} from \"../../../actions/penjualan_action.jsx\";\n// import { setBatalPenjualan, setNoFakturPenjualan } from \"../../../actions/penjualan_action.jsx\";\nimport ModalGlobal from \"../../../components/helpers/ModalGlobal.jsx\";\nimport { ToastNotification } from \"../../../components/helpers/notification.jsx\";\n// import { ToastNotification } from \"../../../components/helpers/notification.jsx\";\n// import { ToastNotification } from \"../../../components/helpers/notification.jsx\";\nimport { Panel, PanelHeader } from \"../../../components/panel/panel.jsx\";\nimport { postData } from \"../../../config/axios.jsx\";\n// import { postData } from \"../../../config/axios.jsx\";\nimport HeadBatalPenjualan from \"./HeadBatalPenjualan.jsx\";\nimport OtorisasiBatalJual from \"./OtorisasiBatalJual.jsx\";\n\nconst maptostate = (state) => {\n  return {\n    // no_faktur: state.penjualan.setNoFakturPenjualan,\n    setBatalPenjualan: state.penjualan.setBatalPenjualan,\n  };\n};\nclass FormBatalPenjualan extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoading: false,\n      databarang: [],\n      isLoadingOtorisasi: false,\n      columns: [\n        {\n          dataField: \"kode_barcode\",\n          text: \"Kode Barcode\",\n          footerAttrs: {\n            colSpan: \"1\",\n          },\n          footer: \"Total Barang \",\n        },\n        {\n          dataField: \"nama_barang\",\n          text: \"Nama Barang\",\n          footer: (columnData) => parseInt(this.props.setBatalPenjualan.length),\n        },\n\n        {\n          dataField: \"berat\",\n          text: \"Berat\",\n          formatter: (cell) => {\n            return <span>{parseInt(cell).toFixed(1)}</span>;\n          },\n          footer: (columnData) =>\n            parseInt(columnData.reduce((acc, item) => acc + item, 0)).toFixed(\n              1\n            ),\n        },\n        // {\n        //   dataField: \"nama_atribut\",\n        //   text: \"Nama Atribut\",\n        // },\n        // {\n        //   dataField: \"harga_atribut\",\n        //   text: \"Harga Atribut\",\n        //   formatter: (cell) => {\n        //     return <span>{parseInt(cell).toLocaleString(\"ID-id\")}</span>;\n        //   },\n        //   footer: (columnData) =>\n        //     parseInt(\n        //       columnData.reduce((acc, item) => acc + item, 0)\n        //     ).toLocaleString(\"id-ID\"),\n        // },\n\n        // {\n        //   dataField: \"berat_atribut\",\n        //   text: \"Berat Atribut\",\n        //   formatter: (cell) => {\n        //     return <span>{parseInt(cell).toFixed(1)}</span>;\n        //   },\n        //   footer: (columnData) =>\n        //     parseInt(columnData.reduce((acc, item) => acc + item, 0)).toFixed(\n        //       1\n        //     ),\n        // },\n\n        {\n          dataField: \"harga_jual\",\n          text: \"Harga Jual\",\n          formatter: (cell) => {\n            return <span>{parseInt(cell).toLocaleString(\"ID-id\")}</span>;\n          },\n          footer: (columnData) =>\n            parseInt(\n              columnData.reduce((acc, item) => acc + item, 0)\n            ).toLocaleString(\"id-ID\"),\n        },\n        {\n          dataField: \"harga_total\",\n          text: \"Harga Total\",\n          formatter: (cell) => {\n            return <span>{parseInt(cell).toLocaleString(\"ID-id\")}</span>;\n          },\n          footer: (columnData) =>\n            parseInt(\n              columnData.reduce((acc, item) => acc + item, 0)\n            ).toLocaleString(\"id-ID\"),\n        },\n      ],\n    };\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  handleSubmit(data) {\n    let hasil = {\n      no_faktur_group: data.no_faktur,\n      alasan: data.alasan,\n    };\n    localStorage.setItem(\"no_faktur_batal_jual\", JSON.stringify(hasil));\n    this.props.dispatch(showModal());\n  }\n  simpanTransaksiJual(data) {\n    this.setState({\n      isLoadingOtorisasi: true,\n    });\n    let data_batal_penjualan = JSON.parse(\n      localStorage.getItem(\"no_faktur_batal_jual\")\n    );\n\n    let hasil_btl_penjualan = {\n      no_faktur_group: data_batal_penjualan.no_faktur_group,\n    };\n    let hasil = {\n      user_id: data.username,\n      password: data.password,\n    };\n    postData(\"users/login\", hasil)\n      .then((resposn) => {\n        ToastNotification(\"success\", \"Otorisasi Berhasil\");\n        this.setState({\n          isLoadingOtorisasi: true,\n        });\n        postData(\"batalpenjualan/simpan\", hasil_btl_penjualan)\n          .then((res) => {\n            this.setState({ isLoadingOtorisasi: false });\n            this.props.dispatch(setBatalPenjualan([]));\n            this.props.dispatch(setNoFakturPenjualan([]));\n            ToastNotification(\"success\", res.data.message);\n          })\n          .then(() => {\n            this.props.dispatch(reset(\"HeadBatalPenjualan\"));\n            this.props.dispatch(reset(\"OtorisasiBatalJual\"));\n            this.props.dispatch(hideModal());\n          })\n          .catch((err) => {\n            this.setState({ isLoadingOtorisasi: false });\n            // console.log(err);\n            ToastNotification(\"info\", \"Error menyimpan data, Silahkan Cek tanggal transaksi dan koneksi anda\");\n          });\n      })\n      .catch((err) => {\n        ToastNotification(\"info\", \"Username atau Password Salah\");\n        this.setState({\n          isLoadingOtorisasi: false,\n        });\n      });\n  }\n  render() {\n    return (\n      <div>\n        <ol className=\"breadcrumb float-xl-right\">\n          <li className=\"breadcrumb-item\">\n            <Link to=\"#\">Penjualan</Link>\n          </li>\n          <li className=\"breadcrumb-item active\">Batal Penjualan</li>\n        </ol>\n        <h1 className=\"page-header\">Batal Penjualan </h1>\n        <Panel>\n          <PanelHeader>Batal Penjualan</PanelHeader>\n          <br />\n          <div className=\"container\">\n            <HeadBatalPenjualan\n              isLoading={this.state.isLoading}\n              onSubmit={(data) => this.handleSubmit(data)}\n              data={this.state.databarang}\n              columns={this.state.columns}\n            />\n          </div>\n          <br />\n          <ModalGlobal\n            size=\"L\"\n            title=\"Otorisasi Pembatalan\"\n            content={\n              <OtorisasiBatalJual\n                isLoadingOtorisasi={this.state.isLoadingOtorisasi}\n                onSubmit={(data) => this.simpanTransaksiJual(data)}\n              />\n            }\n          />\n        </Panel>\n      </div>\n    );\n  }\n}\n\nexport default connect(maptostate, null)(FormBatalPenjualan);\n","const ValidasiBaralJual = (value) => {\n    const errors = {};\n    if (!value.kode_barcode) {\n        errors.kode_barcode = \"Kode Barcode Harus Diisi\";\n    }\n    if (!value.no_faktur) {\n        errors.no_faktur = \"No Faktur Harus Diisi\";\n    }\n    if (!value.alasan) {\n        errors.alasan = \"Alasan Harus Diisi\";\n    }\n    return errors;\n}\n\nexport default ValidasiBaralJual;\n\n\n"],"sourceRoot":""}