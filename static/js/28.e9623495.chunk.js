(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{1118:function(a,e,t){"use strict";t.r(e);var n=t(1),r=t(32),o=t(153),s=t.n(o),i=t(204),l=t(0),d=t.n(l),c=t(206),m=t.n(c),b=t(9),g=t(290),h=t(291),p=t(41),k=t(7),u=t(5),_=t(2),E=t(4),B=t(6),N=t(205),f=t.n(N),v=t(15),j=t.n(v);const O=Object(p.createNumberMask)({prefix:"Rp. ",locale:"kr-KO"});class w extends l.Component{constructor(a){var e;super(a),e=this,this.tgl_awalChange=(a=>{this.setState({tgl_awal:a})}),this.tgl_akhirChange=(a=>{this.setState({tgl_akhir:a})}),this.getValue=function(){var a=Object(i.a)(s.a.mark(function a(t){var n,o;return s.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return n=t.target.files[0],a.next=3,Object(_.b)(n);case 3:o=a.sent,e.props.dispatch(Object(r.s)(o)),e.props.change("foto",o);case 6:case"end":return a.stop()}},a)}));return function(e){return a.apply(this,arguments)}}(),this.state={visible:!0,ModalWebCam:!1,isLoadingBaki:!1,isLoadingJenis:!1,tgl_awal:new Date,tgl_akhir:new Date,databaki:[],DataGroup:[],DataJenis:[],loadimage:f.a}}showModalWebcam(){this.props.dispatch(Object(r.s)(!1)),this.props.dispatch(Object(k.xb)()),this.setState({ModalWebCam:!0})}handleTakePhoto(a){this.props.dispatch(Object(r.s)(a)),this.props.change("foto",a)}componentDidMount(){Object(B.c)("group/get/all").then(a=>{this.setState({DataGroup:a.data})}).catch(a=>{console.log(a)})}getJenis(a){this.setState({isLoadingJenis:!0}),Object(B.c)("jenis/get/by-kode-kategori/"+a).then(a=>{this.setState({DataJenis:a.data})}).then(a=>{this.setState({isLoadingJenis:!1})}).catch(a=>{Object(E.b)(a.data),console.log(a)})}getBaki(a){this.setState({isLoadingBaki:!0}),Object(B.c)("baki/get/by-kode-baki/"+a).then(a=>{this.setState({databaki:""===a.data?[]:[a.data]})}).then(a=>{this.setState({isLoadingBaki:!1})}).catch(a=>{Object(E.b)(a.data),console.log(a)})}loadcamera(){return d.a.createElement(m.a,{onTakePhoto:a=>{this.handleTakePhoto(a)}})}render(){return d.a.createElement(d.a.Fragment,null,d.a.createElement("form",{onSubmit:this.props.handleSubmit,autoComplete:"off"},d.a.createElement("div",{className:"row"},d.a.createElement("div",{className:"col-lg-8"},d.a.createElement("div",{className:"row"},d.a.createElement("div",{className:"col-lg-6"},d.a.createElement(g.a,{readOnly:!0,name:"foto",type:"hidden",component:u.b}),d.a.createElement(g.a,{readOnly:!0,name:"kode_barcode",component:u.e,label:"Kode Barcode",placeholder:"Masukan Kode Barcode"})),d.a.createElement("div",{className:"col-lg-6"},d.a.createElement(g.a,{name:"nama_barang",component:u.e,label:"Nama Barang",placeholder:"Masukan Nama Barang"}))),d.a.createElement("div",{className:"row"},d.a.createElement("div",{className:"col-lg-8"},d.a.createElement(g.a,{name:"nama_atribut",component:u.e,label:"Nama Atribut",placeholder:"Masukan Nama Atribut"})),d.a.createElement("div",{className:"col-lg-4"},d.a.createElement(g.a,Object.assign({name:"harga_atribut",component:u.e,label:"Harga Atribut"},O,{placeholder:"Masukan Harga Atribut"})))),d.a.createElement("div",{className:"row"},d.a.createElement("div",{className:"col-lg-6"},d.a.createElement(g.a,{name:"kadar",component:u.e,label:"Kadar",placeholder:"Masukan Kadar"})),d.a.createElement("div",{className:"col-lg-6"},d.a.createElement(g.a,{name:"kadar_cetak",component:u.e,label:"Kadar Cetak",placeholder:"Masukan Kadar Cetak"})),d.a.createElement("div",{className:"col-lg-6"},d.a.createElement(g.a,{name:"kode_intern",component:u.e,label:"Kode Intern",placeholder:"Masukan Kode Intern"})),d.a.createElement("div",{className:"col-lg-6"},d.a.createElement("div",{className:"form-group"},d.a.createElement("label",null," \xa0 "),!0===this.props.isLoading?d.a.createElement(_.d,{className:"btn btn-block btn-primary",text:"Sedang Menyimpan Data"}):d.a.createElement(d.a.Fragment,null,d.a.createElement("button",{type:"submit",className:"btn btn-block btn-primary"},"Simpan Barang")))))),d.a.createElement("div",{className:"col-lg-4"},d.a.createElement("div",{className:"row"},d.a.createElement("div",{className:"col-lg-4"},!0===this.state.ModalWebCam&&!1===this.props.setCamera?d.a.createElement("div",{className:"container"},this.loadcamera()):d.a.createElement(d.a.Fragment,null,d.a.createElement("img",{src:void 0===this.props.foto?!1===this.props.setCamera?f.a:this.props.setCamera:this.props.setCamera?this.props.setCamera:this.props.foto,alt:"img",height:"245px",width:"355px"})))),d.a.createElement("div",{className:"row mt-2"},d.a.createElement("div",{className:"col-lg-12 mb-8"},d.a.createElement("div",{className:"row"},d.a.createElement("div",{className:"col-8"},d.a.createElement("div",{className:"input-group"},d.a.createElement("div",{className:"custom-file"},d.a.createElement("input",{type:"file",name:"photo",autoComplete:"off",className:"custom-file-input",id:"exampleInputFile",onChange:a=>this.getValue(a)}),d.a.createElement("label",{className:"custom-file-label",htmlFor:"exampleInputFile"},"Pilih gambar")))),d.a.createElement("div",{className:"col-4"},d.a.createElement("button",{className:"btn btn-block btn-primary",type:"button",onClick:()=>this.showModalWebcam()}," ","WebCam"," "))))))),this.props.isLoading?d.a.createElement(j.a,{loading:!0,background:"rgba(0, 0, 0, 0.35)",loaderColor:"rgba(94, 147, 117, 1)"}):null))}}w=Object(h.a)({form:"HeadEditDataBarang",enableReinitialize:!0})(w);var S=Object(b.b)(a=>({initialValues:{foto:a.databarang.showEditBarang.foto,kode_barcode:a.databarang.showEditBarang.kode_barcode,nama_barang:a.databarang.showEditBarang.nama_barang,nama_atribut:a.databarang.showEditBarang.nama_atribut,harga_atribut:a.databarang.showEditBarang.harga_atribut,kode_intern:a.databarang.showEditBarang.kode_intern,kadar:a.databarang.showEditBarang.kadar,kadar_cetak:a.databarang.showEditBarang.kadar_cetak},foto:a.databarang.showEditBarang.foto,setCamera:a.databarang.setCamera,hideModal:a.datamaster.modalDialog}))(w);var C=a=>{const e={};return a.kode_kategori||(e.kode_kategori="Kategori Tidak Boleh Kosong"),a.kode_jenis||(e.kode_jenis="Jenis Tidak Boleh Kosong"),a.kode_lokasi_toko||(e.kode_lokasi_toko="Kode Lokasi Tidak Boleh Kosong"),a.nama_barang||(e.nama_barang="Nama Barang Tidak Boleh Kosong"),a.berat||(e.berat="Berat Tidak Boleh Kosong"),a.berat_asli||(e.berat_asli="Berat Asli Tidak Boleh Kosong"),a.kadar||(e.kadar="Kadar Tidak Boleh Kosong"),a.kadar_cetak||(e.kadar_cetak="Kadar Cetak Tidak Boleh Kosong"),a.kadar_modal||(e.kadar_modal="Kadar Modal Tidak Boleh Kosong"),a.berat_bandrol||(e.berat_bandrol="Berat Bandrol Tidak Boleh Kosong"),e},y=t(47),D=t(1095).a.initializeApp({apiKey:"AIzaSyBwsVXuhzcicvQBFnB-YnM8nvSFXMmNX38",authDomain:"timbangan-9de36.firebaseapp.com",databaseURL:"https://timbangan-9de36-default-rtdb.firebaseio.com",projectId:"timbangan-9de36",storageBucket:"timbangan-9de36.appspot.com",messagingSenderId:"675481990851",appId:"1:675481990851:web:564d5a40fa74eb9d455476",measurementId:"G-JKPSLEYMX4"});const x=a=>{console.log("HELLO FIREBASE"),D.database().ref("kotaMas/timbangan1").on("value",e=>{let t=e.val();a("berat_asli",t.berat),console.log(t.berat)})},M=Object(n.v)({prefix:"Rp. ",locale:"id-ID"});class K extends n.b{constructor(a){var e;super(a),e=this,this.tgl_awalChange=(a=>{this.setState({tgl_awal:a})}),this.tgl_akhirChange=(a=>{this.setState({tgl_akhir:a})}),this.getValue=function(){var a=Object(i.a)(s.a.mark(function a(t){var n,o;return s.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,document.getElementById("kode_intern").focus(),n=t.target.files[0],a.next=5,Object(_.o)(n);case 5:o=a.sent,e.props.dispatch(Object(r.s)(o)),e.props.change("foto",o),a.next=12;break;case 10:a.prev=10,a.t0=a.catch(0);case 12:case"end":return a.stop()}},a,null,[[0,10]])}));return function(e){return a.apply(this,arguments)}}(),this.state={visible:!0,ModalWebCam:!1,isLoadingBaki:!1,isLoadingJenis:!1,kategori_harga:!0,tgl_awal:new Date,tgl_akhir:new Date,databaki:[],DataGroup:[],DataJenis:[],loadimage:n.D}}showModalWebcam(){this.props.dispatch(Object(r.s)(!1)),this.props.dispatch(Object(n.L)()),this.setState({ModalWebCam:!0})}handleTakePhoto(a){var e=this;return Object(i.a)(s.a.mark(function t(){var n,o;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,document.getElementById("kode_intern").focus(),n=Object(_.c)(a),t.next=5,Object(_.o)(n);case 5:o=t.sent,e.props.dispatch(Object(r.s)(o)),e.props.change("foto",o),t.next=12;break;case 10:t.prev=10,t.t0=t.catch(0);case 12:case"end":return t.stop()}},t,null,[[0,10]])}))()}componentDidMount(){console.log("HELLO"),x(this.props.change),this.props.dispatch(Object(r.s)(!1)),this.props.change("foto","");let a=this.props.DataBarang.kode_lokasi_toko.split("~");this.props.change("kode_kategori",this.props.DataBarang.kode_kategori),this.props.change("kode_jenis",this.props.DataBarang.kode_jenis),this.props.change("kode_lokasi_toko",a[0]),this.props.change("kode_gudang",a[1]),this.props.change("kode_intern",this.props.DataBarang.kode_intern),this.props.change("kode_barcode",this.props.DataBarang.kode_barcode),this.props.change("nama_barang",this.props.DataBarang.nama_barang),this.props.change("kadar",this.props.DataBarang.kadar),this.props.change("kadar_cetak",this.props.DataBarang.kadar_cetak),this.props.change("kadar_modal",this.props.DataBarang.kadar_modal),this.props.change("nama_atribut",this.props.DataBarang.nama_atribut),this.props.change("berat_atribut",this.props.DataBarang.berat_atribut),this.props.change("berat_bandrol",this.props.DataBarang.berat_bandrol),this.props.change("harga_atribut",this.props.DataBarang.harga_atribut),this.props.change("foto",this.props.DataBarang.foto),this.props.change("tag_id",this.props.DataBarang.tag_id||"-"),setTimeout(()=>{Object(n.y)("parabandrol/get/all").then(a=>{this.props.change("berat_bandrol",a.data[0].berat_bandrol)}),document.getElementById("kode_intern").focus()},100),Object(B.d)("para-system/key/kategori_harga").then(a=>{"harga_100%"===a.data.value?this.setState({kategori_harga:!0}):this.setState({kategori_harga:!1}),this.props.change("kadar",this.state.kategori_harga?0:100)})}getJenis(a){this.setState({isLoadingJenis:!0}),Object(n.y)("jenis/get/by-kode-kategori/"+a).then(a=>{this.setState({DataJenis:a.data})}).then(a=>{this.setState({isLoadingJenis:!1})}).catch(a=>{Object(n.s)("info",a.data),console.log(a)})}getBaki(a){this.setState({isLoadingBaki:!0}),Object(n.y)("baki/get/by-kode-baki/"+a).then(a=>{this.setState({databaki:""===a.data?[]:[a.data]})}).then(a=>{this.setState({isLoadingBaki:!1})}).catch(a=>{Object(n.s)("info",a.data),console.log(a)})}loadcamera(){return n.m.createElement(n.a,{onTakePhoto:a=>{this.handleTakePhoto(a)}})}render(){return n.m.createElement(n.m.Fragment,null,n.m.createElement("form",{onSubmit:this.props.handleSubmit,autoComplete:"off"},n.m.createElement("div",{className:"row"},n.m.createElement("div",{className:"col-lg-12 text-center"},!0===this.state.ModalWebCam&&!1===this.props.setCamera?n.m.createElement("div",{className:"container"},this.loadcamera()):n.m.createElement(n.m.Fragment,null,n.m.createElement("img",{src:void 0===this.props.foto?!1===this.props.setCamera?n.D:this.props.setCamera:this.props.setCamera?this.props.setCamera:this.props.foto,alt:"img",height:"245px",width:"355px"})))),n.m.createElement("br",null),n.m.createElement("div",{className:"row"},n.m.createElement("div",{className:"col-2"}," "),n.m.createElement("div",{className:"col-5"},n.m.createElement("div",{className:"input-group"},n.m.createElement("div",{className:"custom-file"},n.m.createElement("input",{tabIndex:"1",type:"file",name:"photo",autoComplete:"off",className:"custom-file-input",id:"exampleInputFile",onChange:a=>this.getValue(a)}),n.m.createElement("label",{className:"custom-file-label",htmlFor:"exampleInputFile"},"Pilih gambar")))),n.m.createElement("div",{className:"col-3"},n.m.createElement("button",{tabIndex:"2",className:"btn btn-block btn-primary",type:"button",onClick:()=>this.showModalWebcam()}," ","WebCam"," ")),n.m.createElement("hr",null)),n.m.createElement("hr",null),n.m.createElement("div",{className:"row"},n.m.createElement("div",{className:"col-lg-4"},n.m.createElement(n.c,{readOnly:!0,name:"kode_kategori",component:n.o,label:"Kategori",placeholder:"Masukan Kategori",onFocus:a=>a.target.select(),onClick:a=>a.target.select()})),n.m.createElement("div",{className:"col-lg-4"},n.m.createElement(n.c,{readOnly:!0,name:"kode_jenis",component:n.o,label:"Jenis",placeholder:"Masukan Jenis",onFocus:a=>a.target.select(),onClick:a=>a.target.select()})),n.m.createElement("div",{className:"col-lg-4"},n.m.createElement(n.c,{readOnly:!0,name:"kode_lokasi_toko",component:n.o,label:"Kode Lokasi Toko",placeholder:"Masukan Lokasi",onFocus:a=>a.target.select(),onClick:a=>a.target.select()}))),n.m.createElement("hr",null),n.m.createElement("div",{className:"row"},n.m.createElement("div",{className:"col-6"},n.m.createElement(n.c,{readOnly:!0,name:"kode_gudang",type:"hidden",component:n.e}),n.m.createElement(n.c,{readOnly:!0,name:"foto",type:"hidden",component:n.e}),n.m.createElement(n.c,{readOnly:!0,name:"kode_barcode",type:"hidden",component:n.e}),n.m.createElement(n.c,{id:"kode_intern",tabIndex:"3",name:"kode_intern",component:n.o,label:"Kode Intern",placeholder:"Masukan Kode Intern",onFocus:a=>a.target.select(),onClick:a=>a.target.select()})),n.m.createElement("div",{className:"PESANAN"===this.props.status?"col-6":"col-6 d-none"},n.m.createElement(n.c,{id:"no_pesanan",tabIndex:"3",name:"no_pesanan",component:n.o,readOnly:!0,label:"No Pesanan",placeholder:"Masukan No Pesanan",onFocus:a=>a.target.select(),onClick:a=>a.target.select()})),n.m.createElement("div",{className:"col-12"},n.m.createElement(n.c,{tabIndex:"4",name:"nama_barang",component:n.o,label:"Nama Barang",placeholder:"Masukan Nama Barang",onFocus:a=>a.target.select(),onClick:a=>a.target.select()})),n.m.createElement("div",{className:"col-lg-6"},n.m.createElement(n.c,{tabIndex:"5",type:"text",name:"berat_asli",component:n.o,readOnly:"PESANAN"===this.props.status,label:"PESANAN"===this.props.status?"Berat Awal":"Berat Asli",normalize:n.d,placeholder:"PESANAN"===this.props.status?"Masukan Berat Awal":"Masukan Berat Asli",onFocus:a=>a.target.select(),onClick:a=>a.target.select()})),n.m.createElement("div",{className:"col-lg-6"},n.m.createElement(n.c,{tabIndex:"6",type:"text",name:"berat",component:n.o,label:"Berat",normalize:n.d,placeholder:"Masukan Berat",onFocus:a=>a.target.select(),onClick:a=>a.target.select()})),n.m.createElement("div",{className:this.state.kategori_harga?"col-lg-6":"col-lg-6 d-none"},n.m.createElement(n.c,{tabIndex:"7",type:"text",name:"kadar",component:n.o,label:"Kadar",normalize:y.b,placeholder:"Masukan Kadar",onFocus:a=>a.target.select(),onClick:a=>a.target.select()})),n.m.createElement("div",{className:"col-lg-6"},n.m.createElement(n.c,{tabIndex:"8",type:"text",name:"kadar_cetak",component:n.o,label:"Kadar Cetak",normalize:y.b,placeholder:"Masukan Kadar Cetak",onFocus:a=>a.target.select(),onClick:a=>a.target.select()})),n.m.createElement("div",{className:"col-lg-6"},n.m.createElement(n.c,{tabIndex:"9",type:"text",name:"kadar_modal",normalize:y.b,component:n.o,label:"Kadar Modal",placeholder:"Masukan Kadar Modal",onFocus:a=>a.target.select(),onClick:a=>a.target.select()}))),n.m.createElement("hr",null),n.m.createElement("div",{className:"row"},n.m.createElement("div",{className:"col-12"},n.m.createElement(n.c,{id:"nama_atribut",tabIndex:"10",type:"text",name:"nama_atribut",component:n.o,label:"Nama Atribut",placeholder:"Masukan Nama Atribut",onFocus:a=>a.target.select(),onClick:a=>a.target.select()})),n.m.createElement("div",{className:"col-lg-6"},n.m.createElement(n.c,{tabIndex:"11",type:"text",name:"berat_atribut",component:n.o,label:"Berat Atribut",normalize:n.d,placeholder:"Masukan Berat Atribut",onFocus:a=>a.target.select(),onClick:a=>a.target.select()})),n.m.createElement("div",{className:"col-lg-6"},n.m.createElement(n.c,Object.assign({tabIndex:"12",name:"harga_atribut",component:n.o,label:"Harga Atribut"},M,{placeholder:"Masukan Harga Atribut",onFocus:a=>a.target.select(),onClick:a=>a.target.select()})))),n.m.createElement("hr",null),n.m.createElement("div",{className:"row"},n.m.createElement("div",{className:"col-lg-6 d-none"},n.m.createElement(n.c,{tabIndex:"13",name:"tag_id",component:n.e,type:"hidden",label:"Tag Id",placeholder:"Masukan Tag Id"})),n.m.createElement("div",{className:"col-lg-6 d-none"},n.m.createElement(n.c,{tabIndex:"14",type:"text",name:"berat_bandrol",component:n.o,label:"Berat Bandrol",normalize:n.d,placeholder:"Masukan Berat Bandrol",onFocus:a=>a.target.select(),onClick:a=>a.target.select()}))),n.m.createElement("hr",null),n.m.createElement("div",{className:"row"},n.m.createElement("div",{className:"col-6"}),n.m.createElement("div",{className:"col-lg-6 text-right"},n.m.createElement("button",{onClick:()=>this.props.dispatch(Object(n.C)()),type:"button",className:"btn btn-secondary"},"Batal"),"\xa0",n.m.createElement("button",{tabIndex:"15",disabled:this.props.isLoading,type:"submit",className:"btn btn-success"},this.props.isLoading?n.m.createElement(n.m.Fragment,null,n.m.createElement("i",{className:"fas fa-spinner fa-spin"})," \xa0 Sedang Menyimpan"):"Simpan"))),this.props.isLoading?n.m.createElement(j.a,{loading:!0,background:"rgba(0, 0, 0, 0.35)",loaderColor:"rgba(94, 147, 117, 1)"}):null))}}K=Object(n.I)({form:"FormTambahBarang",enableReinitialize:!0,validate:C})(K);var L=Object(n.t)(a=>{let e=a.databarang.showEditBarang.kode_lokasi_toko.split("~");return{DataBarang:a.databarang.showEditBarang,status:a.databarang.showEditBarang.status,initialValues:{kode_kategori:a.databarang.showEditBarang.kode_kategori,kode_jenis:a.databarang.showEditBarang.kode_jenis,kode_lokasi_toko:e[0],kode_gudang:e[1],kode_intern:a.databarang.showEditBarang.kode_intern,kode_barcode:a.databarang.showEditBarang.kode_barcode,nama_barang:a.databarang.showEditBarang.nama_barang,kadar:a.databarang.showEditBarang.kadar,kadar_cetak:a.databarang.showEditBarang.kadar_cetak,kadar_modal:a.databarang.showEditBarang.kadar_modal,nama_atribut:a.databarang.showEditBarang.nama_atribut,berat_atribut:a.databarang.showEditBarang.berat_atribut,harga_atribut:a.databarang.showEditBarang.harga_atribut,tag_id:a.databarang.showEditBarang.tag_id||"-",berat_asli:"PESANAN"===a.databarang.showEditBarang.status?a.databarang.showEditBarang.berat_asli:"",berat_bandrol:a.databarang.showEditBarang.berat_bandrol,foto:a.databarang.showEditBarang.foto,no_pesanan:void 0===a.databarang.showEditBarang.no_pesanan?"":a.databarang.showEditBarang.no_pesanan.trim()},foto:a.databarang.showEditBarang.foto,setCamera:a.databarang.setCamera,hideModal:a.datamaster.modalDialog}})(K);class P extends n.b{constructor(a){super(a),this.state={date:new Date,kondisi_barang:"kosong",databaki:[],ambilpesanan:!0}}componentDidMount(){this.props.dispatch(Object(k.t)()),this.props.dispatch(Object(k.lb)()),Object(B.c)("baki/ready").then(a=>{this.setState({databaki:a.data})})}kodeJenis(a){Object(n.K)("kode_jenis",a)}kodeLokasiToko(a){this.setState({ambilpesanan:!1}),Object(n.K)("kode_lokasi_toko",a)}kodeGroup(a){Object(n.K)("kode_group",a),this.setState({kode_group:a})}render(){return n.m.createElement("div",null,n.m.createElement("form",{onSubmit:this.props.handleSubmit,autoComplete:"off",onKeyPress:a=>{"Enter"===a.key&&a.preventDefault()}},n.m.createElement("div",{className:"row"},n.m.createElement("div",{className:"col-lg-2"},n.m.createElement(n.c,{id:"kode_kategori",label:"Kode Group",name:"kode_kategori",component:n.p,onChange:a=>this.kodeGroup(a),options:this.props.DataGroup.filter(a=>void 0!==a.kode_group).map(a=>{return{value:a.kode_group,name:a.kode_group}}),placeholder:"Silahkan Pilih Kode Group"})),n.m.createElement("div",{className:"col-lg-2"},n.m.createElement(n.c,{id:"kode_jenis",name:"kode_jenis",component:n.p,onChange:a=>this.kodeJenis(a),options:this.props.DataJenis.filter(a=>a.kode_group===this.state.kode_group).map(a=>{return{value:a.kode_dept,name:a.kode_dept}}),label:"Kode Jenis",placeholder:"Silahkan Pilih Kode Jenis"})),n.m.createElement("div",{className:"col-lg-2"},n.m.createElement(n.c,{id:"kode_lokasi_toko",name:"kode_lokasi_toko",component:n.p,onChange:a=>this.kodeLokasiToko(a),options:this.state.databaki.filter(a=>void 0!==a.kode_baki).map(a=>{return{value:a.kode_baki+"~"+a.kode_gudang,name:a.kode_baki}}),label:"Kode Baki",placeholder:"Silahkan Pilih Kode Lokasi"})),n.m.createElement("div",{className:"col-lg-1"},n.m.createElement("label",null,"\xa0"),n.m.createElement("br",null),n.m.createElement("button",{type:"submit",className:"btn btn-block btn-primary "}," ",n.m.createElement("i",{className:"fa fa-plus"})," ")),n.m.createElement("div",{className:"col-lg-3 text-left"},n.m.createElement("label",null,"\xa0"),n.m.createElement("br",null),n.m.createElement("button",{disabled:this.state.ambilpesanan,className:"btn btn-primary",onClick:this.props.barangPesanan,type:"button"},"Barang Pesanan"))),this.props.isLoading?n.m.createElement(j.a,{loading:!0,background:"rgba(0, 0, 0, 0.35)",loaderColor:"rgba(94, 147, 117, 1)"}):null))}}P=Object(n.I)({form:"FIlterPencarianBarang",enableReinitialize:!0,validate:C})(P);var F=Object(n.t)(a=>({DataGroup:a.datamaster.GetDataGroup,DataJenis:a.datamaster.getDataJenis}))(P);class T extends l.Component{constructor(a){super(a),this.state={}}componentDidMount(){setTimeout(()=>{document.getElementById("nomor_pesanan").focus()},100)}render(){return d.a.createElement(d.a.Fragment,null,d.a.createElement("label",{htmlFor:""},"Masukan Nomor Pesanan"),d.a.createElement("div",{className:"input-group mb-3"},d.a.createElement("input",{type:"text",id:"nomor_pesanan",className:"form-control",placeholder:"Nomor Pesanan","aria-label":"Nomor Pesanan","aria-describedby":"basic-addon2"}),d.a.createElement("div",{className:"input-group-append"},d.a.createElement("button",{className:"btn btn-primary",type:"button",onClick:()=>this.props.getNomorPesanan(document.getElementById("nomor_pesanan"))},this.props.isLoadingPesanan?d.a.createElement(d.a.Fragment,null,d.a.createElement("i",{className:"fas fa-spinner fa-spin"})," \xa0 Search"):"Search"))))}}T=Object(h.a)({form:"ModalPesanan",enableReinitialize:!0})(T);var I=Object(b.b)(a=>({setCamera:a.databarang.setCamera,hideModal:a.datamaster.modalDialog}),null)(T);e.default=Object(n.t)()(class extends n.m.Component{constructor(a){super(a),this.showBarangPesanan=(()=>{this.setState({fromModalPesanan:!0,formTambahBarang:!1}),this.props.dispatch(Object(n.L)()),this.props.dispatch(Object(r.v)())}),this.state={isEdit:!1,modalDialog:!1,isLoading:!1,formEdit:!1,loadingData:!1,databarang:[],dataPesanan:[],formTambahBarang:!1,fromModalPesanan:!1,isLoadingPesanan:!1,noPesanan:"",columns:[{dataField:"kode_barcode",text:"Kode Barcode",sort:!0},{dataField:"kode_group",text:"Kode Group"},{dataField:"kode_toko",text:"Kode Baki"},{dataField:"kode_dept",text:"Kode Jenis"},{dataField:"nama_barang",text:"Nama Barang"},{dataField:"berat",text:"Berat"},{dataField:"action",text:"Action",csvExport:!1,headerClasses:"text-center",formatter:(a,e)=>n.m.createElement("div",{className:"row text-center"},n.m.createElement("div",{className:"col-12"},n.m.createElement("button",{type:"button",onClick:()=>this.showModalDuplikatBarang(e),className:"btn btn-primary mr-3"},n.m.createElement("i",{className:"fa fa-copy"}))))}]},this.handleSubmit=this.handleSubmit.bind(this),this.showModalTambahBarang=this.showModalTambahBarang.bind(this),this.tambahbarang=this.tambahbarang.bind(this)}componentDidMount(){}tambahbarang(a){this.setState({isLoading:!0});let e={id_barang_pesanan:"-",kode_group:a.kode_kategori,kode_dept:a.kode_jenis,kode_gudang:a.kode_gudang,kode_toko:a.kode_lokasi_toko,kode_intern:a.kode_intern||"-",nama_barang:a.nama_barang,berat:parseFloat(a.berat),berat_asli:parseFloat(a.berat_asli),kadar_modal:parseFloat(a.kadar_modal)||0,kadar:parseFloat(a.kadar),kadar_cetak:parseFloat(a.kadar_cetak),nama_atribut:a.nama_atribut||"-",berat_atribut:parseFloat(a.berat_atribut)||0,harga_atribut:parseInt(a.harga_atribut)||0,tag_id:"-",berat_bandrol:0,no_pesanan:a.no_pesanan||"-"};setTimeout(()=>{Object(B.f)("tambah-barang/create",e).then(e=>{let t={kode_barcode:e.data.kode_barcode,dataimage:a.foto};void 0===a.foto||Object(n.H)("imagebarang/add",t).then(a=>{console.log(a.data),Object(n.s)("success","Data Barang Berhasil Di Tambahkan")}).catch(a=>{console.log(void 0===a.response?"Terjadi Kesalahan Saat Mengirim Data":a.response.data)}),Object(B.c)("barang/get/by-kode-baki/"+a.kode_lokasi_toko).then(a=>{0===a.data.length?this.setState({databarang:[]}):this.setState({databarang:a.data}),this.setState({isLoading:!1})}).catch(a=>{this.setState({isLoading:!1,databarang:[]}),Object(n.s)("info","Kode Baki Yang Anda Dicari Tidak Ada")}),this.props.dispatch(Object(n.J)("FormTambahBarang")),D.database().ref("kotaMas/timbangan1/").set({berat:0,uid:"timbangan1"}).then(()=>console.log("Data set.")),this.props.dispatch(Object(n.C)()),Object(n.s)("success","Data Barang Berhasil Di Tambahkan")}).catch(a=>{this.setState({isLoading:!1}),Object(n.s)("info",a.response.data.message||"Gagal Tambah Barang Silahkan Coba Lagi")})},300)}showModalDuplikatBarang(a){Object(B.c)("imagebarang/get/by-kode-barcode/"+a.kode_barcode).then(e=>{let t={foto:e.data.dataimage,kode_barcode:a.kode_barcode,nama_barang:a.nama_barang,nama_atribut:a.nama_atribut||"-",harga_atribut:a.harga_atribut||0,kode_intern:a.kode_intern,kadar:a.kadar||0,kadar_cetak:a.kadar_cetak||0,kadar_modal:a.kadar_modal||0,kode_kategori:a.kode_group,kode_jenis:a.kode_dept,kode_lokasi_toko:a.kode_toko+"~"+a.kode_gudang,berat:a.berat,berat_asli:a.berat_asli,berat_atribut:a.berat_atribut||0,tag_id:a.tag_id,berat_bandrol:0};console.log(t),Object(n.K)("data_kategori_jenis",t),this.setState({formTambahBarang:!0}),this.props.dispatch(Object(n.L)()),this.props.dispatch(Object(r.u)(t))}).catch(e=>{let t={foto:"-",kode_barcode:a.kode_barcode,nama_barang:a.nama_barang,nama_atribut:a.nama_atribut||"-",harga_atribut:a.harga_atribut||0,kode_intern:a.kode_intern,kadar:a.kadar||0,kadar_cetak:a.kadar_cetak||0,kadar_modal:a.kadar_modal||0,kode_kategori:a.kode_group,kode_jenis:a.kode_dept,kode_lokasi_toko:a.kode_toko+"~"+a.kode_gudang,berat:a.berat,berat_asli:a.berat_asli,berat_atribut:a.berat_atribut||0,tag_id:a.tag_id,berat_bandrol:0};Object(n.K)("data_kategori_jenis",t),this.setState({formTambahBarang:!0}),this.props.dispatch(Object(n.L)()),this.props.dispatch(Object(r.u)(t))})}showModalTambahBarang(a){Object(n.K)("data_kategori_jenis",a),this.setState({formTambahBarang:!0}),this.props.dispatch(Object(n.L)()),this.props.dispatch(Object(r.u)(a))}getBarangPesanan(){Object(B.c)("pesanan/no/"+this.state.noPesanan).then(a=>console.log(a.data)).catch(a=>console.log(a))}handleSubmit(a){this.setState({isLoading:!0});let e={kode_barcode:a.kode_barcode,dataimage:a.foto},t={nama_barang:a.nama_barang,nama_atribut:a.nama_atribut,harga_atribut:a.harga_atribut,kode_intern:a.kode_intern,kadar:a.kadar,kadar_cetak:a.kadar_cetak};Object(n.H)("barang/edit/"+a.kode_barcode,t).then(()=>{this.props.dispatch(Object(n.C)())}).then(()=>{void 0===a.foto||Object(n.H)("imagebarang/add",e).then(a=>{}).catch(a=>{})}).then(()=>{this.setState({databarang:[]}),this.props.dispatch(Object(n.J)("HeadEditDataBarang")),this.props.dispatch(Object(r.s)(!1))}).then(()=>{Object(n.s)("success","Data Berhasil Disimpan")}).then(()=>{this.setState({isLoading:!1})}).catch(a=>{this.setState({isLoading:!1}),Object(n.s)("info","Barang Gagal Di Edit")})}getNomorPesanan(a){this.setState({isLoadingPesanan:!0}),Object(B.f)("pesanan/valid/no",{no_pesanan:a.value.trim()}).then(e=>{this.setState({isLoadingPesanan:!1});let t=Object(n.z)("kode_lokasi_toko"),o=Object(n.z)("kode_jenis"),s=Object(n.z)("kode_group"),i=[];e.data.detail_barang.forEach(e=>{"-"===e.kode_barcode?i={kode_barcode:e.kode_barcode,nama_atribut:e.attribut||"-",harga_atribut:e.harga_atribut||0,kode_intern:"-",kadar:e.perkiraan_kadar,nama_barang:e.keterangan,kadar_cetak:0,kadar_modal:e.kadar_modal||0,kode_kategori:s,kode_jenis:o,kode_lokasi_toko:t,berat:e.perkiraan_berat,berat_asli:e.perkiraan_berat||0,berat_atribut:e.berat_atribut||0,tag_id:e.tag_id||"-",berat_bandrol:0,no_pesanan:a.value,status:"PESANAN"}:Object(B.c)("imagebarang/get/by-kode-barcode/"+e.kode_barcode).then(n=>{this.setState({isLoadingPesanan:!1}),i={foto:n.data.dataimage||"",kode_barcode:e.kode_barcode,nama_atribut:e.attribut||"-",harga_atribut:e.harga_atribut||0,kode_intern:"-",kadar:e.perkiraan_kadar,nama_barang:e.keterangan,kadar_cetak:0,kadar_modal:e.kadar_modal||0,kode_kategori:s,kode_jenis:o,kode_lokasi_toko:t,berat:e.perkiraan_berat,berat_asli:e.perkiraan_berat||0,berat_atribut:e.berat_atribut||0,tag_id:e.tag_id||"-",berat_bandrol:0,no_pesanan:a.value,status:"PESANAN"}}).catch(n=>{this.setState({isLoadingPesanan:!1}),i={kode_barcode:e.kode_barcode,nama_atribut:e.attribut||"-",harga_atribut:e.harga_atribut||0,kode_intern:"-",kadar:e.perkiraan_kadar,kadar_cetak:0,kadar_modal:e.kadar_modal||0,kode_kategori:s,nama_barang:e.keterangan,kode_jenis:o,kode_lokasi_toko:t,berat:e.perkiraan_berat,berat_asli:e.perkiraan_berat||0,berat_atribut:e.berat_atribut||0,tag_id:e.tag_id||"-",berat_bandrol:0,no_pesanan:a.value,status:"PESANAN"}})}),this.props.dispatch(Object(n.L)()),this.props.dispatch(Object(r.u)(i)),this.setState({formTambahBarang:!0,fromModalPesanan:!1})}).catch(a=>{this.setState({isLoadingPesanan:!1}),Object(n.s)("info",void 0===a.response?"Terjadi Kesalahan Saat Request Data":a.response.data.message)})}render(){const a={renderer:a=>n.m.createElement("div",{className:"container"},n.m.createElement("div",{className:"row"},n.m.createElement("div",{className:"col-12"},"Nama Atribut : ",a.nama_atribut," ",n.m.createElement("br",null),"Betat Atribut : ",a.berat_atribut," ",n.m.createElement("br",null),"Harga Atribut : ",a.harga_atribut," ",n.m.createElement("br",null),"Kode Intern : ",a.kode_intern," ",n.m.createElement("br",null),"Kadar : ",a.kadar," ",n.m.createElement("br",null),"Kadar Cetak : ",a.kadar_cetak," ",n.m.createElement("br",null),"Kode Toko : ",a.kode_toko," ",n.m.createElement("br",null),"Kode Gudang : ",a.kode_gudang," ",n.m.createElement("br",null),"Stock : ",a.stock_on_hand," ",n.m.createElement("br",null)))),showExpandColumn:!0,expandByColumnOnly:!0};return n.m.createElement("div",null,n.m.createElement("ol",{className:"breadcrumb float-xl-right"},n.m.createElement("li",{className:"breadcrumb-item"},n.m.createElement(n.g,{to:"#"},"Barang")),n.m.createElement("li",{className:"breadcrumb-item active"},"Tambah Barang")),n.m.createElement("h1",{className:"page-header"},"Tambah Barang "),n.m.createElement(n.k,null,n.m.createElement(n.l,null,"Tambah Data Barang"),n.m.createElement("br",null),n.m.createElement("div",{className:"container"},n.m.createElement(F,{onSubmit:a=>this.showModalTambahBarang(a),barangPesanan:this.showBarangPesanan}))),n.m.createElement(n.k,null,n.m.createElement(n.l,null,"Data Barang"),n.m.createElement("br",null),n.m.createElement("div",{className:"container"},n.m.createElement(n.r,{keyField:"kode_barang",exportCsv:!0,data:this.state.databarang,columns:this.state.columns,empty:!0,textEmpty:this.state.loadingData?n.m.createElement(n.m.Fragment,null," ",n.m.createElement("i",{className:"fas fa-spinner fa-spin"})," \xa0 Sedang Mencari Data Barang"):"Data Barang Kosong",expandRow:a})),n.m.createElement("br",null),n.m.createElement(n.i,{size:"l",title:this.state.formTambahBarang?"Tambah Barang":this.state.fromModalPesanan?"Barang Pesanan":"Edit Barang",content:this.state.formTambahBarang?n.m.createElement(L,{isLoading:this.state.isLoading,onSubmit:a=>this.tambahbarang(a)}):this.state.fromModalPesanan?n.m.createElement(I,{isLoadingPesanan:this.state.isLoadingPesanan,getNomorPesanan:a=>this.getNomorPesanan(a),onSubmit:a=>this.handleSubmit(a)}):n.m.createElement(S,{isLoading:this.state.isLoading,onSubmit:a=>this.handleSubmit(a)})})))}})}}]);
//# sourceMappingURL=28.e9623495.chunk.js.map