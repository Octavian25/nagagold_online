(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{1117:function(a,e,t){"use strict";t.r(e);var n=t(1),r=t(32),s=t(7),o=t(57),l=t(93),i=t(0),m=t.n(i),c=t(9),p=t(291),d=t(2),h=t(4),b=t(18),g=t(6),u=t(290),_=t(5);var j=a=>{const e={};return a.filter||(e.filter="Filter Pencarian Tidak Boleh Kosong"),a.pencarian||(e.pencarian="Filter Pencarian Tidak Boleh Kosong"),e};const E=[{value:"NO_HP",name:"NO HP"},{value:"NAMA_CUSTOMER",name:"NAMA CUSTOMER"},{value:"NO_TITIP",name:"NO TITIPAN"}];class k extends i.Component{constructor(a){super(a),this.state={type_pembayaran:"CASH"}}change(){document.getElementById("pencarian").focus()}render(){return m.a.createElement(m.a.Fragment,null,m.a.createElement("form",{onSubmit:this.props.handleSubmit,onKeyPress:a=>{"Enter"===a.key&&a.preventDefault()},autoComplete:"off"},m.a.createElement("div",{className:"row"},m.a.createElement("div",{className:"col-4"},m.a.createElement(u.a,{name:"filter",label:"Filter",placeholder:"Pilih Filter",onChange:()=>this.change(),options:E,component:_.f})),m.a.createElement("div",{className:"col-4"},m.a.createElement(u.a,{id:"pencarian",name:"pencarian",label:"Pencarian",placeholder:"Masukan Pencarian",component:_.e})),m.a.createElement("div",{className:"col-4"},m.a.createElement("label",null,"\xa0"),m.a.createElement("button",{className:"btn btn-primary btn-block",disabled:this.props.isLoading,type:"submit"},this.props.isLoading?m.a.createElement(m.a.Fragment,null,m.a.createElement("i",{className:"fas fa-spinner fa-spin"})," \xa0 Sedang Mencari"):"Cari")))))}}k=Object(p.a)({form:"FilterTitipan",enableReinitialize:!0,validate:j})(k);var O=Object(c.b)(a=>{let e=Object(d.g)("filter_titipan")||[];return{initialValues:{filter:e.filter,pencarian:e.pencarian}}})(k);class y extends i.Component{constructor(a){super(a),this.state={isLoading:!1,type_pembayaran:"CASH",databarang:[],columns:[{dataField:"no_titip_group",text:"No Titip",footerAttrs:{colSpan:"7"},footer:"Total"},{dataField:"kode_group",text:"Kategori"},{dataField:"kode_dept",text:"Jenis"},{dataField:"kode_barcode",text:"Barcode"},{dataField:"kode_barang",text:"Kode Barang"},{dataField:"nama_barang",text:"Nama Barang"},{dataField:"no_hp",text:"No Hp"},{dataField:"total_dp",text:"Total Dp",formatter:a=>m.a.createElement("span",null,parseInt(a).toLocaleString("kr-KO")),footer:a=>parseInt(a.reduce((a,e)=>a+e,0)).toLocaleString("kr-KO")},{dataField:"action",text:"Action",csvExport:!1,headerClasses:"text-center",formatter:(a,e,t)=>m.a.createElement("div",{className:"row text-center"},m.a.createElement("div",{className:"col-12"},m.a.createElement("button",{type:"button",onClick:()=>this.pilihdata(e),className:"btn btn-danger mr-3"},"Pilih Barang"))),footer:""}]}}pilihdata(a){let e=Object(d.g)("data_customer_tmp");if(0!==e.length&&e.no_hp!==a.no_hp)return Object(h.e)("info","Customer Tidak Boleh Berbeda"),!1;let t=0===Object(d.l)("data_barang_penjualan_tmp").length?[]:JSON.parse(Object(d.l)("data_barang_penjualan_tmp"));if(-1!==t.findIndex(e=>e.kode_barcode===a.kode_barcode))return Object(h.e)("info","Barang Sudah Ada Di Tabel"),!1;{let e={no_titip_group:a.no_titip_group||"-",total_dp:a.total_dp||0,kode_barcode:a.kode_barcode||0,nama_barang:a.nama_barang||"-",nama_atribut:a.nama_atribut||"-",berat_jual:parseFloat(a.berat)||0,berat_atribut:parseFloat(a.berat_atribut)||0,harga_atribut:parseInt(a.harga_atribut)||0,harga_jual:parseInt(a.harga_jual)||0,harga_pergram:parseInt(a.harga_pergram)||0,ongkos:parseInt(a.ongkos)||0,total:parseInt(a.harga_total)||0,status_premi:a.premi?"PREMI":"NONPREMI",pembayaran:a.pembayaran};t.push(e),Object(d.m)("data_barang_penjualan_tmp",JSON.stringify(t)),this.props.dispatch(Object(o.l)(t));let n={alamat_customer:a.alamat_customer,jenis_pelanggan:"NONMEMBER"===a.kode_customer?"NONMEMBER":a.kode_customer,kode_customer:a.kode_customer,kode_sales:a.kode_sales,nama_customer:a.nama_customer,no_hp:a.no_hp};Object(d.m)("data_customer_tmp",JSON.stringify(n));let r=0;a.pembayaran.forEach(a=>{r+=a.jumlah_rp}),Object(d.p)("total_dp",r)}this.props.dispatch(Object(s.wb)())}filterPencarian(a){this.setState({isLoading:!0}),Object(g.d)("titip/valid/"+a.filter+"/"+a.pencarian).then(e=>{0===e.data.length&&Object(h.e)("info","Data Yang Anda Cari Tidak Ada"),this.setState({databarang:e.data,isLoading:!1});let t={filter:a.filter,pencarian:a.pencarian,data_barang:e.data};Object(d.p)("filter_titipan",t)}).catch(a=>{this.setState({isLoading:!1}),Object(h.e)("info",void 0===a.response?"Terjadi Kesalahan Saat Request Data":a.response.data.message)})}render(){return m.a.createElement(m.a.Fragment,null,m.a.createElement(O,{isLoading:this.state.isLoading,onSubmit:a=>this.filterPencarian(a)}),m.a.createElement(b.a,{keyField:"kode_barcode",exportCsv:!1,data:0===this.state.databarang.length?Object(d.g)("filter_titipan").data_barang||[]:this.state.databarang,columns:this.state.columns,empty:!0,textEmpty:"Data Barang Kosong"}))}}y=Object(p.a)({form:"AmbilTitipan",enableReinitialize:!0})(y);var f=Object(c.b)()(y);var N=a=>{const e={};return a.kode_sales||(e.kode_sales="Kode Sales Harus Dipilih"),e};const S=[{value:"MEMBER",name:"MEMBER"},{value:"NONMEMBER",name:"NON MEMBER"}];class I extends n.b{constructor(a){super(a),this.state={showMember:!0}}componentDidMount(){this.props.dispatch(Object(s.ob)());let a=0===Object(n.E)("data_customer_tmp").length?[]:JSON.parse(Object(n.E)("data_customer_tmp")||[]);a&&"MEMBER"===a.jenis_pelanggan?this.setState({showMember:!1}):this.setState({showMember:!0}),this.props.change("jenis_pelanggan","NONMEMBER")}changemember(a){"MEMBER"===a?(this.setState({showMember:!1}),document.getElementById("kode_member").focus(),this.props.change("kode_customer","")):(this.props.change("kode_customer","NONMEMBER"),document.getElementById("nama_customer").focus(),this.props.change("nama_customer",""),this.props.change("no_hp",""),this.props.change("alamat_customer",""),this.setState({showMember:!0}))}getMember(a){Object(n.y)("member/get/by-kode-member/"+a).then(a=>{0===a.data.length?Object(n.s)("info","Member Yang Anda Masukan Tidak Ada !!!"):a.data.forEach((a,e)=>{this.props.change("nama_customer",a.nama_customer),this.props.change("no_hp",a.no_hp),this.props.change("alamat_customer",a.alamat_customer)})}).catch(a=>{Object(n.s)("info","Terjadi Kesalahan SIlahkan Ulangi Kembali !!!")})}render(){return n.m.createElement("form",{onSubmit:this.props.handleSubmit,onKeyPress:a=>{"Enter"===a.key&&a.preventDefault()},autoComplete:"off"},n.m.createElement("div",{className:"row"},n.m.createElement("div",{className:"col-4"},n.m.createElement(n.c,{name:"kode_sales",label:"Pilih Kode Sales",placeholder:"Masukan Kode Sales",options:this.props.DataSales.filter(a=>void 0!==a.kode_sales).map(a=>{return{value:a.kode_sales,name:a.kode_sales}}),component:n.p})),n.m.createElement("div",{className:"col-4"},n.m.createElement(n.c,{id:"jenis_pelanggan",name:"jenis_pelanggan",label:"Pilih Pelanggan",onChange:a=>this.changemember(a),placeholder:"Silahkan Pilih Pelanggan",options:S,component:n.p})),n.m.createElement("div",{className:"col-4"},n.m.createElement(n.c,{id:"kode_member",name:"kode_customer",onChange:a=>this.getMember(a.target.value),component:n.o,type:"text",readOnly:this.state.showMember,label:"Kode Customer",placeholder:"Masukan Kode Customer"})),n.m.createElement("div",{className:"col-4"},n.m.createElement(n.c,{id:"nama_customer",name:"nama_customer",component:n.o,type:"text",label:"Nama Customer",placeholder:"Masukan Nama Customer",normalize:a=>a&&a.toUpperCase()})),n.m.createElement("div",{className:"col-4"},n.m.createElement(n.c,{name:"no_hp",component:n.o,type:"text",normalize:n.j,label:"No Hp",placeholder:"Masukan No Hp"})),n.m.createElement("div",{className:"col-4"},n.m.createElement(n.c,{name:"alamat_customer",component:n.o,type:"textarea",label:"Alamat Customer",placeholder:"Masukan Alamat Customer"}))),n.m.createElement("div",{className:"row"},n.m.createElement("div",{className:"col-8"}),n.m.createElement("div",{className:"col-4"},n.m.createElement("button",{className:"btn btn-primary btn-block",disabled:this.props.isLoadingDataCustomer,type:"submit"},this.props.isLoadingDataCustomer?n.m.createElement(n.m.Fragment,null,n.m.createElement("i",{className:"fas fa-spinner fa-spin"})," \xa0 Sedang Menyimpan"):"Simpan Data"))))}}I=Object(n.I)({form:"ModalDataCustomer",enableReinitialize:!0,validate:N})(I);var T=Object(n.t)(a=>{let e=0===Object(n.E)("data_customer_tmp").length?[]:JSON.parse(Object(n.E)("data_customer_tmp")||[]);return{initialValues:{kode_sales:e.kode_sales||"",jenis_pelanggan:e.jenis_pelanggan||"",kode_customer:e.kode_customer||"",nama_customer:e.nama_customer||"",no_hp:e.no_hp||"",alamat_customer:e.alamat_customer||""},DataSales:a.datamaster.getDataSales}})(I),v=t(42);const M=Object(n.v)({prefix:"Rp. ",locale:"kr-KO"}),C=[{value:"CASH",name:"CASH"},{value:"DEBET",name:"DEBET"},{value:"TRANSFER",name:"TRANSFER"},{value:"CREDIT",name:"CREDIT"}];class B extends n.b{constructor(a){super(a),this.state={isLoading:!1,type_pembayaran:"CASH",columns:[{dataField:"type",text:"Type",footerAttrs:{colSpan:"1"},footer:"Grand Total"},{dataField:"Total",text:"Total",footer:""}]}}componentDidMount(){this.props.dispatch(Object(s.ob)());let a=JSON.parse(Object(n.E)("data_barang_penjualan_tmp"));setTimeout(()=>{let a=Object(n.j)(document.getElementById("grand_total_pembayaran").value),e=Object(n.j)(document.getElementById("total_dp").value);if(parseInt(e)>=parseInt(a)){this.props.change("harus_bayar_rp",parseInt(0));let t=parseInt(a)-parseInt(e);this.props.change("kembali",t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","))}else this.props.change("harus_bayar_rp",parseInt(a)-parseInt(e))},100);let e=Object(n.z)("total_dp");this.props.change("total_dp",e);let t=0;a.forEach((a,e)=>{t+=a.total,this.props.change("grand_total_pembayaran",t),this.props.change("harus_bayar_rp",t)}),this.props.change("jenis","CASH"),setTimeout(()=>{document.getElementById("cash_trx_penjualan").focus()},100)}hitungTotal(){this.props.change("kembali",this.props.kembali),this.props.change("nominal_kembali",this.props.nominal_kembali)}pilihPembyaran(a){"CASH"===a?this.setState({type_pembayaran:"CASH"}):"TRANSFER"===a?this.setState({type_pembayaran:"TRANSFER"}):"DEBET"===a?this.setState({type_pembayaran:"DEBET"}):this.setState({type_pembayaran:"CREDIT"}),this.props.change("cash","")}copyValue(a){this.props.change("cash",parseInt(Object(n.j)(a)))}render(){return n.m.createElement("form",{onSubmit:this.props.handleSubmit,onKeyPress:a=>{"Enter"===a.key&&a.preventDefault()},autoComplete:"off"},n.m.createElement("div",{className:"row"},n.m.createElement("div",{className:"col-4"},n.m.createElement(n.c,Object.assign({id:"grand_total_pembayaran",name:"grand_total_pembayaran",component:n.o,type:"text",onChange:this.hitungTotal(),readOnly:!0},M,{label:"Total Harga Jual",placeholder:"Total Harga Jual"}))),n.m.createElement("div",{className:"col-4"},n.m.createElement(n.c,Object.assign({id:"total_dp",name:"total_dp",component:n.o,type:"text",onChange:this.hitungTotal(),readOnly:!0},M,{label:"Total Dp",placeholder:"Total Dp"}))),n.m.createElement("div",{className:"col-4"},n.m.createElement(n.c,Object.assign({id:"harus_bayar_rp",name:"harus_bayar_rp",component:n.o,type:"text",onChange:this.hitungTotal(),readOnly:!0},M,{label:"Harus Bayar Rp",placeholder:"Harus Bayar Rp"}))),n.m.createElement("div",{className:"col-6"},n.m.createElement(n.c,{name:"jenis",label:"Pilih Jenis Bayar",placeholder:"Pilih Jenis Pembayaran",options:C,onChange:a=>this.pilihPembyaran(a),component:n.p})),n.m.createElement("div",{className:"col-6",style:{display:"CASH"===this.state.type_pembayaran?"none":(this.state.type_pembayaran,"block")}},n.m.createElement(n.c,{tabIndex:"1",name:"nama_bank",id:"nama_bank",component:n.o,type:"text",label:"Bank",placeholder:"Masukan Nama Bank"})),n.m.createElement("div",{className:"col-6",style:{display:"CASH"===this.state.type_pembayaran?"none":"DEBET"===this.state.type_pembayaran?"none":"block"}},n.m.createElement(n.c,{tabIndex:"1",name:"no_card",id:"no_card",component:n.o,type:"text",normalize:n.j,label:"TRANSFER"===this.state.type_pembayaran?"No Rek":"Card No",placeholder:"TRANSFER"===this.state.type_pembayaran?"Masukan No Rek":"Masukan Card No"})),n.m.createElement("div",{className:"col-6"},n.m.createElement(n.c,Object.assign({tabIndex:"1",name:"cash",id:"cash_trx_penjualan",component:n.o,type:"text",label:"Nominal",onChange:this.hitungTotal()},M,{normalize:n.j,placeholder:"Masukan Nominal"}))),n.m.createElement("div",{className:"col-6",style:{display:"CREDIT"===this.state.type_pembayaran?"block":"none"}},n.m.createElement(n.c,{tabIndex:"1",name:"fee",id:"fee",component:n.o,type:"text",label:"Fee (%)",normalize:n.j,placeholder:"5"})),n.m.createElement("div",{className:"col-6 d-none"},n.m.createElement(n.c,{tabIndex:"1",id:"nominal_kembali",name:"nominal_kembali",component:n.o,type:"text",label:"Nominal",placeholder:"Masukan Nominal"})),n.m.createElement("div",{className:"col-6"},n.m.createElement(n.c,{name:"kembali",id:"sisa_bayar",component:n.o,type:"text",readOnly:!0,label:"Sisa",onFocus:a=>this.copyValue(a.target.value),placeholder:"Sisa Pembayaran"})),n.m.createElement("div",{className:"CASH"===this.state.type_pembayaran?"col-6 text-right":"TRANSFER"===this.state.type_pembayaran?"col-6 text-right":"col-12 text-right"},n.m.createElement("br",null),n.m.createElement("label",null,"\xa0"),n.m.createElement("button",{tabIndex:"2",className:"btn btn-primary",disabled:!this.props.lebih}," ",n.m.createElement("i",{className:"fa fa-plus"})))))}}B=Object(n.I)({form:"HeadInputPembayaran",enableReinitialize:!0,validate:v.a})(B);const x=Object(n.w)("HeadInputPembayaran");var F=Object(n.t)(a=>{const e=x(a,"harus_bayar_rp","cash"),t=e.cash,n=e.harus_bayar_rp;let r=JSON.parse(localStorage.getItem("trx_pemabayran_penjualan"))||[],s=0;r.forEach(a=>{s=a.nominal+s});let o=parseFloat(s||0)-parseFloat(n||0),l=!1;return{status:l=parseInt(n)>=parseInt(o),kembali:o.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),nominal_cash:t,nominal_kembali:o+parseInt(t),lebih:o<0}})(B);class P extends n.b{constructor(a){super(a),this.state={isLoading:!1,status_btn:!1,type_pembayaran:"CASH",kembalian:"",columns:[{dataField:"jenis",text:"Jenis",footerAttrs:{colSpan:"2"},footer:"Grand Total"},{dataField:"keterangan",text:"Keterangan"},{dataField:"nominal",text:"Total",formatter:a=>n.m.createElement("span",null,parseInt(a).toLocaleString("kr-KO")),footer:a=>parseInt(a.reduce((a,e)=>a+e,0)).toLocaleString("kr-KO")},{dataField:"action",text:"Action",csvExport:!1,headerClasses:"text-center",formatter:(a,e,t)=>n.m.createElement("div",{className:"row text-center"},n.m.createElement("div",{className:"col-12"},n.m.createElement("button",{type:"button",disabled:"TITIPAN"===e.keterangan,onClick:()=>this.hapusdata(t),className:"btn btn-danger mr-3"},n.m.createElement("i",{className:"fa fa-trash"})))),footer:""}]}}hapusdata(a){n.q.fire({title:"Anda Yakin !!",text:"Ingin Menghapus Data Ini ?",icon:"warning",position:"top-center",cancelButtonText:"Tidak",showCancelButton:!0,confirmButtonText:"OK",showConfirmButton:!0}).then(e=>{if(e.isConfirmed){let e=Object(n.z)("trx_pemabayran_penjualan");e.splice(a,1),Object(n.K)("trx_pemabayran_penjualan",e),localStorage.removeItem("data_tukar_barang_temp"),this.props.dispatch(Object(o.m)([])),Object(n.K)("sisa_bayar_penjualan",[]);let t=document.getElementById("harus_bayar_rp").value,r=JSON.parse(localStorage.getItem("trx_pemabayran_penjualan"))||[],s=0;r.forEach(a=>{s+=a.nominal}),parseInt(s)>=parseInt(Object(n.j)(t))?this.setState({status_btn:!0}):this.setState({status_btn:!1})}})}simpanPembayaran(a){if(void 0===a.no_card&&"CASH"!==a.jenis&&"DEBET"!==a.jenis)return Object(n.s)("info","Nomor kartu tidak boleh kosong"),!1;let e={total_transaksi:a.harus_bayar_rp,sisa_bayar:a.nominal_kembali};Object(n.K)("sisa_bayar_penjualan",e);let t=JSON.parse(localStorage.getItem("trx_pemabayran_penjualan"))||[];if("CASH"===a.jenis||t.length){if("CASH"!==a.jenis){if(a.kembali.replace(/[^0-9]/g,"")-a.cash<0&&0!==parseInt(a.kembali))return Object(n.s)("info","Pembayaran tidak boleh lebih dari sisa"),!1;if(t.reduce((a,e)=>a+e.nominal,0)>=a.harus_bayar_rp)return Object(n.s)("info","Pembayaran Sudah Cukup"),!1}}else if(a.kembali.replace(/[^0-9]/g,"")-a.cash<0)return Object(n.s)("info","Pembayaran tidak boleh lebih dari sisa"),!1;if(t.findIndex(a=>"CASH"===a.jenis)>=0){if(a.kembali.replace(/[^0-9]/g,"")-a.cash<0&&t.reduce((a,e)=>a+e.nominal,0)>a.harus_bayar_rp)return Object(n.s)("info","Pembayaran Sudah Cukup"),!1;if(t.reduce((a,e)=>a+e.nominal,0)>=a.harus_bayar_rp)return Object(n.s)("info","Pembayaran Sudah Cukup"),!1}if(-1===t.findIndex(e=>e.jenis===a.jenis)){let e="";e="CASH"===a.jenis?"CASH":"TRANSFER"===a.jenis?a.no_card+" - "+a.nama_bank:a.nama_bank;let r={jenis:a.jenis,nominal:parseInt(a.cash),nama_bank:void 0!==a.nama_bank?a.nama_bank.toUpperCase():"-",fee:"CREDIT"===a.jenis?parseInt(a.fee):0,no_card:a.no_card||"-",keterangan:e.toUpperCase(),kembali:a.nominal_kembali};t.push(r),this.setState({masuk:!0,kembalian:a.kembali}),Object(n.K)("trx_pemabayran_penjualan",t)}else{let e=Object(n.z)("trx_pemabayran_penjualan");e=e.map(e=>(e.jenis===a.jenis&&(e.nominal+=parseInt(a.cash)),e)),Object(n.K)("trx_pemabayran_penjualan",e),this.setState({status:!0,kembalian:a.kembalian})}let r=0;t.forEach(a=>{r+=a.nominal}),parseInt(r)>=parseInt(a.harus_bayar_rp)?this.setState({status_btn:!0}):this.setState({status_btn:!1})}render(){return n.m.createElement(n.m.Fragment,null,n.m.createElement(F,{onSubmit:a=>this.simpanPembayaran(a)}),n.m.createElement("hr",null),n.m.createElement("form",{onSubmit:this.props.handleSubmit,onKeyPress:a=>{"Enter"===a.key&&a.preventDefault()},autoComplete:"off"},n.m.createElement(n.r,{keyField:"jenis",exportCsv:!1,data:Object(n.z)("trx_pemabayran_penjualan")||[],columns:this.state.columns,empty:!0,pagination:"off",textEmpty:"Data Pembayaran Kosong"}),n.m.createElement("div",{className:"row"},n.m.createElement("div",{className:"col-6 text-right"},n.m.createElement("button",{className:"btn btn-primary",disabled:this.props.isLoadingPembayran,onClick:()=>this.props.simpanPembayaran(),type:"button"},this.props.isLoadingPembayran?n.m.createElement(n.m.Fragment,null,n.m.createElement("i",{className:"fas fa-spinner fa-spin"})," \xa0 Sedang Diproses"):"Bayar Sekarang")),n.m.createElement("div",{className:"col-6"},n.m.createElement("button",{className:"btn btn-outline-primary",disabled:!(!this.props.isLoadingPembayranTitipan&&"TITIPAN"!==this.props.status)||!!this.state.status_btn,onClick:()=>this.props.bayarTitipan(),type:"button"},this.props.isLoadingPembayranTitipan?n.m.createElement(n.m.Fragment,null,n.m.createElement("i",{className:"fas fa-spinner fa-spin"})," \xa0 Sedang Diproses"):"Bayar DP")))))}}P=Object(n.I)({form:"ModalPembayaran",enableReinitialize:!0,validate:v.a})(P);var L=Object(n.t)(a=>{let e=Object(n.z)("data_barang_penjualan_tmp")||[],t="PENJUALAN";return e.forEach(a=>{t="-"===a.no_titip_group?"PENJUALAN":"TITIPAN"}),{status:t}})(P),A=t(153),w=t.n(A),K=t(204);var D=a=>{const e={};return a.kode_barcode||(e.kode_barcode="Kode Barcode Tidak Boleh Kosong"),a.nama_customer||(e.nama_customer="Nama Customer Tidak Boleh Kosong"),a.no_hp||(e.no_hp="No HP Tidak Boleh Kosong"),a.alamat_customer||(e.alamat_customer="Alamat Customer Tidak Boleh Kosong"),e},J=t(15),R=t.n(J);const H=Object(n.v)({prefix:"Rp. ",locale:"kr-KO"});class z extends n.b{constructor(a){var e;super(a),e=this,this.getValue=function(){var a=Object(K.a)(w.a.mark(function a(t){var s,o;return w.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return s=t.target.files[0],a.next=3,Object(n.u)(s);case 3:o=a.sent,e.props.change("foto",o),e.props.dispatch(Object(r.s)(o)),e.setState({gambar:o});case 7:case"end":return a.stop()}},a)}));return function(e){return a.apply(this,arguments)}}(),this.state={ModalWebCam:!1,isLoading:!1,harga_jual:!0,berat_jual:!0,hargapergram:!0,otorisasi:!1,ongkos:!0,total:!0,gambar:!1}}showModalWebcam(){this.props.dispatch(Object(r.s)(!1)),this.props.dispatch(Object(n.L)()),this.setState({ModalWebCam:!0})}handleTakePhoto(a){this.props.dispatch(Object(r.s)(a)),this.props.change("foto",a),this.setState({ModalWebCam:!1})}getBarcode(a){clearTimeout(this.delay),this.delay=setTimeout(()=>{this.setState({isLoading:!0});let e=(JSON.parse(localStorage.getItem("data_barang_penjualan_tmp"))||[]).findIndex(e=>e.kode_barcode===a);document.body.style.cursor="wait",-1===e?Object(n.y)("barang/ready/kode-barcode/"+a).then(e=>{this.setState({isLoading:!1}),0===e.data.length?(Object(n.s)("info","Kode Barcode Tidak Ada"),this.props.change("nama_barang",""),this.props.change("nama_atribut",""),this.props.change("berat_atribut",""),this.props.change("harga_atribut",""),this.props.change("harga_jual",""),this.props.change("harga_jual_tmp",""),this.props.change("berat",""),this.props.change("harga_pergram",""),this.props.change("kadar",""),this.props.dispatch(Object(r.s)(!1)),this.props.change("foto",""),document.body.style.cursor="initial"):Object(n.y)("imagebarang/get/by-kode-barcode/"+a).then(a=>{""===a.data?(this.setState({isLoading:!1}),document.body.style.cursor="initial",e.data.forEach((a,e)=>{this.props.change("nama_barang",a.nama_barang),this.props.change("nama_atribut",a.nama_atribut),this.props.change("berat_atribut",a.berat_atribut),this.props.change("harga_atribut",a.harga_atribut),this.props.change("harga_jual",a.harga_jual),this.props.change("harga_jual_asli",a.harga_jual),this.props.change("harga_jual_tmp",a.harga_jual),this.props.change("berat",a.berat),this.props.change("harga_skrg",a.harga_skrg),this.props.change("harga_pergram",a.harga_skrg),this.props.change("berat_tmp",a.berat),this.props.change("kadar",a.kadar),this.props.dispatch(Object(r.s)(!1)),this.props.change("foto",""),document.getElementById("berat").focus();let t=parseInt(a.harga_jual||0)+parseInt(a.ongkos||0)+parseInt(a.harga_atribut||0);this.props.change("total",t),this.setState({harga_jual:!1,berat_jual:!1,hargapergram:!1,ongkos:!1})})):(this.setState({isLoading:!1}),document.body.style.cursor="initial",this.props.dispatch(Object(r.s)(a.data.dataimage)),this.props.change("foto",a.data.dataimage),e.data.forEach((a,e)=>{this.props.change("nama_barang",a.nama_barang),this.props.change("nama_atribut",a.nama_atribut),this.props.change("berat_atribut",a.berat_atribut),this.props.change("harga_atribut",a.harga_atribut),this.props.change("harga_jual_tmp",a.harga_jual),this.props.change("harga_jual",a.harga_jual),this.props.change("harga_jual_asli",a.harga_jual),this.props.change("berat",a.berat),this.props.change("harga_pergram",a.harga_skrg),this.props.change("kadar",a.kadar),this.props.change("harga_skrg",a.harga_skrg),this.props.change("berat_tmp",a.berat),document.getElementById("berat").focus();let t=parseInt(a.harga_jual||0)+parseInt(a.ongkos||0)+parseInt(a.harga_atribut||0);this.props.change("total",t),this.setState({harga_jual:!1,berat_jual:!1,hargapergram:!1,ongkos:!1})}))}).catch(a=>{this.setState({isLoading:!1}),document.body.style.cursor="initial",this.props.change("foto",""),this.props.dispatch(Object(r.s)(!1)),e.data.forEach((a,e)=>{this.props.change("nama_barang",a.nama_barang),this.props.change("nama_atribut",a.nama_atribut),this.props.change("berat_atribut",a.berat_atribut),this.props.change("harga_atribut",a.harga_atribut),this.props.change("harga_jual_tmp",a.harga_jual),this.props.change("berat",a.berat),this.props.change("harga_pergram",a.harga_skrg),this.props.change("kadar",a.kadar),this.props.change("harga_skrg",a.harga_skrg),this.props.change("berat_tmp",a.berat),document.getElementById("berat").focus();let t=parseInt(a.harga_jual||0)+parseInt(a.ongkos||0)+parseInt(a.harga_atribut||0);this.props.change("total",t),this.setState({harga_jual:!1,berat_jual:!1,hargapergram:!1,ongkos:!1})})})}).catch(a=>{this.props.change("nama_barang",""),this.props.change("nama_atribut",""),this.props.change("berat_atribut",""),this.props.change("harga_atribut",""),this.props.change("harga_jual",""),this.props.change("harga_jual_tmp",""),this.props.change("berat",""),this.props.change("harga_pergram",""),this.props.change("kadar",""),this.props.change("berat_tmp",""),this.props.dispatch(Object(r.s)(!1)),this.props.change("foto",""),this.setState({isLoading:!1}),document.body.style.cursor="initial",404!==a.response.status&&Object(n.s)("info",a.response.data)}):(this.setState({isLoading:!1}),document.body.style.cursor="initial",Object(n.s)("info","Barang Sudah Ada Di Tabel"))},1500)}hitungTotal(a){let e=Object(d.n)(this.props.harga_atribut+this.props.harga_jual+parseInt(a.target.value||"0"));this.props.change("total",e)}onChangeOngkos(a){let e=Object(d.n)(parseInt(this.props.harga_atribut||0)+parseInt(this.props.harga_jual||0)+parseInt(Object(n.j)(a.target.value)||0)||0);this.props.change("total",e)}onChangeBerat(a){let e=parseFloat(this.props.kadar)/100*parseFloat(this.props.harga_skrg)*parseFloat(a.target.value||0)||0,t=Object(d.n)(this.props.harga_atribut+parseInt(e)+parseInt(this.props.ongkos||"0"));this.props.change("total",t),this.props.change("harga_jual",e)}onChangeHarga(a){this.props.change("harga_jual",Object(n.j)(a.target.value));let e=Object(d.n)(parseInt(this.props.harga_atribut||0)+parseInt(Object(n.j)(a.target.value)||0)+parseInt(this.props.ongkos||0)||0);this.props.change("total",e)}loadcamera(){return n.m.createElement(n.a,{onTakePhoto:a=>{this.handleTakePhoto(a)}})}cekOtorisasi(a){let e={user_id:a.target.value,password:document.getElementById("otorisasi_penjualan_username").value};Object(g.f)("authorization",e).then(a=>{Object(n.s)("success","Otorisasi Berhasil"),localStorage.setItem("otorisasi","false"),this.setState({otorisasi:!0})}).catch(a=>{this.setState({otorisasi:!1})})}componentDidMount(){this.props.dispatch(Object(r.s)(!1)),this.props.change("foto",""),this.props.dispatch(Object(s.ob)()),setTimeout(()=>{document.getElementById("kode_barcode").focus()},100)}render(){return n.m.createElement(n.m.Fragment,null,n.m.createElement("form",{onSubmit:this.props.handleSubmit,onKeyPress:a=>{"Enter"===a.key&&a.preventDefault()},autoComplete:"off"},n.m.createElement("div",{className:"row"},n.m.createElement("div",{className:"col-12 col-md-10"},n.m.createElement("div",{className:"row"},n.m.createElement("div",{className:"col-12 col-md-3"},n.m.createElement(n.c,{onChange:a=>this.getBarcode(a.target.value),onBlur:()=>this.props.change("total",this.props.total),name:"kode_barcode",label:"Kode Barcode",type:"text",tabIndex:"1",normalize:a=>a.replace(/[^\d]/g,""),id:"kode_barcode",placeholder:"Masukan Kode Barcode",component:n.o})),n.m.createElement("div",{className:"col-12 col-md-5"},n.m.createElement(n.c,{name:"foto",type:"hidden",readOnly:!0,component:n.e}),n.m.createElement(n.c,{name:"nama_barang",label:"Nama Barang",type:"text",readOnly:!0,placeholder:"Masukan Nama Barang",component:n.o})),n.m.createElement("div",{className:"col-12 col-md-4"},n.m.createElement(n.c,{name:"nama_atribut",label:"Nama Atribut",type:"text",readOnly:!0,placeholder:"Masukan Nama Atribut",component:n.o})),n.m.createElement("div",{className:"col-12 col-md-4"},n.m.createElement(n.c,Object.assign({name:"harga_atribut",label:"Harga Atribut",type:"text"},H,{onChange:this.hitungTotal,readOnly:!0,placeholder:"Masukan Harga Atribut",component:n.o}))),n.m.createElement("div",{className:"col-12 col-md-4"},n.m.createElement(n.c,{name:"berat_atribut",label:"Berat Atribut",type:"number",readOnly:!0,placeholder:"Masukan Berat Atribut",component:n.o})),n.m.createElement("div",{className:"col-12 col-md-4"},n.m.createElement(n.c,{tabIndex:"2",id:"berat",name:"berat",label:"Berat Jual",type:"text",normalize:n.d,onChange:a=>this.onChangeBerat(a),placeholder:"Masukan Berat Jual",component:n.o})),n.m.createElement("div",{className:"col-12 col-md-6"},n.m.createElement(n.c,{name:"harga_jual_tmp",type:"hidden",readOnly:!0,component:n.e}),n.m.createElement(n.c,Object.assign({tabIndex:"3",name:"harga_jual",label:"Harga Jual",type:"telp"},H,{onChange:a=>this.onChangeHarga(a),readOnly:this.state.harga_jual,placeholder:"Masukan Harga Jual",component:n.o}))),n.m.createElement("div",{className:"col-12 col-md-4"},n.m.createElement(n.c,Object.assign({name:"harga_pergram",label:"Harga/Gram",type:"telp",readOnly:!0},H,{placeholder:"Masukan Harga/Gram",component:n.o}))),n.m.createElement("div",{className:"col-12 col-md-4 d-none"},n.m.createElement(n.c,Object.assign({name:"berat_tmp",label:"Berat Tmp",type:"telp",readOnly:!0},H,{placeholder:"Masukan Harga Sekarang",component:n.o}))),n.m.createElement("div",{className:"col-12 col-md-4 d-none"},n.m.createElement(n.c,Object.assign({name:"harga_skrg",label:"Harga Sekarang",type:"telp",readOnly:!0},H,{placeholder:"Masukan Harga Sekarang",component:n.o}))),n.m.createElement("div",{className:"col-12 col-md-4 d-none"},n.m.createElement(n.c,Object.assign({name:"kadar",label:"Harga Sekarang",type:"telp",readOnly:!0},H,{placeholder:"Masukan Harga Sekarang",component:n.o}))),n.m.createElement("div",{className:"col-12 col-md-2 d-none"},n.m.createElement(n.c,{tabIndex:"4",name:"premi",label:"Premi",type:"checkbox",id:"switcher_checkbox_1",component:n.n})),n.m.createElement("div",{className:"col-12 col-md-6"},n.m.createElement(n.c,Object.assign({tabIndex:"3",name:"ongkos",label:"Ongkos",type:"telp"},H,{onChange:a=>this.onChangeOngkos(a),readOnly:this.state.harga_jual,placeholder:"Masukan Harga Jual",component:n.o}))),n.m.createElement("div",{className:"col-12 col-md-6"},n.m.createElement(n.c,Object.assign({name:"total",label:"Total",type:"telp",readOnly:this.state.total,placeholder:"Masukan Total",component:n.o},H))))),n.m.createElement("div",{className:"col-12 col-md-2"},n.m.createElement("label",null,"Photo"),n.m.createElement("div",{className:"card image-upload"},!0===this.state.ModalWebCam?n.m.createElement("div",{className:"container"},this.loadcamera()):n.m.createElement("img",{alt:"img",name:"foto",src:!1===this.props.setCamera?n.D:void 0===this.props.setCamera?n.D:this.props.setCamera,height:"140px"})))),n.m.createElement("div",{className:"row"},n.m.createElement("div",{className:"col-4"},n.m.createElement("label",null," \xa0"),n.m.createElement("button",{tabIndex:"5",className:"btn btn-primary btn-block",disabled:!!this.state.isLoading||0===this.props.total,type:"submit"},this.state.isLoading?n.m.createElement(n.m.Fragment,null,n.m.createElement("i",{className:"fas fa-spinner fa-spin"})," \xa0 Sedang Menyimpan"):"Simpan Data")),n.m.createElement("div",{className:"col-4"},n.m.createElement("label",null," \xa0"),n.m.createElement("button",{onClick:this.props.hideModal,className:"btn btn-outline-secondary btn-block",disabled:!!this.state.isLoading,type:"button"},this.state.isLoading?n.m.createElement(n.m.Fragment,null,n.m.createElement("i",{className:"fas fa-spinner fa-spin"})," \xa0 Tutup"):"Tutup")),n.m.createElement("div",{className:"col-2"},n.m.createElement("label",null," \xa0"),n.m.createElement("div",{className:"input-group"},n.m.createElement("div",{className:"custom-file"},n.m.createElement("input",{type:"file",name:"photo",autoComplete:"off",className:"custom-file-input",id:"exampleInputFile",onChange:a=>this.getValue(a)}),n.m.createElement("label",{className:"custom-file-label",htmlFor:"exampleInputFile"},"Pilih gambar")))),n.m.createElement("div",{className:"col-2"},n.m.createElement("label",null," \xa0"),n.m.createElement("button",{className:"btn btn-block btn-primary",type:"button",onClick:()=>this.showModalWebcam()}," ","WebCam"," ")))),this.state.isLoading?n.m.createElement(R.a,{loading:!0,background:"rgba(0, 0, 0, 0.35)",loaderColor:"rgba(94, 147, 117, 1)"}):null)}}z=Object(n.I)({form:"ModalTambahBarang",enableReinitialize:!0,validate:D})(z);var U=Object(n.t)(a=>{const e=Object(n.w)("ModalTambahBarang")(a,"harga_jual","ongkos","berat","harga_jual_tmp","harga_atribut","harga_skrg","kadar"),t=e.harga_jual,r=e.ongkos,s=e.berat,o=e.harga_jual_tmp,l=e.harga_atribut,i=e.harga_skrg,m=e.kadar;return{harga_jual_tmp:o,kadar:m,harga_skrg:i,berat:s,harga_atribut:l,ongkos:r,harga_jual:parseFloat(m)/100*parseFloat(i)*parseFloat(s||0)||0,total:Object(d.n)(parseFloat(t||0)+parseFloat(r||0)+parseFloat(l||0)||0),harga_pergram:parseFloat(m)/100*parseFloat(i),DataSales:a.datamaster.getDataSales,setCamera:a.databarang.setCamera}})(z);const G=Object(n.v)({prefix:"Rp. ",locale:"kr-KO"});class W extends n.b{constructor(a){super(a),this.state={showMember:!0}}hitungTotal(){this.props.change("harga_per_gram",this.props.hasil)}componentDidMount(){this.props.dispatch(Object(s.lb)())}cariFaktur(a){clearTimeout(this.delay),this.delay=setTimeout(()=>{Object(g.c)("penjualan/get/by-no-jual/"+a.target.value).then(a=>{this.props.change("nama_barang",a.data.nama_barang),this.props.change("Berat",a.data.berat),this.props.change("harga_nota",a.data.harga_jual),this.props.change("harga_per_gram",a.data.harga_gram),this.props.change("kadar",a.data.kadar),this.props.change("jenis",a.data.kode_dept+" - "+a.data.nama_dept)}).catch(a=>{Object(n.s)("error",a.response.message)})},2e3)}render(){return n.m.createElement("form",{onSubmit:this.props.handleSubmit,onKeyPress:a=>{"Enter"===a.key&&a.preventDefault()},autoComplete:"off"},n.m.createElement("div",{className:"row"},n.m.createElement("div",{className:"col-3"},n.m.createElement(n.c,{id:"kode_faktur",name:"kode_faktur",component:n.o,onChange:a=>this.cariFaktur(a),type:"text",label:"Kode Faktur",placeholder:"Masukan Kode Faktur",normalize:a=>a&&a.toUpperCase()})),n.m.createElement("div",{className:"col-3"},n.m.createElement(n.c,{id:"jenis",name:"jenis",label:"Kode Jenis",placeholder:"Silahkan Pilih Kode Jenis",onChange:a=>this.props.change("nama_barang",a.split("-")[1]),options:this.props.dataJenis.map(a=>({value:a.kode_dept+" - "+a.nama_dept,name:a.kode_dept+" - "+a.nama_dept})),component:n.p})),n.m.createElement("div",{className:"col-3"},n.m.createElement(n.c,{id:"nama_barang",name:"nama_barang",component:n.o,type:"text",label:"Nama Barang",placeholder:"Masukan Nama Barang",normalize:a=>a&&a.toUpperCase()})),n.m.createElement("div",{className:"col-3"},n.m.createElement(n.c,{id:"kadar",name:"kadar",component:n.o,type:"text",label:"Kadar",placeholder:"Masukan Kadar",normalize:n.j})),n.m.createElement("div",{className:"col-3"},n.m.createElement(n.c,{id:"berat",name:"Berat",component:n.o,type:"text",label:"Berat",onChange:this.hitungTotal(),placeholder:"Masukan Berat",normalize:n.j})),n.m.createElement("div",{className:"col-3"},n.m.createElement(n.c,Object.assign({name:"harga_nota",component:n.o,type:"text",normalize:n.j,label:"Harga Nota"},G,{placeholder:"Masukan Harga Nota"}))),n.m.createElement("div",{className:"col-3"},n.m.createElement(n.c,Object.assign({name:"harga_beli",component:n.o,type:"text",onChange:this.hitungTotal(),label:"Harga Beli",placeholder:"Masukan Harga Beli"},G))),n.m.createElement("div",{className:"col-3"},n.m.createElement(n.c,Object.assign({name:"harga_per_gram",component:n.o,type:"text",normalize:n.j,label:"Harga/Gram"},G,{placeholder:"Masukan Harga/Gram"})))),n.m.createElement("div",{className:"row"},n.m.createElement("div",{className:"col-8"}),n.m.createElement("div",{className:"col-4"},n.m.createElement("button",{className:"btn btn-primary btn-block",disabled:this.props.isLoadingDataCustomer||void 0===this.props.harga_beli||this.props.harga_beli<=0,type:"submit"},this.props.isLoadingDataCustomer?n.m.createElement(n.m.Fragment,null,n.m.createElement("i",{className:"fas fa-spinner fa-spin"})," \xa0 Sedang Menyimpan"):"Simpan Barang"))),n.m.createElement("div",{className:"col-lg-12"},n.m.createElement(n.r,{keyField:"nama_barang",exportCsv:!1,data:this.props.barang||[],columns:this.props.columns,empty:!0,pagination:"off",textEmpty:"Data Pembayaran Kosong"})))}}W=Object(n.I)({form:"ModalTukarBarang",enableReinitialize:!0,validate:N})(W);const V=Object(n.w)("ModalTukarBarang");var q=Object(n.t)(a=>({DataSales:a.datamaster.getDataSales,dataJenis:a.datamaster.getDataJenis,berat:V(a,"Berat"),harga_beli:V(a,"harga_beli"),hasil:parseFloat(V(a,"harga_beli"))/parseFloat(V(a,"Berat"))||0}))(W),Y=t(705);class Q extends i.Component{constructor(a){super(a),this.state={}}componentDidMount(){setTimeout(()=>{document.getElementById("nomor_pesanan").focus()},100)}render(){return m.a.createElement(m.a.Fragment,null,m.a.createElement("form",{onSubmit:this.props.handleSubmit,autoComplete:"off"},m.a.createElement("label",{htmlFor:""},"Masukan Nomor Pesanan"),m.a.createElement("div",{className:"input-group mb-3"},m.a.createElement("input",{type:"text",id:"nomor_pesanan",className:"form-control",placeholder:"Nomor Pesanan","aria-label":"Nomor Pesanan","aria-describedby":"basic-addon2"}),m.a.createElement("div",{className:"input-group-append"},m.a.createElement("button",{className:"btn btn-primary",disabled:this.props.isLoadingPesanan,onClick:()=>this.props.getNomorPesanan(document.getElementById("nomor_pesanan")),type:"button"},this.props.isLoadingPesanan?m.a.createElement(m.a.Fragment,null,m.a.createElement("i",{className:"fas fa-spinner fa-spin"})," \xa0 Sedang Mencari"):"Cari Pesanan")))))}}Q=Object(p.a)({form:"AmbilPesanan",enableReinitialize:!0})(Q);var X=Object(c.b)(a=>({setCamera:a.databarang.setCamera,hideModal:a.datamaster.modalDialog}),null)(Q),Z=t(27),$=t.n(Z);const aa=(a,e)=>{$.a.fire({title:"Anda yakin ingin mengapus barang ini ? ",icon:"warning",position:"top-center",cancelButtonText:"Tidak",showCancelButton:!0,confirmButtonText:"OK",showConfirmButton:!0}).then(t=>{if(t.isConfirmed){let t=0===Object(n.E)("data_tukar_barang_temp").length?[]:JSON.parse(Object(n.E)("data_tukar_barang_temp")),r=t.detail_barang.findIndex(e=>e.nama_barang===a);t.detail_barang.splice(r,1),Object(n.K)("data_tukar_barang_temp",t),e.dispatch(Object(o.m)(t))}}).catch(a=>{Object(n.s)("error",a.response.data)})};class ea extends n.b{constructor(a){super(a),this.state={isLoading:!1,isLoadingBatal:!1,isLoadingPembayran:!1,isLoadingPembayranTitipan:!1,isLoadingDataCustomer:!1,isLoadingPesanan:!1,otorisasi:!1,onSend:!1,saveImage:[],data:[],FormModal:"",kode_sales:"",columns:[{dataField:"no_faktur",text:"Nomor Faktur"},{dataField:"nama_barang",text:"Nama Barang"},{dataField:"harga_gram",text:"Harga / Gram"},{dataField:"berat",text:"Berat"},{dataField:"harga_beli",text:"Jumlah",formatter:a=>a&&a.toLocaleString("kr-KO")},{dataField:"Aksi",text:"Aksi",csvExport:!1,headerClasses:"text-center",formatter:(a,e)=>n.m.createElement("div",{className:"row text-center"},n.m.createElement("div",{className:"col-12"},n.m.createElement("button",{onClick:()=>{aa(e.nama_barang,this.props)},className:"btn btn-danger",type:"button"},n.m.createElement("i",{className:"fa fa-trash"}))))}]}}componentDidMount(){let a=Object(n.z)("data_tukar_barang_temp")||[{detail_barang:[]}];this.props.dispatch(Object(o.m)(a)),this.props.dispatch(Object(s.ob)())}getNomorPesanan(a){this.setState({isLoadingPesanan:!0}),Object(g.f)("pesanan/ambil/no",{no_pesanan:a.value}).then(a=>{let e=[],t={no_pesanan:a.data.no_pesanan,kode_barcode:a.data.kode_barcode,nama_barang:a.data.nama_barang,nama_atribut:a.data.nama_atribut,berat_atribut:a.data.berat_atribut,harga_atribut:a.data.harga_atribut,harga_jual:a.data.harga_jual,harga_pergram:a.data.harga_gram,berat_jual:a.data.berat,ongkos:a.data.ongkos,total:parseInt(a.data.harga_jual)+parseInt(a.data.harga_atribut)+parseInt(a.data.ongkos),status_premi:""},r={alamat_customer:a.data.pesanan[0].alamat_customer||"-",jenis_pelanggan:a.data.pesanan[0].kode_customer||"NONMEMBER",kode_customer:a.data.pesanan[0].kode_customer||"NONMEMBER",kode_sales:a.data.pesanan[0].kode_sales,nama_customer:a.data.pesanan[0].nama_customer||"REGULER",no_hp:a.data.pesanan[0].no_hp||"-"};Object(n.F)("data_customer_tmp",JSON.stringify(r)),e.push(t),Object(n.F)("data_barang_penjualan_tmp",JSON.stringify(e)),this.props.dispatch(Object(o.l)(e)),this.setState({isLoadingPesanan:!1});let s=0;a.data.pembayaran.forEach(a=>{s+=a.jumlah_rp}),Object(n.K)("total_dp",s),this.setState({status:"Berhasil"}),this.props.dispatch(Object(n.C)())}).catch(a=>{console.log(a.response),Object(n.F)("data_barang_penjualan_tmp",JSON.stringify([])),Object(n.s)("info",void 0===a.response?"Terjadi Kesalahan Saat Mengirim Data ":a.response.data.message),this.setState({isLoadingPesanan:!1})})}hideModa(){this.props.dispatch(Object(n.C)())}handleSubmit(a){let e={alamat_customer:a.alamat_customer||"-",jenis_pelanggan:a.jenis_pelanggan||"NONMEMBER",kode_customer:a.kode_member||"NONMEMBER",kode_sales:a.kode_sales,nama_customer:a.nama_customer||"REGULER",no_hp:a.no_hp||"-"};Object(n.F)("data_customer_tmp",JSON.stringify(e)),this.setState({isLoadingDataCustomer:!0,onSend:!0,kode_sales:a.kode_sales}),setTimeout(()=>{this.setState({isLoadingDataCustomer:!1,onSend:!1}),this.props.dispatch(Object(n.C)())},500)}simpanBarang(a){if(parseInt(a.harga_jual)<parseInt(a.harga_jual_tmp))this.setState({otorisasi:!0}),this.props.dispatch(Object(n.C)()),this.showModalOtorisasi(),this.setState({saveImage:{kode_barcode:a.kode_barcode,dataimage:a.foto},data:{no_titip_group:"-",kode_barcode:a.kode_barcode||0,nama_barang:a.nama_barang||"-",nama_atribut:a.nama_atribut||"-",berat_jual:parseFloat(a.berat)||0,berat_awal:parseFloat(a.berat_tmp)||0,berat_atribut:parseFloat(a.berat_atribut)||0,harga_atribut:parseInt(a.harga_atribut)||0,harga_jual:parseInt(a.harga_jual)||0,harga_pergram:parseInt(a.harga_pergram)||0,ongkos:parseInt(a.ongkos)||0,total:parseInt(a.total)||0,status_premi:a.premi?"PREMI":"NONPREMI"}});else if(Number(a.berat)!==Number(a.berat_tmp))this.setState({otorisasi:!0}),this.props.dispatch(Object(n.C)()),this.showModalOtorisasi(),this.setState({saveImage:{kode_barcode:a.kode_barcode,dataimage:a.foto},data:{no_titip_group:"-",kode_barcode:a.kode_barcode||0,nama_barang:a.nama_barang||"-",nama_atribut:a.nama_atribut||"-",berat_jual:parseFloat(a.berat)||0,berat_awal:parseFloat(a.berat_tmp)||0,berat_atribut:parseFloat(a.berat_atribut)||0,harga_atribut:parseInt(a.harga_atribut)||0,harga_jual:parseInt(a.harga_jual)||0,harga_pergram:parseInt(a.harga_pergram)||0,ongkos:parseInt(a.ongkos)||0,total:parseInt(a.total)||0,status_premi:a.premi?"PREMI":"NONPREMI"}});else{let e={kode_barcode:a.kode_barcode,dataimage:a.foto},t={no_titip_group:"-",kode_barcode:a.kode_barcode||0,nama_barang:a.nama_barang||"-",nama_atribut:a.nama_atribut||"-",berat_jual:parseFloat(a.berat)||0,berat_awal:parseFloat(a.berat_tmp)||0,berat_atribut:parseFloat(a.berat_atribut)||0,harga_atribut:parseInt(a.harga_atribut)||0,harga_jual:parseInt(a.harga_jual)||0,harga_pergram:parseInt(a.harga_pergram)||0,ongkos:parseInt(a.ongkos)||0,total:parseInt(a.total)||0,status_premi:a.premi?"PREMI":"NONPREMI"};if(0===a.harga_jual)return Object(n.s)("info","Harga Jual Tidak Boleh 0"),!1;null!==a.foto&&Object(n.H)("imagebarang/add",e).then(a=>{this.props.dispatch(Object(r.s)(!1)),this.props.change("foto","")}).catch(a=>{});let s=0===Object(n.E)("data_barang_penjualan_tmp").length?[]:JSON.parse(Object(n.E)("data_barang_penjualan_tmp"));-1===s.findIndex(e=>e.kode_barcode===a.kode_barcode)?(this.props.dispatch(Object(n.J)("ModalTambahBarang")),s.push(t),Object(n.F)("data_barang_penjualan_tmp",JSON.stringify(s)),this.props.dispatch(Object(o.l)(s)),this.props.change("kode_barcode","")):(document.getElementById("kode_barcode").focus(),Object(n.s)("info","Barang Sudah Ada Di Tabel")),this.props.dispatch(Object(n.C)())}}bayarTitipan(){this.setState({isLoadingPembayranTitipan:!0});let a=Object(n.z)("trx_pemabayran_penjualan"),e=[],t=0;a.forEach(a=>{let r={bank:"CASH"!==a.jenis?a.nama_bank:"CASH",jenis:a.jenis,keterangan:a.keterangan,fee:"CREDIT"===a.jenis?a.fee:0,jumlah_rp:a.nominal>=parseInt(Object(n.z)("sisa_bayar_penjualan").total_transaksi)?parseInt(a.nominal)-parseInt(Object(n.z)("sisa_bayar_penjualan").sisa_bayar):parseInt(a.nominal)};t=a.nominal+t,e.push(r)});let s=JSON.parse(Object(n.E)("data_customer_tmp")),l=JSON.parse(Object(n.E)("data_barang_penjualan_tmp")),i=[];l.forEach((a,e)=>{let t={kode_barcode:a.kode_barcode,berat:Number(a.berat_jual),berat_awal:Number(a.berat_awal),berat_atribut:Number(a.berat_atribut),ongkos:a.ongkos,harga_jual:a.harga_jual,harga_atribut:a.harga_atribut};i.push(t)});let m={status:"TITIPAN",kode_sales:s.kode_sales,kode_customer:"NONMEMBER"===s.jenis_pelanggan?s.jenis_pelanggan:s.kode_customer,nama_customer:s.nama_customer,alamat_customer:s.alamat_customer,no_hp:s.no_hp,detail_barang:i,pembayaran:e};console.log(m),Object(g.f)("titip/create",m).then(a=>{if(Object(n.F)("data_barang_penjualan_tmp",JSON.stringify([])),Object(n.s)("success","Transaksi Titipan Berhasil"),0!==a.data.length){let e=[];for(let t=0;t<2;t++){let t="";a.data.forEach((a,e)=>{let n=a.alamat_customer.length,r=a.nama_barang.length;t+="========================================\n",t+="               NOTA TITIPAN             \n",t+="========================================\nTanggal          : ".concat(a.tanggal,"\nNama Customer    : ").concat(a.nama_customer,"\nNo Hp            : ").concat(a.no_hp,"\nAlamat Customer  : ").concat(a.alamat_customer.slice(0,20),"\n"),n>20&&(t+="                   ".concat(a.alamat_customer.slice(20,40),"\n")),n>40&&(t+="                   ".concat(a.alamat_customer.slice(40,60),"\n")),t+="========================================\n",t+="Keterangan\n",t+="========================================\n",t+="No Faktur Titip    : ".concat(a.no_titip_group,"\n"),t+="Nama Barang        : ".concat(a.nama_barang.slice(0,20),"\n"),r>20&&(t+="                   ".concat(a.nama_barang.slice(20,40),"\n")),r>40&&(t+="                   ".concat(a.nama_barang.slice(40,60),"\n")),t+="Total Transaksi    : ".concat(a.total_harga.toLocaleString("kr-KO"),"\n"),t+="Dp                 : ".concat(a.dp.toLocaleString("kr-KO"),"\n"),t+="Sisa               : ".concat(a.sisa.toLocaleString("kr-KO"),"\n"),t+="========================================\n",t+="\n\n\n\n"}),e.push(t)}document.getElementById("nota_titip").value=e.join(""),setTimeout(()=>{this.TextFilenotatitip()},100)}}).then(()=>{this.props.dispatch(Object(n.C)()),this.props.dispatch(Object(r.s)(!1))}).then(()=>{this.props.dispatch(Object(n.J)("ModalPembayaran"))}).then(()=>{Object(n.F)("data_customer_tmp",JSON.stringify([])),Object(n.F)("total_dp",JSON.stringify([])),Object(n.F)("trx_pemabayran_penjualan",JSON.stringify([])),Object(n.F)("filter_titipan",JSON.stringify([])),Object(n.K)("sisa_bayar_penjualan",0)}).then(()=>{this.setState({isLoadingPembayranTitipan:!1}),this.props.dispatch(Object(o.l)([]))}).catch(a=>{this.setState({isLoadingPembayranTitipan:!1}),this.errorhandlingTitipan(a)})}TextFilenotatitip(){const a=document.createElement("a"),e=new Blob([document.getElementById("nota_titip").value],{type:"text/plain;charset=utf-8"});a.href=URL.createObjectURL(e),a.download="autoprint_titipan.txt",document.body.appendChild(a),a.click()}simpanPembayaran(a){this.setState({isLoadingPembayran:!0,onSend:!0});let e=document.getElementById("harus_bayar_rp").value.replace("Rp.","").replaceAll(".",""),t=JSON.parse(Object(n.E)("data_barang_penjualan_tmp")),s=[];t.forEach((a,e)=>{let t={no_titip_group:a.no_titip_group||"-",no_pesanan:a.no_pesanan||"-",kode_barcode:a.kode_barcode,berat:Number(a.berat_jual),berat_awal:Number(a.berat_awal),berat_atribut:Number(a.berat_atribut),harga_gram:a.harga_pergram,ongkos:a.ongkos,harga_jual:a.harga_jual,harga_atribut:a.harga_atribut};s.push(t)});let l=Object(n.z)("trx_pemabayran_penjualan"),i=[],m=0;0!==l.length&&l.forEach(a=>{if("TUKAR"===a.jenis)m=a.nominal+m,i.push(a);else{let e={bank:"CASH"!==a.jenis?a.nama_bank:"CASH",jenis:a.jenis,keterangan:a.keterangan,fee:"CREDIT"===a.jenis?a.fee:0,jumlah_rp:"CASH"===a.jenis?parseInt(a.nominal)-parseInt(Object(n.z)("sisa_bayar_penjualan").sisa_bayar):parseInt(a.nominal)};m=a.nominal+m,i.push(e)}}),console.log(i);let c=parseInt(e)-parseInt(m);if(parseInt(c)>0)return Object(n.s)("info","Pembayaran Masih Kurang Rp."+parseInt(c).toLocaleString("kr-KO")),this.setState({isLoadingPembayran:!1,onSend:!1}),!1;let p=JSON.parse(Object(n.E)("data_customer_tmp")),d={status:"PENJUALAN",kode_sales:p.kode_sales,kode_member:"NONMEMBER"===p.jenis_pelanggan?p.jenis_pelanggan:p.kode_customer,nama_customer:p.nama_customer,alamat_customer:p.alamat_customer,no_hp:p.no_hp,detail_barang:s,pembayaran:i};Object(n.H)("penjualan/simpan",d).then(a=>{console.log(a.data),Object(n.F)("data_barang_penjualan_tmp",JSON.stringify([])),Object(n.s)("success",a.data.message)}).then(()=>{this.props.dispatch(Object(n.C)()),this.props.dispatch(Object(r.s)(!1))}).then(()=>{this.props.dispatch(Object(n.J)("ModalPembayaran"))}).then(()=>{Object(n.F)("data_customer_tmp",JSON.stringify([])),Object(n.F)("total_dp",JSON.stringify([])),Object(n.F)("trx_pemabayran_penjualan",JSON.stringify([])),Object(n.F)("filter_titipan",JSON.stringify([])),Object(n.F)("data_tukar_barang_temp",JSON.stringify({detail_barang:[]})),Object(n.K)("sisa_bayar_penjualan",[]),Object(n.K)("sisa_bayar_penjualan",0)}).then(()=>{this.setState({isLoadingPembayran:!1,onSend:!1}),this.props.dispatch(Object(o.l)([]))}).catch(a=>{this.setState({isLoadingPembayran:!1,onSend:!1}),this.errorhandling(a||"Koneksi Bermasalah")})}errorhandling(a){this.setState({isLoadingPembayran:!1,isLoadingPembayranTitipan:!1}),Object(n.s)("info",/conflict/i.test(a.response.data||"Error")?"Terjadi Kesalahan Saat Mengirim Data":a.response.data)}errorhandlingTitipan(a){console.log(a.response.data),this.setState({isLoadingPembayran:!1,isLoadingPembayranTitipan:!1}),Object(n.s)("info",/conflict/i.test(a.response.data.message||"Error")?"Terjadi Kesalahan Saat Mengirim Data":a.response.data.message)}ShowModalBarang(){this.props.dispatch(Object(n.L)()),this.props.dispatch(Object(n.J)("ModalTambahBarang")),this.setState({FormModal:"ShowModalBarang"})}ShowModalCustomer(){this.setState({FormModal:"ShowModalCustomer"}),this.props.dispatch(Object(n.L)())}showModalTitipan(){this.setState({FormModal:"AmbilTitipan"}),this.props.dispatch(Object(n.L)())}showModalOtorisasi(){this.setState({FormModal:"Otorisasi"}),this.props.dispatch(Object(n.L)())}showModalPembayaran(){let a=0===Object(n.E)("data_customer_tmp").length?[]:JSON.parse(Object(n.E)("data_customer_tmp")),e=0===Object(n.E)("data_barang_penjualan_tmp").length?[]:JSON.parse(Object(n.E)("data_barang_penjualan_tmp"));0===a.length||0===e.length?Object(n.s)("info","Data Customer Atau Data Barang Belum Diisi !!!"):(this.setState({FormModal:"ShowModalPembayaran"}),this.props.dispatch(Object(n.L)()))}batalPenjualan(){this.setState({isLoadingBatal:!0}),setTimeout(()=>{Object(n.K)("total_dp",0),Object(n.F)("trx_pemabayran_penjualan",JSON.stringify([])),Object(n.F)("data_customer_tmp",JSON.stringify([])),this.props.dispatch(Object(o.l)([])),Object(n.F)("data_barang_penjualan_tmp",JSON.stringify([])),this.setState({isLoadingBatal:!1})},500)}SimpanBarangLocal(){let a=this.state.data;if(0===a.harga_jual)return Object(n.s)("info","Harga Jual Tidak Boleh 0"),!1;null!==a.foto&&Object(n.H)("imagebarang/add",this.state.saveImage).then(a=>{this.props.dispatch(Object(r.s)(!1)),this.props.change("foto","")}).catch(a=>{});let e=0===Object(n.E)("data_barang_penjualan_tmp").length?[]:JSON.parse(Object(n.E)("data_barang_penjualan_tmp"));-1===e.findIndex(e=>e.kode_barcode===a.kode_barcode)?(this.props.dispatch(Object(n.J)("ModalTambahBarang")),e.push(a),Object(n.F)("data_barang_penjualan_tmp",JSON.stringify(e)),this.props.dispatch(Object(o.l)(e)),this.props.change("kode_barcode","")):(document.getElementById("kode_barcode").focus(),Object(n.s)("info","Barang Sudah Ada Di Tabel"))}cekOtorisasi(a){let e={user_id:a.username,password:a.password,kategori:"PENJUALAN",description:"PENJUALAN DI BAWAH MODAL",keterangan:a.keterangan.toUpperCase()||"-"};Object(g.f)("authorization",e).then(a=>{this.SimpanBarangLocal(),Object(n.s)("success",a.data.message),localStorage.setItem("otorisasi","false"),this.setState({otorisasi:!0}),this.props.dispatch(Object(n.C)())}).catch(a=>{this.setState({otorisasi:!1}),Object(n.s)("info","Otorisasi Gagal..")})}showModalAmbilPesanan(){this.setState({FormModal:"AmbilPesanan"}),this.props.dispatch(Object(n.L)())}showTukarBarang(){let a=0===Object(n.E)("data_customer_tmp").length?[]:JSON.parse(Object(n.E)("data_customer_tmp")),e=0===Object(n.E)("data_barang_penjualan_tmp").length?[]:JSON.parse(Object(n.E)("data_barang_penjualan_tmp"));0===a.length||0===e.length?Object(n.s)("info","Data Customer Atau Data Barang Belum Diisi !!!"):(this.setState({FormModal:"TukarBarang"}),this.props.dispatch(Object(n.L)()))}simpanTukarBarang(a){console.log(a.nama_barang);let e={no_faktur:a.no_faktur||"-",nama_barang:a.nama_barang,qty:1,kadar:a.kadar||0,berat:a.Berat||0,harga_nota:a.harga_nota||0,harga_beli:a.harga_beli||0,harga_gram:a.harga_per_gram||0},t=0===Object(n.E)("data_tukar_barang_temp").length?{detail_barang:[]}:JSON.parse(Object(n.E)("data_tukar_barang_temp")),r=t.detail_barang,s=0===Object(n.E)("trx_pemabayran_penjualan").length?[]:JSON.parse(Object(n.E)("trx_pemabayran_penjualan")),l=s.findIndex(a=>"TUKAR"===a.jenis),i=Number(r.map(a=>parseInt(a.harga_beli)).reduce((a,e)=>a+e,0))+Number(a.harga_beli),m=t.detail_barang.findIndex(e=>e.nama_barang===a.nama_barang);if(-1===m){this.props.dispatch(Object(n.J)("ModalTambahBarang")),r.push(e);var c={kode_sales:this.state.kode_sales,jenis:"TUKAR",keterangan:"-",nominal:i,jumlah_rp:i,detail_barang:r};Object(n.F)("data_tukar_barang_temp",JSON.stringify(c)),-1===l?(s.push(c),Object(n.K)("trx_pemabayran_penjualan",s)):(s.splice(l,1),s.push(c),Object(n.K)("trx_pemabayran_penjualan",s)),this.props.dispatch(Object(o.m)(t)),this.props.dispatch(Object(n.J)("ModalTukarBarang"))}else{r.splice(m,1),r.push(e);var p={kode_sales:this.state.kode_sales,jenis:"TUKAR",keterangan:"-",nominal:i,jumlah_rp:i,detail_barang:r};Object(n.F)("data_tukar_barang_temp",JSON.stringify(p)),this.props.dispatch(Object(n.J)("ModalTukarBarang"))}}render(){const a={renderer:a=>n.m.createElement("div",{className:"container"},n.m.createElement("div",{className:"row"},n.m.createElement("div",{className:"col-12"},"Nama Atribut : ",a.nama_atribut," ",n.m.createElement("br",null),"Berat Atribut : ",a.berat_atribut," ",n.m.createElement("br",null),"Harga Atribut : ",a.harga_atribut," ",n.m.createElement("br",null),"Kadr Jual : ",a.kadar||0," ",n.m.createElement("br",null),"Kadr Cetak : ",a.kadar_cetak||0," ",n.m.createElement("br",null)))),showExpandColumn:!0,expandByColumnOnly:!0};return n.m.createElement(n.k,null,n.m.createElement("div",{className:"row"},n.m.createElement("div",{className:"col-12"},n.m.createElement("br",null),n.m.createElement("textarea",{style:{display:"none"},id:"nota_titip",rows:"100",cols:"100"}),n.m.createElement(n.r,{keyField:"kode_barcode",exportCsv:!1,data:0===this.props.setBarangPenjualan.length?0===Object(n.E)("data_barang_penjualan_tmp").length?[]:JSON.parse(Object(n.E)("data_barang_penjualan_tmp")):this.props.setBarangPenjualan||[],btnOptional3:!0,btnTextOptional3:"Ambil Pesanan",handleClickOptional3:()=>this.showModalAmbilPesanan(),btnOptional2:!0,btnTextOptional2:"Ambil Titipan",handleClickOptional2:()=>this.showModalTitipan(),tambahData:!0,btnText:"Data Customer",columns:this.props.columns,btnOptional:!0,namaCustomer:!0,jenisCustomer:!0,form:"Penjualan",btnTextOptional:"Data Barang",handleClick:()=>this.ShowModalCustomer(),handleClickOptional:()=>this.ShowModalBarang(),empty:!0,textEmpty:"Data Barang Kosong",expandRow:a,disable_search:!0}))),n.m.createElement(n.i,{size:"ShowModalCustomer"===this.state.FormModal?"xl":"ShowModalBarang"===this.state.FormModal?"xl":"AmbilTitipan"===this.state.FormModal?"xl":"TukarBarang"===this.state.FormModal?"xl":"l",title:n.m.createElement(ta,{state:this.state.FormModal}),content:"ShowModalCustomer"===this.state.FormModal?n.m.createElement(T,{isLoadingDataCustomer:this.state.isLoadingDataCustomer,onSubmit:a=>this.handleSubmit(a)}):"ShowModalBarang"===this.state.FormModal?n.m.createElement(U,{isLoadingTopBar:this.props.isLoadingTopBar,hideModal:()=>this.hideModa(),onSubmit:a=>this.simpanBarang(a)}):"AmbilTitipan"===this.state.FormModal?n.m.createElement(f,null):"AmbilPesanan"===this.state.FormModal?n.m.createElement(X,{isLoadingPesanan:this.state.isLoadingPesanan,getNomorPesanan:a=>this.getNomorPesanan(a)}):"Otorisasi"===this.state.FormModal?n.m.createElement(Y.a,{isLoadingOtorisasi:this.state.isLoading,onSubmit:a=>this.cekOtorisasi(a),keterangan:!0}):"TukarBarang"===this.state.FormModal?n.m.createElement(q,{onSubmit:a=>this.simpanTukarBarang(a),barang:this.props.setBarangTukar.detail_barang,columns:this.state.columns,kode_sales:this.state.kode_sales}):n.m.createElement(L,{isLoadingPembayranTitipan:this.state.isLoadingPembayranTitipan,isLoadingPembayran:this.state.isLoadingPembayran,bayarTitipan:a=>this.bayarTitipan(a),simpanPembayaran:a=>this.simpanPembayaran(a)})}),n.m.createElement("div",{className:"row"},n.m.createElement("div",{className:"col-12"},n.m.createElement("button",{onClick:()=>this.showModalPembayaran(),className:"btn btn-primary",disabled:this.props.isLoading,type:"submit"},this.props.isLoading?n.m.createElement(n.m.Fragment,null,n.m.createElement("i",{className:"fas fa-spinner fa-spin"})," \xa0 Sedang Menyimpan"):"Simpan Data Penjualan"),"\xa0",n.m.createElement("button",{onClick:()=>this.showTukarBarang(),className:"btn btn-outline-primary",disabled:this.props.isLoading,type:"button"},this.props.isLoading?n.m.createElement(n.m.Fragment,null,n.m.createElement("i",{className:"fas fa-spinner fa-spin"})," \xa0 Sedang Menyimpan"):"Bayar dengan tukar"),"\xa0",n.m.createElement("button",{onClick:()=>this.batalPenjualan(),className:"btn btn-warning",disabled:this.state.isLoadingBatal,type:"button"},this.state.isLoadingBatal?n.m.createElement(n.m.Fragment,null,n.m.createElement("i",{className:"fas fa-spinner fa-spin"})," \xa0 Reset"):"Reset"))),this.state.onSend?n.m.createElement(R.a,{loading:!0,background:"rgba(0, 0, 0, 0.35)",loaderColor:"rgba(94, 147, 117, 1)"}):null)}}function ta(a,e){return"ShowModalCustomer"===a.state?"Form Data Customer":"ShowModalBarang"===a.state?"Form Data Barang":"AmbilTitipan"===a.state?"Form Data Ambil Titipan":"AmbilPesanan"===a.state?"Form Ambil Pesanan":"TukarBarang"===a.state?"Form Tukar Barang":"Otorisasi"===a.state?"Form Otorisasi":"Form Pembayaran"}ea=Object(n.I)({form:"HeadTransaksiPenjualan",enableReinitialize:!0,validate:l.a})(ea);var na=Object(n.t)(a=>({setBarangPenjualan:a.penjualan.setBarangPenjualan,DataSales:a.datamaster.getDataSales,hideModal:a.datamaster.modalDialog,setBarangTukar:a.penjualan.setBarangTukar}))(ea);e.default=Object(n.t)(null)(class extends n.m.Component{constructor(a){super(a),this.state={isLoading:!1,columns:[{dataField:"kode_barcode",text:"Kode Barcode",footerAttrs:{colSpan:"2"},footer:"Total"},{dataField:"nama_barang",text:"Nama Barang"},{dataField:"harga_pergram",text:"Harga",formatter:a=>n.m.createElement("span",null,parseInt(a).toLocaleString("kr-KO")),footer:a=>parseInt(a.reduce((a,e)=>a+e,0)).toLocaleString("kr-KO")},{dataField:"ongkos",text:"Ongkos",formatter:a=>n.m.createElement("span",null,parseInt(a).toLocaleString("kr-KO")),footer:a=>parseInt(a.reduce((a,e)=>a+e,0)).toLocaleString("kr-KO")},{dataField:"harga_jual",text:"Harga Jual",formatter:a=>n.m.createElement("span",null,parseInt(a).toLocaleString("kr-KO")),footer:a=>parseInt(a.reduce((a,e)=>a+e,0)).toLocaleString("kr-KO")},{dataField:"total",text:"Total Harga",formatter:a=>n.m.createElement("span",null,parseInt(a).toLocaleString("kr-KO")),footer:a=>parseInt(a.reduce((a,e)=>a+e,0)).toLocaleString("kr-KO")},{dataField:"action",text:"Action",csvExport:!1,headerClasses:"text-center",formatter:(a,e,t)=>n.m.createElement("div",{className:"row text-center"},n.m.createElement("div",{className:"col-12"},n.m.createElement("button",{type:"button",onClick:()=>this.hapusdata(t,e),className:"btn btn-danger mr-3"},n.m.createElement("i",{className:"fa fa-trash"})))),footer:""}]}}hapusdata(a,e){n.q.fire({title:"Anda Yakin !!",text:"Ingin Menghapus Data Ini ?",icon:"warning",position:"top-center",cancelButtonText:"Tidak",showCancelButton:!0,confirmButtonText:"OK",showConfirmButton:!0}).then(e=>{if(e.isConfirmed){let e=JSON.parse(Object(n.E)("data_barang_penjualan_tmp"));e.splice(a,1),Object(n.F)("data_barang_penjualan_tmp",JSON.stringify(e)),this.props.dispatch(Object(o.l)(e));let t=JSON.parse(Object(n.E)("data_barang_penjualan_tmp"));if(0!==(0===Object(n.E)("trx_pemabayran_penjualan").length?[]:JSON.parse(Object(n.E)("trx_pemabayran_penjualan"))).length){Object(n.K)("trx_pemabayran_penjualan",[]);let a=[],e=0;t.forEach(t=>{t.pembayaran.forEach(t=>{e+=t.jumlah_rp;let r={jenis:t.jenis,keterangan:"TITIPAN",nominal:t.jumlah_rp};a.push(r),Object(n.K)("trx_pemabayran_penjualan",a)})}),Object(n.K)("total_dp",e)}Object(n.K)("sisa_bayar_penjualan",[]),this.setState({status:"berhasil"})}})}componentWillUnmount(){localStorage.setItem("data_customer_tmp",JSON.stringify([])),localStorage.setItem("data_barang_penjualan_tmp",JSON.stringify([]))}errorhandling(a){Object(n.s)("info","Transaksi Gagal Disimpan")}render(){return n.m.createElement("div",null,n.m.createElement("ol",{className:"breadcrumb float-xl-right"},n.m.createElement("li",{className:"breadcrumb-item"},n.m.createElement(n.g,{to:"#"},"Penjualan")),n.m.createElement("li",{className:"breadcrumb-item active"},"Transaksi Penjualan")),n.m.createElement("h1",{className:"page-header"},"Transaksi Penjualan "),n.m.createElement(n.k,null,n.m.createElement(n.l,null,"Transaksi Penjualan"),n.m.createElement("br",null),n.m.createElement("div",{className:"container"},n.m.createElement(na,{isLoading:this.state.isLoading,columns:this.state.columns})),n.m.createElement("br",null)))}})},705:function(a,e,t){"use strict";var n=t(0),r=t.n(n),s=t(9),o=t(290),l=t(291),i=t(5);class m extends n.Component{constructor(a){super(a),this.state={}}componentDidMount(){setTimeout(()=>{document.getElementById("username").focus()},100)}render(){return r.a.createElement("form",{onSubmit:this.props.handleSubmit,onKeyPress:a=>{"Enter"===a.key&&a.preventDefault()},autoComplete:"off"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-6"},r.a.createElement(o.a,{name:"no_faktur_group",component:i.b,type:"hidden"}),r.a.createElement(o.a,{name:"alasan",component:i.b,type:"hidden"}),r.a.createElement(o.a,{id:"username",name:"username",component:i.e,type:"text",label:"Username",placeholder:"Masukan Username"})),r.a.createElement("div",{className:"col-lg-6"},r.a.createElement(o.a,{name:"password",component:i.e,type:"password",label:"Password",placeholder:"Masukan Password"})),r.a.createElement("div",{className:this.props.keterangan?"col-lg-12":"col-lg-12 d-none"},r.a.createElement(o.a,{name:"keterangan",component:i.e,label:"Keterangan",placeholder:"Masukan Keterangan"})),r.a.createElement("div",{className:"col-lg-12"},r.a.createElement("label",null," \xa0 "),r.a.createElement("button",{type:"submit",name:"type_btn",className:"btn btn-primary btn-block",disabled:this.props.isLoadingOtorisasi},this.props.isLoadingOtorisasi?r.a.createElement(r.a.Fragment,null,r.a.createElement("i",{className:"fas fa-spinner fa-spin"})," \xa0 Otorisasi"):"Otorisasi"))))}}m=Object(l.a)({form:"OtorisasiHancur",enableReinitialize:!0})(m),e.a=Object(s.b)(null)(m)}}]);
//# sourceMappingURL=24.0c578fc7.chunk.js.map