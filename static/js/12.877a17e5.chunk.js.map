{"version":3,"sources":["pages/Penjualan/BatalPenjualan/HeadBatalPenjualan.jsx","pages/Penjualan/BatalPenjualan/OtorisasiBatalJual.jsx","pages/Penjualan/BatalPenjualan/FormBatalPenjualan.jsx","Validasi/Penjualan/ValidasiBaralJual.jsx"],"names":["HeadBatalPenjualan","Component","constructor","props","super","this","state","isloadingFaktur","isLoading","isLoadingBatal","date","Date","getBarcode","value","setState","getData","then","res","data","length","ToastNotification","hasil","no_faktur_group","forEach","item","index","push","_id","change","dispatch","setNoFakturPenjualan","catch","err","getDetailFaktur","no_faktur_group_selected","postData","setBatalPenjualan","componentDidMount","getDataKondisiBarang","btlPenjualan","setTimeout","reset","render","expandRow","renderer","row","react_default","a","createElement","nama_atribut","parseInt","harga_atribut","toLocaleString","ongkos","onSubmit","handleSubmit","onKeyPress","e","key","preventDefault","autoComplete","className","Field","onChange","target","name","component","ReanderField","type","label","placeholder","id","options","no_faktur","map","ReanderSelect","datakondisi","filter","list","undefined","kondisi_barang","onClick","disabled","Fragment","tabel","keyField","exportCsv","columns","empty","textEmpty","reduxForm","form","enableReinitialize","validate","ValidasiBaralJual","connect","penjualan","datamaster","OtorisasiBatalJual","HiidenFiled","isLoadingOtorisasi","React","databarang","dataField","text","footerAttrs","colSpan","footer","columnData","formatter","cell","toFixed","reduce","acc","bind","alasan","localStorage","setItem","JSON","stringify","showModal","simpanTransaksiJual","hasil_btl_penjualan","parse","getItem","user_id","username","password","resposn","message","hideModal","react_router_dom","to","panel","BatalPenjualan_HeadBatalPenjualan","ModalGlobal","size","title","content","BatalPenjualan_OtorisasiBatalJual","errors","kode_barcode"],"mappings":"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","file":"static/js/12.877a17e5.chunk.js","sourcesContent":["import React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { Field, reduxForm, reset } from \"redux-form\";\nimport { getDataKondisiBarang } from \"../../../actions/datamaster_action\";\nimport { ReanderField, ReanderSelect } from \"../../../components/helpers/field\";\nimport { ToastNotification } from \"../../../components/helpers/notification\";\nimport Tabel from \"../../../components/helpers/tabel\";\nimport { getData, postData } from \"../../../config/axios\";\n// import { SkeletonLoading } from \"../../../components/helpers/field.jsx\";\nimport ValidasiBaralJual from \"../../../Validasi/Penjualan/ValidasiBaralJual\";\nimport {\n  setBatalPenjualan,\n  setNoFakturPenjualan,\n} from \"../../../actions/penjualan_action\";\n\nconst maptostate = (state) => {\n  return {\n    no_faktur: state.penjualan.setNoFakturPenjualan,\n    setBatalPenjualan: state.penjualan.setBatalPenjualan,\n    datakondisi: state.datamaster.getDataKondisiBarang,\n  };\n};\nclass HeadBatalPenjualan extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      // no_faktur: [],\n      isloadingFaktur: false,\n      isLoading: false,\n      isLoadingBatal: false,\n      date: new Date(),\n    };\n  }\n\n  getBarcode(value) {\n    this.setState({ isloadingFaktur: true });\n    getData(\"batalpenjualan/get/by-kode-barcode/\" + value)\n      .then((res) => {\n        if (res.data.length === 0) {\n          ToastNotification(\"info\", \"Kode Barcode Yang Anda Cari Tidak Ada\");\n          this.setState({\n            isloadingFaktur: false,\n          });\n        } else {\n          let hasil = [{ no_faktur_group: \"Silahkan Pilih\" }];\n          res.data.forEach((item, index) => {\n            hasil.push({\n              no_faktur_group: item._id.no_faktur_group,\n            });\n            // console.log(item._id.no_faktur_group);\n            this.props.change(\"no_faktur\", \"Silahkan Pilih\");\n            this.setState({\n              isloadingFaktur: false,\n            });\n            this.props.dispatch(setNoFakturPenjualan(hasil));\n          });\n        }\n      })\n      .catch((err) => {\n        this.setState({\n          isloadingFaktur: false,\n        });\n        ToastNotification(\"info\", \"Kode Barcode Yang Anda Cari Tidak Ada\");\n      });\n  }\n  getDetailFaktur() {\n    this.setState({ isLoading: true });\n    let data = {\n      no_faktur_group: this.state.no_faktur_group_selected,\n    };\n    postData(\"batalpenjualan/get/by-faktur\", data)\n      .then((res) => {\n        if (res.data.length === 0) {\n          ToastNotification(\"info\", \"Data Transaksi Tersbut Tidak Ada\");\n          this.setState({ isLoading: false });\n        } else {\n          this.props.dispatch(setBatalPenjualan(res.data));\n          this.setState({\n            isLoading: false,\n          });\n        }\n      })\n      .catch((err) => {\n        ToastNotification(\"info\", \"Data Transaksi Tersbut Tidak Ada\");\n        this.setState({ isLoading: false });\n      });\n  }\n  componentDidMount() {\n    this.props.dispatch(getDataKondisiBarang());\n  }\n  btlPenjualan() {\n    this.setState({ isLoadingBatal: true });\n    setTimeout(() => {\n      this.props.dispatch(reset(\"HeadBatalPenjualan\"));\n      this.setState({\n        isLoadingBatal: false,\n        no_faktur_group_selected: \"\",\n      });\n      this.props.dispatch(setNoFakturPenjualan([]));\n      this.props.dispatch(setBatalPenjualan([]));\n    }, 500);\n  }\n  render() {\n    const expandRow = {\n      renderer: (row) => (\n        <div>\n          Nama Atribut : {row.nama_atribut} <br />\n          Harga Atribut : {parseInt(row.harga_atribut).toLocaleString(\n            \"ID-id\"\n          )}{\" \"}\n          <br />\n          Ongkos : {parseInt(row.ongkos).toLocaleString(\"ID-id\")} <br />\n        </div>\n      ),\n    };\n    return (\n      <form\n        onSubmit={this.props.handleSubmit}\n        onKeyPress={(e) => {\n          e.key === \"Enter\" && e.preventDefault();\n        }}\n        autoComplete=\"off\"\n      >\n        <div className=\"row\">\n          <div className=\"col-lg-3\">\n            <Field\n              onChange={(e) => this.getBarcode(e.target.value)}\n              name=\"kode_barcode\"\n              component={ReanderField}\n              type=\"text\"\n              label=\"Kode Barcode\"\n              placeholder=\"Masukan Kode Barcode\"\n            />\n          </div>\n          <div className=\"col-lg-3\">\n            <Field\n              label=\"No Faktur\"\n              name=\"no_faktur\"\n              id=\"no_faktur\"\n              onChange={(e) => this.setState({ no_faktur_group_selected: e })}\n              options={this.props.no_faktur.map((row) => {\n                let data = {\n                  value: row.no_faktur_group,\n                  name: row.no_faktur_group,\n                };\n                return data || [];\n              })}\n              placeholder={\"Silahkan Pilih No Faktur\"}\n              component={ReanderSelect}\n            />\n          </div>\n          <div className=\"col-lg-3\">\n            <Field\n              label=\"Alasan\"\n              name=\"alasan\"\n              options={this.props.datakondisi\n                .filter((list) => list.kondisi_barang !== undefined)\n                .map((list) => {\n                  let data = {\n                    value: list.kondisi_barang,\n                    name: list.kondisi_barang,\n                  };\n                  return data;\n                })}\n              placeholder={\"Silahkan Pilih Alasan\"}\n              component={ReanderSelect}\n            />\n          </div>\n          <div className=\"col-lg-3\">\n            <div className=\"text-right\">\n              <label>&nbsp;</label>\n              <button\n                type=\"button\"\n                onClick={() => this.getDetailFaktur()}\n                name=\"type_btn\"\n                className=\"btn btn-primary btn-block\"\n                disabled={this.state.isLoading}\n              >\n                {this.state.isLoading ? (\n                  <>\n                    <i className=\"fas fa-spinner fa-spin\"></i> &nbsp; Sedang\n                    Mencari\n                  </>\n                ) : (\n                  \"Cari Data\"\n                )}\n              </button>\n            </div>\n          </div>\n          <div className=\"col-lg-12\">\n            <Tabel\n              keyField=\"kode_barcode\"\n              exportCsv={false}\n              data={this.props.setBatalPenjualan || []}\n              columns={this.props.columns}\n              empty={true}\n              textEmpty=\"Data Barang Kosong\"\n              expandRow={expandRow}\n            />\n          </div>\n          <div className=\"col-lg-12\">\n            <label>&nbsp;</label>\n            <button\n              type=\"submit\"\n              name=\"type_btn\"\n              className=\"btn btn-primary\"\n              disabled={this.props.isLoading}\n            >\n              {this.props.isLoading ? (\n                <>\n                  <i className=\"fas fa-spinner fa-spin\"></i> &nbsp;Simpan Batal\n                  Penjualan\n                </>\n              ) : (\n                \"Simpan Batal Penjualan\"\n              )}\n            </button>\n            &nbsp;\n            <button\n              type=\"button\"\n              name=\"type_btn\"\n              onClick={() => this.btlPenjualan()}\n              className=\"btn btn-warning\"\n              disabled={this.state.isLoadingBatal}\n            >\n              {this.state.isLoadingBatal ? (\n                <>\n                  <i className=\"fas fa-spinner fa-spin\"></i> &nbsp; Batal\n                </>\n              ) : (\n                \"Batal\"\n              )}\n            </button>\n          </div>\n        </div>\n      </form>\n    );\n  }\n}\n\nHeadBatalPenjualan = reduxForm({\n  form: \"HeadBatalPenjualan\",\n  enableReinitialize: true,\n  validate: ValidasiBaralJual,\n})(HeadBatalPenjualan);\nexport default connect(maptostate, null)(HeadBatalPenjualan);\n","import React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { Field, reduxForm } from \"redux-form\";\nimport { HiidenFiled, ReanderField } from \"../../../components/helpers/field\";\n\nclass OtorisasiBatalJual extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {};\n  }\n  componentDidMount() {\n    // let data = JSON.parse(localStorage.getItem(\"no_faktur_batal_jual\"));\n    // this.props.change(\"no_faktur_group\", data.no_faktur_group);\n    // this.props.change(\"alasan\", data.alasan);\n  }\n  render() {\n    return (\n      <form\n        onSubmit={this.props.handleSubmit}\n        onKeyPress={(e) => {\n          e.key === \"Enter\" && e.preventDefault();\n        }}\n        autoComplete=\"off\"\n      >\n        <div className=\"row\">\n          <div className=\"col-lg-4\">\n            <Field\n              name=\"no_faktur_group\"\n              component={HiidenFiled}\n              type=\"hidden\"\n            />\n            <Field name=\"alasan\" component={HiidenFiled} type=\"hidden\" />\n            <Field\n              name=\"username\"\n              component={ReanderField}\n              type=\"text\"\n              label=\"Username\"\n              placeholder=\"Masukan Username\"\n            />\n          </div>\n          <div className=\"col-lg-4\">\n            <Field\n              name=\"password\"\n              component={ReanderField}\n              type=\"password\"\n              label=\"Password\"\n              placeholder=\"Masukan Password\"\n            />\n          </div>\n          <div className=\"col-lg-4\">\n            <label> &nbsp; </label>\n            <button\n              type=\"submit\"\n              name=\"type_btn\"\n              className=\"btn btn-primary btn-block\"\n              disabled={this.props.isLoadingOtorisasi}\n            >\n              {this.props.isLoadingOtorisasi ? (\n                <>\n                  <i className=\"fas fa-spinner fa-spin\"></i> &nbsp; Simpan\n                </>\n              ) : (\n                \"Simpan\"\n              )}\n            </button>\n          </div>\n        </div>\n      </form>\n    );\n  }\n}\n\nOtorisasiBatalJual = reduxForm({\n  form: \"OtorisasiBatalJual\",\n  enableReinitialize: true,\n})(OtorisasiBatalJual);\nexport default connect(null)(OtorisasiBatalJual);\n","import React from \"react\";\nimport { connect } from \"react-redux\";\nimport { Link } from \"react-router-dom\";\nimport { reset } from \"redux-form\";\n// import { reset } from \"redux-form\";\nimport { hideModal, showModal } from \"../../../actions/datamaster_action.jsx\";\nimport {\n  setBatalPenjualan,\n  setNoFakturPenjualan,\n} from \"../../../actions/penjualan_action.jsx\";\n// import { setBatalPenjualan, setNoFakturPenjualan } from \"../../../actions/penjualan_action.jsx\";\nimport ModalGlobal from \"../../../components/helpers/ModalGlobal.jsx\";\nimport { ToastNotification } from \"../../../components/helpers/notification.jsx\";\n// import { ToastNotification } from \"../../../components/helpers/notification.jsx\";\n// import { ToastNotification } from \"../../../components/helpers/notification.jsx\";\nimport { Panel, PanelHeader } from \"../../../components/panel/panel.jsx\";\nimport { postData } from \"../../../config/axios.jsx\";\n// import { postData } from \"../../../config/axios.jsx\";\nimport HeadBatalPenjualan from \"./HeadBatalPenjualan.jsx\";\nimport OtorisasiBatalJual from \"./OtorisasiBatalJual.jsx\";\n\nconst maptostate = (state) => {\n  return {\n    // no_faktur: state.penjualan.setNoFakturPenjualan,\n    setBatalPenjualan: state.penjualan.setBatalPenjualan,\n  };\n};\nclass FormBatalPenjualan extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoading: false,\n      databarang: [],\n      isLoadingOtorisasi: false,\n      columns: [\n        {\n          dataField: \"kode_barcode\",\n          text: \"Kode Barcode\",\n          footerAttrs: {\n            colSpan: \"1\",\n          },\n          footer: \"Total Barang \",\n        },\n        {\n          dataField: \"nama_barang\",\n          text: \"Nama Barang\",\n          footer: (columnData) => parseInt(this.props.setBatalPenjualan.length),\n        },\n\n        {\n          dataField: \"berat\",\n          text: \"Berat\",\n          formatter: (cell) => {\n            return <span>{parseInt(cell).toFixed(1)}</span>;\n          },\n          footer: (columnData) =>\n            parseInt(columnData.reduce((acc, item) => acc + item, 0)).toFixed(\n              1\n            ),\n        },\n        // {\n        //   dataField: \"nama_atribut\",\n        //   text: \"Nama Atribut\",\n        // },\n        // {\n        //   dataField: \"harga_atribut\",\n        //   text: \"Harga Atribut\",\n        //   formatter: (cell) => {\n        //     return <span>{parseInt(cell).toLocaleString(\"ID-id\")}</span>;\n        //   },\n        //   footer: (columnData) =>\n        //     parseInt(\n        //       columnData.reduce((acc, item) => acc + item, 0)\n        //     ).toLocaleString(\"id-ID\"),\n        // },\n\n        // {\n        //   dataField: \"berat_atribut\",\n        //   text: \"Berat Atribut\",\n        //   formatter: (cell) => {\n        //     return <span>{parseInt(cell).toFixed(1)}</span>;\n        //   },\n        //   footer: (columnData) =>\n        //     parseInt(columnData.reduce((acc, item) => acc + item, 0)).toFixed(\n        //       1\n        //     ),\n        // },\n\n        {\n          dataField: \"harga_jual\",\n          text: \"Harga Jual\",\n          formatter: (cell) => {\n            return <span>{parseInt(cell).toLocaleString(\"ID-id\")}</span>;\n          },\n          footer: (columnData) =>\n            parseInt(\n              columnData.reduce((acc, item) => acc + item, 0)\n            ).toLocaleString(\"id-ID\"),\n        },\n        {\n          dataField: \"harga_total\",\n          text: \"Harga Total\",\n          formatter: (cell) => {\n            return <span>{parseInt(cell).toLocaleString(\"ID-id\")}</span>;\n          },\n          footer: (columnData) =>\n            parseInt(\n              columnData.reduce((acc, item) => acc + item, 0)\n            ).toLocaleString(\"id-ID\"),\n        },\n      ],\n    };\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  handleSubmit(data) {\n    let hasil = {\n      no_faktur_group: data.no_faktur,\n      alasan: data.alasan,\n    };\n    localStorage.setItem(\"no_faktur_batal_jual\", JSON.stringify(hasil));\n    this.props.dispatch(showModal());\n  }\n  simpanTransaksiJual(data) {\n    this.setState({\n      isLoadingOtorisasi: true,\n    });\n    let data_batal_penjualan = JSON.parse(\n      localStorage.getItem(\"no_faktur_batal_jual\")\n    );\n\n    let hasil_btl_penjualan = {\n      no_faktur_group: data_batal_penjualan.no_faktur_group,\n    };\n    let hasil = {\n      user_id: data.username,\n      password: data.password,\n    };\n    postData(\"users/login\", hasil)\n      .then((resposn) => {\n        ToastNotification(\"success\", \"Otorisasi Berhasil\");\n        this.setState({\n          isLoadingOtorisasi: true,\n        });\n        postData(\"batalpenjualan/simpan\", hasil_btl_penjualan)\n          .then((res) => {\n            this.setState({ isLoadingOtorisasi: false });\n            this.props.dispatch(setBatalPenjualan([]));\n            this.props.dispatch(setNoFakturPenjualan([]));\n            ToastNotification(\"success\", res.data.message);\n          })\n          .then(() => {\n            this.props.dispatch(reset(\"HeadBatalPenjualan\"));\n            this.props.dispatch(reset(\"OtorisasiBatalJual\"));\n            this.props.dispatch(hideModal());\n          })\n          .catch((err) => {\n            this.setState({ isLoadingOtorisasi: false });\n            ToastNotification(\"info\", err.message);\n          });\n      })\n      .catch((err) => {\n        ToastNotification(\"info\", \"Username atau Password Salah\");\n        this.setState({\n          isLoadingOtorisasi: false,\n        });\n      });\n  }\n  render() {\n    return (\n      <div>\n        <ol className=\"breadcrumb float-xl-right\">\n          <li className=\"breadcrumb-item\">\n            <Link to=\"#\">Penjualan</Link>\n          </li>\n          <li className=\"breadcrumb-item active\">Batal Penjualan</li>\n        </ol>\n        <h1 className=\"page-header\">Batal Penjualan </h1>\n        <Panel>\n          <PanelHeader>Batal Penjualan</PanelHeader>\n          <br />\n          <div className=\"container\">\n            <HeadBatalPenjualan\n              isLoading={this.state.isLoading}\n              onSubmit={(data) => this.handleSubmit(data)}\n              data={this.state.databarang}\n              columns={this.state.columns}\n            />\n          </div>\n          <br />\n          <ModalGlobal\n            size=\"L\"\n            title=\"Otorisasi Pembatalan\"\n            content={\n              <OtorisasiBatalJual\n                isLoadingOtorisasi={this.state.isLoadingOtorisasi}\n                onSubmit={(data) => this.simpanTransaksiJual(data)}\n              />\n            }\n          />\n        </Panel>\n      </div>\n    );\n  }\n}\n\nexport default connect(maptostate, null)(FormBatalPenjualan);\n","const ValidasiBaralJual = (value) => {\n    const errors = {};\n    if (!value.kode_barcode) {\n        errors.kode_barcode = \"Kode Barcode Harus Diisi\";\n    }\n    if (!value.no_faktur) {\n        errors.no_faktur = \"No Faktur Harus Diisi\";\n    }\n    if (!value.alasan) {\n        errors.alasan = \"Alasan Harus Diisi\";\n    }\n    return errors;\n}\n\nexport default ValidasiBaralJual;\n\n\n"],"sourceRoot":""}