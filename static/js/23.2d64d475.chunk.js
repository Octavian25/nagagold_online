(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{1119:function(a,e,t){"use strict";t.r(e);var n=t(0),s=t.n(n),r=t(9),o=t(16),l=t(27),i=t.n(l),m=t(57),c=t(11),p=t(812),d=t.n(p),h=t(290),b=t(291),g=t(293),_=t(41),u=t(7),E=t(5),k=t(2),S=t(4),N=t(6);var f=a=>{const e={};return a.kode_dept||(e.kode_dept="Kode Jenis Harus Dipilih"),a.nama_barang||(e.nama_barang="Nama Barang Tidak Boleh Kosong"),a.berat||(e.berat="Berat Tidak Boleh Kosong"),a.harga||(e.harga="Harga Tidak Boleh Kosong"),a.harga_rata||(e.harga_rata="Harga Rata Tidak Boleh Kosong"),a.kondisi||(e.kondisi="Kondisi Harus Dipilih"),e},O=t(15),y=t.n(O);const B=Object(_.createNumberMask)({prefix:"Rp. ",locale:"kr-KO"});class j extends n.Component{constructor(a){super(a),this.state={isLoading:!1,harga_jual:!0,hargapergram:!0,ongkos:!0,total:!0}}componentDidMount(){this.props.dispatch(Object(u.ob)()),this.props.dispatch(Object(u.lb)()),this.props.dispatch(Object(u.qb)()),setTimeout(()=>{document.getElementById("kode_barcode").focus()},100)}getBarcode(a){clearTimeout(this.delay),this.delay=setTimeout(()=>{this.setState({searching:!0});let e=JSON.parse(localStorage.getItem("data_barang_pembelian_tmp"))||[];document.getElementById("kode_barcode").focus(),-1===e.findIndex(e=>e.kode_barcode===a)?Object(N.c)("pembelian/get/jual/"+a).then(a=>{0===a.data.length?(Object(S.e)("info","Data Yang Dicari Tidak Ada"),this.props.change("nama_barang",""),this.props.change("nama_atribut",""),this.props.change("berat_atribut",""),this.props.change("harga_atribut",""),this.props.change("berat",""),this.props.change("berat_nota",""),this.props.change("kode_dept",""),this.props.change("harga",""),this.props.change("harga_nota",""),this.setState({searching:!1})):(this.setState({searching:!1}),a.data.forEach((a,e)=>{let t=Object(k.g)("data_customer_pembelian_tmp");if(null===t||0===t.length){let e={kode_sales:a.kode_sales,jenis_pelanggan:"NONMEMBER"===a.kode_member?"NONMEMBER":"MEMBER",kode_customer:a.kode_member,nama_customer:a.nama_customer,alamat_customer:a.alamat_customer,no_hp:a.no_hp};document.getElementById("berat").focus(),localStorage.setItem("data_customer_pembelian_tmp",JSON.stringify(e)),this.props.change("nama_barang",a.nama_barang),this.props.change("nama_atribut",a.nama_atribut),this.props.change("berat_atribut",a.berat_atribut),this.props.change("harga_atribut",a.harga_atribut),this.props.change("berat_nota",a.berat),this.props.change("berat",a.berat),this.props.change("kode_dept",a.kode_dept),this.props.change("harga_nota",a.harga_jual),this.setState({harga_jual:!1,hargapergram:!1,ongkos:!1})}else{if(this.setState({searching:!1}),a.kode_member!==t.kode_customer)return Object(S.e)("info","Data Customer Berbeda"),!1;{let e={kode_sales:a.kode_sales,jenis_pelanggan:"NONMEMBER"===a.kode_member?"NONMEMBER":"MEMBER",kode_customer:a.kode_member,nama_customer:a.nama_customer,alamat_customer:a.alamat_customer,no_hp:a.no_hp};document.getElementById("berat").focus(),localStorage.setItem("data_customer_pembelian_tmp",JSON.stringify(e)),this.props.change("nama_barang",a.nama_barang),this.props.change("nama_atribut",a.nama_atribut),this.props.change("berat_atribut",a.berat_atribut),this.props.change("harga_atribut",a.harga_atribut),this.props.change("berat_nota",a.berat),this.props.change("berat",a.berat),this.props.change("kode_dept",a.kode_dept),this.props.change("harga_nota",a.harga_jual),this.setState({harga_jual:!1,hargapergram:!1,ongkos:!1,searching:!1})}}}))}).catch(a=>{console.log(a),this.props.change("nama_barang",""),this.props.change("nama_atribut",""),this.props.change("berat_atribut",""),this.props.change("harga_atribut",""),this.props.change("berat",""),this.props.change("kode_dept",""),this.props.change("harga",""),Object(S.e)("info","Data Yang Dicari Tidak Ada"),this.setState({searching:!1})}):(this.props.change("nama_barang",""),this.props.change("nama_atribut",""),this.props.change("berat_atribut",""),this.props.change("harga_atribut",""),this.props.change("berat",""),this.props.change("kode_dept",""),this.props.change("harga",""),Object(S.e)("info","Kode Barcode Sudah Ada Dalam Table"),this.setState({searching:!1}))},1500)}hitungTotal(){this.props.change("harga_rata",this.props.harga_rata)}setValue(a){console.log(a),""===a&&this.change("berat_nota",1)}render(){return s.a.createElement("form",{onSubmit:this.props.handleSubmit,onKeyPress:a=>{"Enter"===a.key&&a.preventDefault()},autoComplete:"off"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-12 col-md-3"},s.a.createElement(h.a,{onChange:a=>this.getBarcode(a.target.value),id:"kode_barcode",name:"kode_barcode",label:"Kode Barcode",type:"text",normalize:a=>a.replace(/[^\d]/g,""),placeholder:"Masukan Kode Barcode",component:E.e})),s.a.createElement("div",{className:"col-12 col-md-3"},s.a.createElement(h.a,{label:"Kode Jenis",name:"kode_dept",options:this.props.datajenis.filter(a=>void 0!==a.kode_dept).map(a=>{return{value:a.kode_dept,name:a.kode_dept+" - "+a.nama_dept}||[]}),placeholder:"Silahkan Pilih Kode Jenis",component:E.f})),s.a.createElement("div",{className:"col-12 col-md-3"},s.a.createElement(h.a,{name:"nama_barang",label:"Nama Barang",type:"text",placeholder:"Masukan Nama Barang",component:E.e})),s.a.createElement("div",{className:"col-12 col-md-3"},s.a.createElement(h.a,{name:"berat_nota",label:"Berat Nota",type:"number",placeholder:"Masukan Berat Nota",component:E.e})),s.a.createElement("div",{className:"col-12 col-md-4"},s.a.createElement(h.a,{id:"berat",name:"berat",label:"Berat",type:"number",onChange:this.hitungTotal(),placeholder:"Masukan Berat",component:E.e})),s.a.createElement("div",{className:"col-12 col-md-4"},s.a.createElement(h.a,Object.assign({name:"harga_nota",label:"Harga Nota",type:"telp"},B,{placeholder:"Masukan Harga Nota",component:E.e}))),s.a.createElement("div",{className:"col-12 col-md-4"},s.a.createElement(h.a,Object.assign({name:"harga",label:"Harga Beli",type:"telp",onChange:this.hitungTotal()},B,{placeholder:"Masukan Harga Beli",component:E.e}))),s.a.createElement("div",{className:"col-12 col-md-4"},s.a.createElement(h.a,Object.assign({name:"harga_rata",label:"Harga Rata",type:"telp",readOnly:!0},B,{placeholder:"Masukan Harga Rata",component:E.e}))),s.a.createElement("div",{className:"col-12 col-md-4"},s.a.createElement(h.a,{name:"kondisi",label:"Kondisi",options:this.props.datakondisi.filter(a=>void 0!==a.kondisi_barang).map(a=>{return{value:a.kondisi_barang,name:a.kondisi_barang}||[]}),placeholder:"Masukan Kondisi",component:E.f})),s.a.createElement("div",{className:"col-12 col-md-4"},s.a.createElement("label",null,"\xa0"),s.a.createElement("button",{className:"btn btn-primary btn-block",disabled:this.props.isLoadingSimpanBarang,type:"submit"},this.props.isLoadingSimpanBarang?s.a.createElement(s.a.Fragment,null,s.a.createElement("i",{className:"fas fa-spinner fa-spin"})," \xa0 Sedang Menyimpan"):"Simpan Barang"))),this.state.searching?s.a.createElement(y.a,{loading:!0,background:"rgba(0, 0, 0, 0.35)",loaderColor:"rgba(94, 147, 117, 1)"}):null)}}j=Object(b.a)({form:"ModalTambahBarang",enableReinitialize:!0,validate:f})(j);const v=Object(g.a)("ModalTambahBarang");var M=Object(r.b)(a=>{const e=v(a,"harga","berat"),t=e.harga,n=e.berat;return{setBarangPembelian:a.penjualan.setBarangPembelian,harga_rata:parseFloat(t||0)/parseFloat(n||0)||0,DataSales:a.datamaster.getDataSales,datajenis:a.datamaster.getDataJenis,datakondisi:a.datamaster.getKondisiPembelian}})(j),I=t(14),x=t(94);const L=[{value:"MEMBER",name:"MEMBER"},{value:"NONMEMBER",name:"NON MEMBER"}];class C extends n.Component{constructor(a){super(a),this.state={showMember:!0}}componentDidMount(){this.props.dispatch(Object(u.ob)());let a=null===localStorage.getItem("data_customer_pembelian_tmp")?[]:JSON.parse(localStorage.getItem("data_customer_pembelian_tmp")||[]);a&&"MEMBER"===a.jenis_pelanggan?this.setState({showMember:!1}):this.setState({showMember:!0})}changemember(a){"MEMBER"===a?this.setState({showMember:!1}):(this.props.change("kode_customer",""),this.props.change("nama_customer",""),this.props.change("no_hp",""),this.props.change("alamat_customer",""),this.setState({showMember:!0}))}getMember(a){Object(N.c)("member/get/by-kode-member/"+a).then(a=>{0===a.data.length?Object(S.e)("info","Member Yang Anda Masukan Tidak Ada !!!"):a.data.forEach((a,e)=>{this.props.change("nama_customer",a.nama_customer),this.props.change("no_hp",a.no_hp),this.props.change("alamat_customer",a.alamat_customer)})}).catch(a=>{Object(S.e)("info","Terjadi Kesalahan SIlahkan Ulangi Kembali !!!")})}render(){return s.a.createElement("form",{onSubmit:this.props.handleSubmit,onKeyPress:a=>{"Enter"===a.key&&a.preventDefault()},autoComplete:"off"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-4"},s.a.createElement(h.a,{tabIndex:"1",name:"kode_sales",label:"Pilih Kode Sales",placeholder:"Masukan Kode Sales",options:this.props.DataSales.filter(a=>void 0!==a.kode_sales).map(a=>{return{value:a.kode_sales,name:a.kode_sales}}),component:E.f})),s.a.createElement("div",{className:"col-4"},s.a.createElement(h.a,{tabIndex:"2",name:"jenis_pelanggan",label:"Pilih Pelanggan",onChange:a=>this.changemember(a),placeholder:"Silahkan Pilih Pelanggan",options:L,component:E.f})),s.a.createElement("div",{className:"col-4"},s.a.createElement(h.a,{tabIndex:"3",name:"kode_customer",onChange:a=>this.getMember(a.target.value),component:E.e,type:"text",readOnly:this.state.showMember,label:"Kode Customer",placeholder:"Masukan Kode Customer"})),s.a.createElement("div",{className:"col-4"},s.a.createElement(h.a,{tabIndex:"4",name:"nama_customer",component:E.e,type:"text",label:"Nama Customer",placeholder:"Masukan Nama Customer"})),s.a.createElement("div",{className:"col-4"},s.a.createElement(h.a,{tabIndex:"5",name:"no_hp",component:E.e,type:"number",label:"No Hp",placeholder:"Masukan No Hp"})),s.a.createElement("div",{className:"col-4"},s.a.createElement(h.a,{tabIndex:"6",name:"alamat_customer",component:E.e,type:"textarea",label:"Alamat Customer",placeholder:"Masukan Alamat Customer"}))),s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-6 text-left"},s.a.createElement("button",{onClick:()=>this.props.back(),className:"btn btn-secondary",type:"button"},"Kembali")),s.a.createElement("div",{className:"col-6 text-right"},s.a.createElement("button",{className:"btn btn-primary",type:"submit",disabled:this.props.isLoading},this.props.isLoading?s.a.createElement(s.a.Fragment,null,s.a.createElement("i",{className:"fas fa-spinner fa-spin"})," \xa0 Selesai Pembelian"):"Selesai Pembelian"))))}}C=Object(b.a)({form:"ModalDataCustomer",enableReinitialize:!0,validate:x.a})(C);var D=Object(r.b)(a=>{let e=null===localStorage.getItem("data_customer_pembelian_tmp")?[]:JSON.parse(localStorage.getItem("data_customer_pembelian_tmp")||[]);return{initialValues:{kode_sales:e.kode_sales||"",jenis_pelanggan:e.jenis_pelanggan||"",kode_customer:e.kode_customer||"",nama_customer:e.nama_customer||"",no_hp:e.no_hp||"",alamat_customer:e.alamat_customer||""},DataSales:a.datamaster.getDataSales}},null)(C),P=t(47),K=t(42);const T=Object(_.createNumberMask)({prefix:"Rp. ",locale:"kr-KO"}),J=[{value:"CASH",name:"CASH"}];class w extends n.Component{constructor(...a){super(...a),this.state={}}componentDidMount(){this.props.dispatch(Object(u.ob)());let a=JSON.parse(localStorage.getItem("data_barang_pembelian_tmp")),e=0;a.forEach((a,t)=>{e+=a.harga,this.props.change("grand_total_pembayaran",e)}),this.props.change("jenis","CASH"),setTimeout(()=>{document.getElementById("cash_trx_pembelian").focus()},100)}hitungTotal(){this.props.change("kembali",this.props.kembali)}render(){return s.a.createElement("form",{onSubmit:this.props.handleSubmit,onKeyPress:a=>{"Enter"===a.key&&a.preventDefault()},autoComplete:"off"},s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-6"},s.a.createElement(h.a,Object.assign({name:"grand_total_pembayaran",component:E.e,type:"text",onChange:this.hitungTotal(),readOnly:!0},T,{label:"Grand Total Pembayaran",placeholder:"Masukan Grand Total"}))),s.a.createElement("div",{className:"col-6"},s.a.createElement(h.a,{name:"jenis",label:"Pilih Jenis Bayar",placeholder:"Pilih Jenis Pembayaran",options:J,component:E.f})),s.a.createElement("div",{className:"col-6"},s.a.createElement(h.a,Object.assign({tabIndex:"1",name:"cash",id:"cash_trx_pembelian",component:E.e,type:"text",label:"Cash",onChange:this.hitungTotal()},T,{normalize:P.c,placeholder:"Masukan Total Pembayaran"}))),s.a.createElement("div",{className:"col-6"},s.a.createElement(h.a,Object.assign({name:"kembali",component:E.e,type:"text",readOnly:!0,label:"Kembali"},T,{normalize:P.c,placeholder:"Kembalian"})))),s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-6 text-left"},s.a.createElement("button",{onClick:()=>this.props.back(),className:"btn btn-secondary",type:"button"},"Kembali")),s.a.createElement("div",{className:"col-6 text-right"},s.a.createElement("button",{tabIndex:"2",className:"btn btn-primary ",disabled:this.props.isLoading,type:"submit"},this.props.isLoading?s.a.createElement(s.a.Fragment,null,s.a.createElement("i",{className:"fas fa-spinner fa-spin"})," \xa0 Sedang Diproses"):"Bayar Sekarang"))))}}w=Object(b.a)({form:"ModalPembayaran",enableReinitialize:!0,validate:K.a})(w);const F=Object(g.a)("ModalPembayaran");var R=Object(r.b)(a=>{const e=F(a,"grand_total_pembayaran","cash"),t=e.grand_total_pembayaran,n=e.cash;return{kembali:parseFloat(t||0)-parseFloat(n||0)}})(w),A=t(18);class H extends n.Component{constructor(a){super(a),this.state={isLoading:!1,harga_jual:!0,hargapergram:!0,ongkos:!0,total:!0}}componentDidMount(){this.props.dispatch(Object(u.ob)()),this.props.dispatch(Object(u.lb)()),this.props.dispatch(Object(u.qb)())}render(){return s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-12"},s.a.createElement(A.a,{keyField:"nama_barang",exportCsv:!1,data:0===this.props.setBarangPembelian.length?JSON.parse(localStorage.getItem("data_barang_pembelian_tmp")):this.props.setBarangPembelian,columns:this.props.columns,empty:!0,textEmpty:"Data Barang Kosong"})))}}H=Object(b.a)({form:"LihatDataBarang",enableReinitialize:!0,validate:f})(H);const z=Object(g.a)("LihatDataBarang");var q=Object(r.b)(a=>{const e=z(a,"harga","berat"),t=e.harga,n=e.berat;return{setBarangPembelian:a.penjualan.setBarangPembelian,harga_rata:parseFloat(t||0)/parseFloat(n||0)||0,DataSales:a.datamaster.getDataSales,datajenis:a.datamaster.getDataJenis,datakondisi:a.datamaster.getKondisiPembelian}})(H),U=t(705),G=t(39);e.default=Object(r.b)(a=>({setBarangPembelian:a.penjualan.setBarangPembelian}),null)(class extends s.a.Component{constructor(a){super(a),this.state={isLoading:!1,step:0,isLoadingBatal:!1,isLoadingSimanBeli:!1,isLoadingDataCustomer:!1,isLoadingSimpanBarang:!1,columns:[{dataField:"kode_barcode",text:"Kode Barcode",footerAttrs:{colSpan:"3"},footer:"Total"},{dataField:"nama_barang",text:"Nama Barang"},{dataField:"kode_dept",text:"Jenis"},{dataField:"harga_nota",text:"Harga Nota",formatter:a=>s.a.createElement("span",null,parseInt(a).toLocaleString("kr-KO")),footer:a=>parseInt(a.reduce((a,e)=>a+e,0)).toLocaleString("kr-KO")},{dataField:"berat_nota",text:"Berat Nota",formatter:a=>s.a.createElement("span",null,parseFloat(a).toFixed(3)),footer:a=>parseFloat(a.reduce((a,e)=>a+e,0)).toFixed(3)},{dataField:"berat",text:"Berat",formatter:a=>s.a.createElement("span",null,parseFloat(a).toFixed(3)),footer:a=>parseFloat(a.reduce((a,e)=>a+e,0)).toFixed(3)},{dataField:"harga",text:"Harga Beli",formatter:a=>s.a.createElement("span",null,parseInt(a).toLocaleString("kr-KO")),footer:a=>parseInt(a.reduce((a,e)=>a+e,0)).toLocaleString("kr-KO")},{dataField:"kondisi",text:"Kondisi",footer:""},{dataField:"action",text:"Action",csvExport:!1,headerClasses:"text-center",formatter:(a,e,t)=>s.a.createElement("div",{className:"row text-center"},s.a.createElement("div",{className:"col-12"},s.a.createElement("button",{type:"button",onClick:()=>this.hapusdata(t),className:"btn btn-danger mr-3"},s.a.createElement("i",{className:"fa fa-trash"})))),footer:""}]}}hapusdata(a){i.a.fire({title:"Anda Yakin !!",text:"Ingin Menghapus Data Ini ?",icon:"warning",position:"top-center",cancelButtonText:"Tidak",showCancelButton:!0,confirmButtonText:"OK",showConfirmButton:!0}).then(e=>{if(e.isConfirmed){let e=JSON.parse(localStorage.getItem("data_barang_pembelian_tmp"));e.splice(a,1),localStorage.setItem("data_barang_pembelian_tmp",JSON.stringify(e)),0===e.length&&this.setState({step:0}),this.props.dispatch(Object(m.k)(e))}})}simpanBarang(a){console.log(a);let e={kode_barcode:void 0===a.kode_barcode?"-":a.kode_barcode,nama_barang:a.nama_barang,kondisi:a.kondisi,kode_dept:a.kode_dept,harga_rata:parseInt(a.harga_rata),harga_nota:parseInt(a.harga_nota)||0,harga:parseInt(a.harga),berat_nota:parseFloat(a.berat_nota)||0,berat:parseFloat(a.berat)};if(this.setState({hasil:e}),console.log(this.state.hasil),a.harga_nota<a.harga)return Object(S.e)("info","Harga Melebihi Nota"),this.props.dispatch(Object(u.xb)()),!1;this.sendRequest(a)}sendRequest(a){this.setState({isLoadingSimpanBarang:!0});let e={kode_barcode:void 0===a.kode_barcode?"-":a.kode_barcode,nama_barang:a.nama_barang,kondisi:a.kondisi,kode_dept:a.kode_dept,harga_rata:parseInt(a.harga_rata),harga_nota:parseInt(a.harga_nota)||0,harga:parseInt(a.harga),berat_nota:parseFloat(a.berat_nota)||0,berat:parseFloat(a.berat)};if(void 0===a.kondisi)return!1;let t=JSON.parse(localStorage.getItem("data_barang_pembelian_tmp"))||[];document.getElementById("kode_barcode").focus(),-1===t.findIndex(e=>e.kode_barcode===a.kode_barcode)?(t.push(e),Object(S.e)("success","Barang Berhasil Ditambahkan"),localStorage.setItem("data_barang_pembelian_tmp",JSON.stringify(t)),this.props.dispatch(Object(m.k)(t)),this.props.dispatch(Object(I.d)("ModalTambahBarang")),setTimeout(()=>{this.setState({isLoadingSimpanBarang:!1})},200)):(setTimeout(()=>{this.setState({isLoadingSimpanBarang:!1})},200),document.getElementById("kode_barcode").focus(),Object(S.e)("info","Barang Sudah Ada Di Tabel"))}cekOtorisasi(a){let e={user_id:a.username,password:a.password,kategori:"PEMBELIAN",description:"PEMBELIAN DI ATAS NOTA",keterangan:a.keterangan.toUpperCase()||"-"};Object(N.f)("authorization",e).then(a=>{this.sendRequest(this.state.hasil),Object(S.e)("success",a.data.message),localStorage.setItem("otorisasi","false"),this.setState({otorisasi:!0}),this.props.dispatch(Object(u.wb)())}).catch(a=>{this.setState({otorisasi:!1}),Object(S.e)("info","Otorisasi Gagal..")})}handleSubmit(a){this.setState({isLoading:!0}),localStorage.setItem("data_customer_pembelian_tmp",JSON.stringify(a)),setTimeout(()=>{let a=JSON.parse(localStorage.getItem("data_barang_pembelian_tmp")),e=0;a.forEach((a,t)=>{e+=a.harga});let t={jenis:"CASH",jumlah_rp:e},n=JSON.parse(localStorage.getItem("data_customer_pembelian_tmp")),s=JSON.parse(localStorage.getItem("data_barang_pembelian_tmp")),r=[];s.forEach((a,e)=>{let t={kode_dept:a.kode_dept,nama_barang:a.nama_barang,berat_nota:a.berat_nota,harga:a.harga,berat:a.berat,harga_nota:a.harga_nota,kondisi:a.kondisi,kode_barcode:a.kode_barcode};r.push(t)});let o={kode_sales:n.kode_sales,nama_customer:n.nama_customer,kode_member:"NONMEMBER"===n.jenis_pelanggan?n.jenis_pelanggan:n.kode_customer,alamat_customer:n.alamat_customer,no_hp:n.no_hp,detail_barang:r,pembayaran:[t]};Object(N.e)("pembelian/simpan",o).then(a=>{Object(S.e)("success",a.data.message)}).then(()=>{this.setState({isLoading:!1})}).then(()=>{this.props.dispatch(Object(I.d)("ModalPembayaran"))}).then(()=>{localStorage.setItem("data_customer_pembelian_tmp",JSON.stringify([])),localStorage.setItem("data_barang_pembelian_tmp",JSON.stringify([]))}).then(()=>{this.props.dispatch(Object(m.k)([])),this.setState({step:0})}).catch(a=>this.errorhandling(a))},500)}back(a){this.setState({step:a})}simpanPembayaran(a){if("CASH"!==a.jenis&&a.kembali.replace(/[^0-9]/g,"")-a.cash<0)return Object(S.e)("info","Pembayaran tidak boleh lebih dari sisa"),!1;this.setState({isLoading:!0});let e=JSON.parse(localStorage.getItem("data_barang_pembelian_tmp")),t=0;e.forEach((a,e)=>{t+=a.harga});let n=0;n=a.cash>a.grand_total_pembayaran?a.grand_total_pembayaran:a.cash;let s={jenis:a.jenis,jumlah_rp:n};if(parseInt(a.cash)<parseInt(a.grand_total_pembayaran)){let e=parseInt(a.grand_total_pembayaran)-parseInt(a.cash);return Object(S.e)("info","Pembayaran Masih Kurang Rp."+parseInt(e).toLocaleString("kr-KO")),this.setState({isLoading:!1}),!1}let r=JSON.parse(localStorage.getItem("data_customer_pembelian_tmp")),o=JSON.parse(localStorage.getItem("data_barang_pembelian_tmp")),l=[];o.forEach((a,e)=>{let t={kode_dept:a.kode_dept,nama_barang:a.nama_barang,berat_nota:a.berat_nota,harga:a.harga,berat:a.berat,harga_nota:a.harga_nota,kondisi:a.kondisi,kode_barcode:a.kode_barcode};l.push(t)});let i={kode_sales:r.kode_sales,nama_customer:r.nama_customer,kode_member:"NONMEMBER"===r.jenis_pelanggan?r.jenis_pelanggan:r.kode_customer,alamat_customer:r.alamat_customer,no_hp:r.no_hp,detail_barang:l,pembayaran:[s]};Object(N.e)("pembelian/simpan",i).then(a=>{Object(S.e)("success",a.data.message)}).then(()=>{this.setState({isLoading:!1})}).then(()=>{this.props.dispatch(Object(I.d)("ModalPembayaran"))}).then(()=>{localStorage.setItem("data_customer_pembelian_tmp",JSON.stringify([])),localStorage.setItem("data_barang_pembelian_tmp",JSON.stringify([]))}).then(()=>{this.props.dispatch(Object(m.k)([])),this.setState({step:0})}).catch(a=>this.errorhandling(a))}componentWillUnmount(){localStorage.setItem("data_customer_pembelian_tmp",JSON.stringify([])),localStorage.setItem("data_barang_pembelian_tmp",JSON.stringify([]))}errorhandling(a){this.setState({isLoading:!1}),Object(S.e)("info","Transaksi Gagal Disimpan")}nextLihatDataBarang(){if(null==localStorage.getItem("data_barang_pembelian_tmp")||0===JSON.parse(localStorage.getItem("data_barang_pembelian_tmp")).length)return Object(S.e)("info","Data Barang Tidak Boleh Kosong"),!1;this.setState({step:1})}btlPembelian(){this.setState({isLoadingBatal:!0}),setTimeout(()=>{localStorage.setItem("data_customer_pembelian_tmp",JSON.stringify([])),this.props.dispatch(Object(m.k)([])),localStorage.setItem("data_barang_pembelian_tmp",JSON.stringify([])),this.setState({isLoadingBatal:!1})},500)}render(){return s.a.createElement("div",null,s.a.createElement("ol",{className:"breadcrumb float-xl-right"},s.a.createElement("li",{className:"breadcrumb-item"},s.a.createElement(o.b,{to:"#"},"Pembelian")),s.a.createElement("li",{className:"breadcrumb-item active"},"Transaksi Pembelian")),s.a.createElement("h1",{className:"page-header"},"Transaksi Pembelian "),s.a.createElement(c.a,null,s.a.createElement(c.c,null,"Transaksi Pembelian"),s.a.createElement("br",null),s.a.createElement(d.a,{steps:[{title:"Input Barang"},{title:"Lihat Data Barang"},{title:"Data Customer"}],activeStep:this.state.step}),s.a.createElement("br",null),s.a.createElement("div",{className:"row"},0===this.state.step?s.a.createElement("div",{className:"col-12"},s.a.createElement("div",{className:"container"},s.a.createElement(M,{isLoadingSimpanBarang:this.state.isLoadingSimpanBarang,columns:this.state.columns,onSubmit:a=>this.simpanBarang(a)}),s.a.createElement("br",null),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-6 text-left"},s.a.createElement("button",{onClick:()=>this.btlPembelian(),className:"btn btn-warning",disabled:this.state.isLoadingBatal,type:"button"},this.state.isLoadingBatal?s.a.createElement(s.a.Fragment,null,s.a.createElement("i",{className:"fas fa-spinner fa-spin"})," \xa0 Reset Data"):"Reset Data")),s.a.createElement("div",{className:"col-6 text-right"},s.a.createElement("button",{className:"btn btn-primary",onClick:()=>this.nextLihatDataBarang()}," ","Next"," "))))):1===this.state.step?s.a.createElement("div",{className:"col-12"},s.a.createElement("div",{className:"container"},s.a.createElement(q,{isLoadingSimpanBarang:this.state.isLoadingSimpanBarang,columns:this.state.columns,onSubmit:a=>this.simpanBarang(a)}),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-6 text-left"},s.a.createElement("button",{onClick:()=>this.back(0),className:"btn btn-secondary",type:"button"},"Kembali")),s.a.createElement("div",{className:"col-6 text-right"},s.a.createElement("button",{className:"btn btn-primary",onClick:()=>this.setState({step:2})}," ","Next"," "))))):2===this.state.step?s.a.createElement("div",{className:"col-12"},s.a.createElement("div",{className:"container"},s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement(D,{isLoading:this.state.isLoading,back:()=>this.back(1),isLoadingDataCustomer:this.state.isLoadingDataCustomer,onSubmit:a=>this.handleSubmit(a)}))):s.a.createElement("div",{className:"col-12"},s.a.createElement("div",{className:"container"},s.a.createElement(R,{isLoading:this.state.isLoading,onSubmit:a=>this.simpanPembayaran(a),back:()=>this.back(2)})))),s.a.createElement("br",null)),s.a.createElement(G.a,{title:"Otorisasi Pembelian",content:s.a.createElement(U.a,{keterangan:!0,onSubmit:a=>this.cekOtorisasi(a)})}))}})},705:function(a,e,t){"use strict";var n=t(0),s=t.n(n),r=t(9),o=t(290),l=t(291),i=t(5);class m extends n.Component{constructor(a){super(a),this.state={}}componentDidMount(){setTimeout(()=>{document.getElementById("username").focus()},100)}render(){return s.a.createElement("form",{onSubmit:this.props.handleSubmit,onKeyPress:a=>{"Enter"===a.key&&a.preventDefault()},autoComplete:"off"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-lg-6"},s.a.createElement(o.a,{name:"no_faktur_group",component:i.b,type:"hidden"}),s.a.createElement(o.a,{name:"alasan",component:i.b,type:"hidden"}),s.a.createElement(o.a,{id:"username",name:"username",component:i.e,type:"text",label:"Username",placeholder:"Masukan Username"})),s.a.createElement("div",{className:"col-lg-6"},s.a.createElement(o.a,{name:"password",component:i.e,type:"password",label:"Password",placeholder:"Masukan Password"})),s.a.createElement("div",{className:this.props.keterangan?"col-lg-12":"col-lg-12 d-none"},s.a.createElement(o.a,{name:"keterangan",component:i.e,label:"Keterangan",placeholder:"Masukan Keterangan"})),s.a.createElement("div",{className:"col-lg-12"},s.a.createElement("label",null," \xa0 "),s.a.createElement("button",{type:"submit",name:"type_btn",className:"btn btn-primary btn-block",disabled:this.props.isLoadingOtorisasi},this.props.isLoadingOtorisasi?s.a.createElement(s.a.Fragment,null,s.a.createElement("i",{className:"fas fa-spinner fa-spin"})," \xa0 Otorisasi"):"Otorisasi"))))}}m=Object(l.a)({form:"OtorisasiHancur",enableReinitialize:!0})(m),e.a=Object(r.b)(null)(m)}}]);
//# sourceMappingURL=23.2d64d475.chunk.js.map