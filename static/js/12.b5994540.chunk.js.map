{"version":3,"sources":["pages/Penjualan/BatalPenjualan/HeadBatalPenjualan.jsx","pages/Penjualan/BatalPenjualan/OtorisasiBatalJual.jsx","pages/Penjualan/BatalPenjualan/FormBatalPenjualan.jsx","Validasi/Penjualan/ValidasiBaralJual.jsx"],"names":["HeadBatalPenjualan","Component","constructor","props","super","this","state","isloadingFaktur","isLoading","isLoadingBatal","date","Date","getBarcode","value","setState","getData","then","res","data","length","ToastNotification","hasil","no_faktur_group","forEach","item","index","push","_id","change","dispatch","setNoFakturPenjualan","catch","err","getDetailFaktur","no_faktur_group_selected","postData","setBatalPenjualan","componentDidMount","getDataKondisiBarang","btlPenjualan","setTimeout","reset","render","expandRow","renderer","row","react_default","a","createElement","nama_atribut","parseInt","harga_atribut","toLocaleString","ongkos","onSubmit","handleSubmit","onKeyPress","e","key","preventDefault","autoComplete","className","Field","onChange","target","name","component","ReanderField","type","label","placeholder","id","options","no_faktur","map","ReanderSelect","datakondisi","filter","list","undefined","kondisi_barang","onClick","disabled","Fragment","tabel","keyField","exportCsv","columns","empty","textEmpty","reduxForm","form","enableReinitialize","validate","ValidasiBaralJual","connect","penjualan","datamaster","OtorisasiBatalJual","HiidenFiled","isLoadingOtorisasi","React","databarang","dataField","text","footerAttrs","colSpan","footer","columnData","formatter","cell","toFixed","reduce","acc","bind","alasan","localStorage","setItem","JSON","stringify","showModal","simpanTransaksiJual","hasil_btl_penjualan","parse","getItem","user_id","username","password","resposn","message","hideModal","react_router_dom","to","panel","BatalPenjualan_HeadBatalPenjualan","ModalGlobal","size","title","content","BatalPenjualan_OtorisasiBatalJual","errors","kode_barcode"],"mappings":"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","file":"static/js/12.b5994540.chunk.js","sourcesContent":["import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { Field, reduxForm, reset } from \"redux-form\";\r\nimport { getDataKondisiBarang } from \"../../../actions/datamaster_action\";\r\nimport { ReanderField, ReanderSelect } from \"../../../components/helpers/field\";\r\nimport { ToastNotification } from \"../../../components/helpers/notification\";\r\nimport Tabel from \"../../../components/helpers/tabel\";\r\nimport { getData, postData } from \"../../../config/axios\";\r\n// import { SkeletonLoading } from \"../../../components/helpers/field.jsx\";\r\nimport ValidasiBaralJual from \"../../../Validasi/Penjualan/ValidasiBaralJual\";\r\nimport {\r\n  setBatalPenjualan,\r\n  setNoFakturPenjualan,\r\n} from \"../../../actions/penjualan_action\";\r\n\r\nconst maptostate = (state) => {\r\n  return {\r\n    no_faktur: state.penjualan.setNoFakturPenjualan,\r\n    setBatalPenjualan: state.penjualan.setBatalPenjualan,\r\n    datakondisi: state.datamaster.getDataKondisiBarang,\r\n  };\r\n};\r\nclass HeadBatalPenjualan extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      // no_faktur: [],\r\n      isloadingFaktur: false,\r\n      isLoading: false,\r\n      isLoadingBatal: false,\r\n      date: new Date(),\r\n    };\r\n  }\r\n\r\n  getBarcode(value) {\r\n    this.setState({ isloadingFaktur: true });\r\n    getData(\"batalpenjualan/get/by-kode-barcode/\" + value)\r\n      .then((res) => {\r\n        if (res.data.length === 0) {\r\n          ToastNotification(\"info\", \"Kode Barcode Yang Anda Cari Tidak Ada\");\r\n          this.setState({\r\n            isloadingFaktur: false,\r\n          });\r\n        } else {\r\n          let hasil = [{ no_faktur_group: \"Silahkan Pilih\" }];\r\n          res.data.forEach((item, index) => {\r\n            hasil.push({\r\n              no_faktur_group: item._id.no_faktur_group,\r\n            });\r\n            // console.log(item._id.no_faktur_group);\r\n            this.props.change(\"no_faktur\", \"Silahkan Pilih\");\r\n            this.setState({\r\n              isloadingFaktur: false,\r\n            });\r\n            this.props.dispatch(setNoFakturPenjualan(hasil));\r\n          });\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        this.setState({\r\n          isloadingFaktur: false,\r\n        });\r\n        ToastNotification(\"info\", \"Kode Barcode Yang Anda Cari Tidak Ada\");\r\n      });\r\n  }\r\n  getDetailFaktur() {\r\n    this.setState({ isLoading: true });\r\n    let data = {\r\n      no_faktur_group: this.state.no_faktur_group_selected,\r\n    };\r\n    postData(\"batalpenjualan/get/by-faktur\", data)\r\n      .then((res) => {\r\n        if (res.data.length === 0) {\r\n          ToastNotification(\"info\", \"Data Transaksi Tersbut Tidak Ada\");\r\n          this.setState({ isLoading: false });\r\n        } else {\r\n          this.props.dispatch(setBatalPenjualan(res.data));\r\n          this.setState({\r\n            isLoading: false,\r\n          });\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        ToastNotification(\"info\", \"Data Transaksi Tersbut Tidak Ada\");\r\n        this.setState({ isLoading: false });\r\n      });\r\n  }\r\n  componentDidMount() {\r\n    this.props.dispatch(getDataKondisiBarang());\r\n  }\r\n  btlPenjualan() {\r\n    this.setState({ isLoadingBatal: true });\r\n    setTimeout(() => {\r\n      this.props.dispatch(reset(\"HeadBatalPenjualan\"));\r\n      this.setState({\r\n        isLoadingBatal: false,\r\n        no_faktur_group_selected: \"\",\r\n      });\r\n      this.props.dispatch(setNoFakturPenjualan([]));\r\n      this.props.dispatch(setBatalPenjualan([]));\r\n    }, 500);\r\n  }\r\n  render() {\r\n    const expandRow = {\r\n      renderer: (row) => (\r\n        <div>\r\n          Nama Atribut : {row.nama_atribut} <br />\r\n          Harga Atribut : {parseInt(row.harga_atribut).toLocaleString(\r\n            \"ID-id\"\r\n          )}{\" \"}\r\n          <br />\r\n          Ongkos : {parseInt(row.ongkos).toLocaleString(\"ID-id\")} <br />\r\n        </div>\r\n      ),\r\n    };\r\n    return (\r\n      <form\r\n        onSubmit={this.props.handleSubmit}\r\n        onKeyPress={(e) => {\r\n          e.key === \"Enter\" && e.preventDefault();\r\n        }}\r\n        autoComplete=\"off\"\r\n      >\r\n        <div className=\"row\">\r\n          <div className=\"col-lg-3\">\r\n            <Field\r\n              onChange={(e) => this.getBarcode(e.target.value)}\r\n              name=\"kode_barcode\"\r\n              component={ReanderField}\r\n              type=\"text\"\r\n              label=\"Kode Barcode\"\r\n              placeholder=\"Masukan Kode Barcode\"\r\n            />\r\n          </div>\r\n          <div className=\"col-lg-3\">\r\n            <Field\r\n              label=\"No Faktur\"\r\n              name=\"no_faktur\"\r\n              id=\"no_faktur\"\r\n              onChange={(e) => this.setState({ no_faktur_group_selected: e })}\r\n              options={this.props.no_faktur.map((row) => {\r\n                let data = {\r\n                  value: row.no_faktur_group,\r\n                  name: row.no_faktur_group,\r\n                };\r\n                return data || [];\r\n              })}\r\n              placeholder={\"Silahkan Pilih No Faktur\"}\r\n              component={ReanderSelect}\r\n            />\r\n          </div>\r\n          <div className=\"col-lg-3\">\r\n            <Field\r\n              label=\"Alasan\"\r\n              name=\"alasan\"\r\n              options={this.props.datakondisi\r\n                .filter((list) => list.kondisi_barang !== undefined)\r\n                .map((list) => {\r\n                  let data = {\r\n                    value: list.kondisi_barang,\r\n                    name: list.kondisi_barang,\r\n                  };\r\n                  return data;\r\n                })}\r\n              placeholder={\"Silahkan Pilih Alasan\"}\r\n              component={ReanderSelect}\r\n            />\r\n          </div>\r\n          <div className=\"col-lg-3\">\r\n            <div className=\"text-right\">\r\n              <label>&nbsp;</label>\r\n              <button\r\n                type=\"button\"\r\n                onClick={() => this.getDetailFaktur()}\r\n                name=\"type_btn\"\r\n                className=\"btn btn-primary btn-block\"\r\n                disabled={this.state.isLoading}\r\n              >\r\n                {this.state.isLoading ? (\r\n                  <>\r\n                    <i className=\"fas fa-spinner fa-spin\"></i> &nbsp; Sedang\r\n                    Mencari\r\n                  </>\r\n                ) : (\r\n                  \"Cari Data\"\r\n                )}\r\n              </button>\r\n            </div>\r\n          </div>\r\n          <div className=\"col-lg-12\">\r\n            <Tabel\r\n              keyField=\"kode_barcode\"\r\n              exportCsv={false}\r\n              data={this.props.setBatalPenjualan || []}\r\n              columns={this.props.columns}\r\n              empty={true}\r\n              textEmpty=\"Data Barang Kosong\"\r\n              expandRow={expandRow}\r\n            />\r\n          </div>\r\n          <div className=\"col-lg-12\">\r\n            <label>&nbsp;</label>\r\n            <button\r\n              type=\"submit\"\r\n              name=\"type_btn\"\r\n              className=\"btn btn-primary\"\r\n              disabled={this.props.isLoading}\r\n            >\r\n              {this.props.isLoading ? (\r\n                <>\r\n                  <i className=\"fas fa-spinner fa-spin\"></i> &nbsp;Simpan Batal\r\n                  Penjualan\r\n                </>\r\n              ) : (\r\n                \"Simpan Batal Penjualan\"\r\n              )}\r\n            </button>\r\n            &nbsp;\r\n            <button\r\n              type=\"button\"\r\n              name=\"type_btn\"\r\n              onClick={() => this.btlPenjualan()}\r\n              className=\"btn btn-warning\"\r\n              disabled={this.state.isLoadingBatal}\r\n            >\r\n              {this.state.isLoadingBatal ? (\r\n                <>\r\n                  <i className=\"fas fa-spinner fa-spin\"></i> &nbsp; Batal\r\n                </>\r\n              ) : (\r\n                \"Batal\"\r\n              )}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </form>\r\n    );\r\n  }\r\n}\r\n\r\nHeadBatalPenjualan = reduxForm({\r\n  form: \"HeadBatalPenjualan\",\r\n  enableReinitialize: true,\r\n  validate: ValidasiBaralJual,\r\n})(HeadBatalPenjualan);\r\nexport default connect(maptostate, null)(HeadBatalPenjualan);\r\n","import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { Field, reduxForm } from \"redux-form\";\r\nimport { HiidenFiled, ReanderField } from \"../../../components/helpers/field\";\r\n\r\nclass OtorisasiBatalJual extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {};\r\n  }\r\n  componentDidMount() {\r\n    // let data = JSON.parse(localStorage.getItem(\"no_faktur_batal_jual\"));\r\n    // this.props.change(\"no_faktur_group\", data.no_faktur_group);\r\n    // this.props.change(\"alasan\", data.alasan);\r\n  }\r\n  render() {\r\n    return (\r\n      <form\r\n        onSubmit={this.props.handleSubmit}\r\n        onKeyPress={(e) => {\r\n          e.key === \"Enter\" && e.preventDefault();\r\n        }}\r\n        autoComplete=\"off\"\r\n      >\r\n        <div className=\"row\">\r\n          <div className=\"col-lg-4\">\r\n            <Field\r\n              name=\"no_faktur_group\"\r\n              component={HiidenFiled}\r\n              type=\"hidden\"\r\n            />\r\n            <Field name=\"alasan\" component={HiidenFiled} type=\"hidden\" />\r\n            <Field\r\n              name=\"username\"\r\n              component={ReanderField}\r\n              type=\"text\"\r\n              label=\"Username\"\r\n              placeholder=\"Masukan Username\"\r\n            />\r\n          </div>\r\n          <div className=\"col-lg-4\">\r\n            <Field\r\n              name=\"password\"\r\n              component={ReanderField}\r\n              type=\"password\"\r\n              label=\"Password\"\r\n              placeholder=\"Masukan Password\"\r\n            />\r\n          </div>\r\n          <div className=\"col-lg-4\">\r\n            <label> &nbsp; </label>\r\n            <button\r\n              type=\"submit\"\r\n              name=\"type_btn\"\r\n              className=\"btn btn-primary btn-block\"\r\n              disabled={this.props.isLoadingOtorisasi}\r\n            >\r\n              {this.props.isLoadingOtorisasi ? (\r\n                <>\r\n                  <i className=\"fas fa-spinner fa-spin\"></i> &nbsp; Simpan\r\n                </>\r\n              ) : (\r\n                \"Simpan\"\r\n              )}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </form>\r\n    );\r\n  }\r\n}\r\n\r\nOtorisasiBatalJual = reduxForm({\r\n  form: \"OtorisasiBatalJual\",\r\n  enableReinitialize: true,\r\n})(OtorisasiBatalJual);\r\nexport default connect(null)(OtorisasiBatalJual);\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { reset } from \"redux-form\";\r\n// import { reset } from \"redux-form\";\r\nimport { hideModal, showModal } from \"../../../actions/datamaster_action.jsx\";\r\nimport {\r\n  setBatalPenjualan,\r\n  setNoFakturPenjualan,\r\n} from \"../../../actions/penjualan_action.jsx\";\r\n// import { setBatalPenjualan, setNoFakturPenjualan } from \"../../../actions/penjualan_action.jsx\";\r\nimport ModalGlobal from \"../../../components/helpers/ModalGlobal.jsx\";\r\nimport { ToastNotification } from \"../../../components/helpers/notification.jsx\";\r\n// import { ToastNotification } from \"../../../components/helpers/notification.jsx\";\r\n// import { ToastNotification } from \"../../../components/helpers/notification.jsx\";\r\nimport { Panel, PanelHeader } from \"../../../components/panel/panel.jsx\";\r\nimport { postData } from \"../../../config/axios.jsx\";\r\n// import { postData } from \"../../../config/axios.jsx\";\r\nimport HeadBatalPenjualan from \"./HeadBatalPenjualan.jsx\";\r\nimport OtorisasiBatalJual from \"./OtorisasiBatalJual.jsx\";\r\n\r\nconst maptostate = (state) => {\r\n  return {\r\n    // no_faktur: state.penjualan.setNoFakturPenjualan,\r\n    setBatalPenjualan: state.penjualan.setBatalPenjualan,\r\n  };\r\n};\r\nclass FormBatalPenjualan extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      isLoading: false,\r\n      databarang: [],\r\n      isLoadingOtorisasi: false,\r\n      columns: [\r\n        {\r\n          dataField: \"kode_barcode\",\r\n          text: \"Kode Barcode\",\r\n          footerAttrs: {\r\n            colSpan: \"1\",\r\n          },\r\n          footer: \"Total Barang \",\r\n        },\r\n        {\r\n          dataField: \"nama_barang\",\r\n          text: \"Nama Barang\",\r\n          footer: (columnData) => parseInt(this.props.setBatalPenjualan.length),\r\n        },\r\n\r\n        {\r\n          dataField: \"berat\",\r\n          text: \"Berat\",\r\n          formatter: (cell) => {\r\n            return <span>{parseInt(cell).toFixed(1)}</span>;\r\n          },\r\n          footer: (columnData) =>\r\n            parseInt(columnData.reduce((acc, item) => acc + item, 0)).toFixed(\r\n              1\r\n            ),\r\n        },\r\n        // {\r\n        //   dataField: \"nama_atribut\",\r\n        //   text: \"Nama Atribut\",\r\n        // },\r\n        // {\r\n        //   dataField: \"harga_atribut\",\r\n        //   text: \"Harga Atribut\",\r\n        //   formatter: (cell) => {\r\n        //     return <span>{parseInt(cell).toLocaleString(\"ID-id\")}</span>;\r\n        //   },\r\n        //   footer: (columnData) =>\r\n        //     parseInt(\r\n        //       columnData.reduce((acc, item) => acc + item, 0)\r\n        //     ).toLocaleString(\"id-ID\"),\r\n        // },\r\n\r\n        // {\r\n        //   dataField: \"berat_atribut\",\r\n        //   text: \"Berat Atribut\",\r\n        //   formatter: (cell) => {\r\n        //     return <span>{parseInt(cell).toFixed(1)}</span>;\r\n        //   },\r\n        //   footer: (columnData) =>\r\n        //     parseInt(columnData.reduce((acc, item) => acc + item, 0)).toFixed(\r\n        //       1\r\n        //     ),\r\n        // },\r\n\r\n        {\r\n          dataField: \"harga_jual\",\r\n          text: \"Harga Jual\",\r\n          formatter: (cell) => {\r\n            return <span>{parseInt(cell).toLocaleString(\"ID-id\")}</span>;\r\n          },\r\n          footer: (columnData) =>\r\n            parseInt(\r\n              columnData.reduce((acc, item) => acc + item, 0)\r\n            ).toLocaleString(\"id-ID\"),\r\n        },\r\n        {\r\n          dataField: \"harga_total\",\r\n          text: \"Harga Total\",\r\n          formatter: (cell) => {\r\n            return <span>{parseInt(cell).toLocaleString(\"ID-id\")}</span>;\r\n          },\r\n          footer: (columnData) =>\r\n            parseInt(\r\n              columnData.reduce((acc, item) => acc + item, 0)\r\n            ).toLocaleString(\"id-ID\"),\r\n        },\r\n      ],\r\n    };\r\n    this.handleSubmit = this.handleSubmit.bind(this);\r\n  }\r\n\r\n  handleSubmit(data) {\r\n    let hasil = {\r\n      no_faktur_group: data.no_faktur,\r\n      alasan: data.alasan,\r\n    };\r\n    localStorage.setItem(\"no_faktur_batal_jual\", JSON.stringify(hasil));\r\n    this.props.dispatch(showModal());\r\n  }\r\n  simpanTransaksiJual(data) {\r\n    this.setState({\r\n      isLoadingOtorisasi: true,\r\n    });\r\n    let data_batal_penjualan = JSON.parse(\r\n      localStorage.getItem(\"no_faktur_batal_jual\")\r\n    );\r\n\r\n    let hasil_btl_penjualan = {\r\n      no_faktur_group: data_batal_penjualan.no_faktur_group,\r\n    };\r\n    let hasil = {\r\n      user_id: data.username,\r\n      password: data.password,\r\n    };\r\n    postData(\"users/login\", hasil)\r\n      .then((resposn) => {\r\n        ToastNotification(\"success\", \"Otorisasi Berhasil\");\r\n        this.setState({\r\n          isLoadingOtorisasi: true,\r\n        });\r\n        postData(\"batalpenjualan/simpan\", hasil_btl_penjualan)\r\n          .then((res) => {\r\n            this.setState({ isLoadingOtorisasi: false });\r\n            this.props.dispatch(setBatalPenjualan([]));\r\n            this.props.dispatch(setNoFakturPenjualan([]));\r\n            ToastNotification(\"success\", res.data.message);\r\n          })\r\n          .then(() => {\r\n            this.props.dispatch(reset(\"HeadBatalPenjualan\"));\r\n            this.props.dispatch(reset(\"OtorisasiBatalJual\"));\r\n            this.props.dispatch(hideModal());\r\n          })\r\n          .catch((err) => {\r\n            this.setState({ isLoadingOtorisasi: false });\r\n            ToastNotification(\"info\", err.message);\r\n          });\r\n      })\r\n      .catch((err) => {\r\n        ToastNotification(\"info\", \"Username atau Password Salah\");\r\n        this.setState({\r\n          isLoadingOtorisasi: false,\r\n        });\r\n      });\r\n  }\r\n  render() {\r\n    return (\r\n      <div>\r\n        <ol className=\"breadcrumb float-xl-right\">\r\n          <li className=\"breadcrumb-item\">\r\n            <Link to=\"#\">Penjualan</Link>\r\n          </li>\r\n          <li className=\"breadcrumb-item active\">Batal Penjualan</li>\r\n        </ol>\r\n        <h1 className=\"page-header\">Batal Penjualan </h1>\r\n        <Panel>\r\n          <PanelHeader>Batal Penjualan</PanelHeader>\r\n          <br />\r\n          <div className=\"container\">\r\n            <HeadBatalPenjualan\r\n              isLoading={this.state.isLoading}\r\n              onSubmit={(data) => this.handleSubmit(data)}\r\n              data={this.state.databarang}\r\n              columns={this.state.columns}\r\n            />\r\n          </div>\r\n          <br />\r\n          <ModalGlobal\r\n            size=\"L\"\r\n            title=\"Otorisasi Pembatalan\"\r\n            content={\r\n              <OtorisasiBatalJual\r\n                isLoadingOtorisasi={this.state.isLoadingOtorisasi}\r\n                onSubmit={(data) => this.simpanTransaksiJual(data)}\r\n              />\r\n            }\r\n          />\r\n        </Panel>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default connect(maptostate, null)(FormBatalPenjualan);\r\n","const ValidasiBaralJual = (value) => {\r\n    const errors = {};\r\n    if (!value.kode_barcode) {\r\n        errors.kode_barcode = \"Kode Barcode Harus Diisi\";\r\n    }\r\n    if (!value.no_faktur) {\r\n        errors.no_faktur = \"No Faktur Harus Diisi\";\r\n    }\r\n    if (!value.alasan) {\r\n        errors.alasan = \"Alasan Harus Diisi\";\r\n    }\r\n    return errors;\r\n}\r\n\r\nexport default ValidasiBaralJual;\r\n\r\n\r\n"],"sourceRoot":""}